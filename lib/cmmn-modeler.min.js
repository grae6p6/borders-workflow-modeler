/*! cmmn-js - cmmn-modeler v0.9.3 | (c) 2014, 2015 camunda Services GmbH | bpmn.io/license */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.CmmnJS=e()}}(function(){var e;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return r(n||e)},l,l.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";function i(e){a.call(this,e),this.on("import.parse.complete",function(e){e.error||this._collectIds(e.definitions,e.context)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}var r=e(267),o=e(265),a=e(3),s=e(2);r(i,a),t.exports=i,t.exports.Viewer=a,t.exports.NavigatedViewer=s,i.prototype.createDiagram=function(e){return this.importXML('<?xml version="1.0" encoding="UTF-8"?><cmmn:definitions xmlns:dc="http://www.omg.org/spec/CMMN/20151109/DC" xmlns:di="http://www.omg.org/spec/CMMN/20151109/DI" xmlns:cmmndi="http://www.omg.org/spec/CMMN/20151109/CMMNDI" xmlns:cmmn="http://www.omg.org/spec/CMMN/20151109/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Test" targetNamespace="http://bpmn.io/schema/cmmn"><cmmn:case id="Case_1"><cmmn:casePlanModel id="CasePlanModel_1" name="A CasePlanModel"><cmmn:planItem id="PlanItem_1" definitionRef="Task_1" /><cmmn:task id="Task_1" /></cmmn:casePlanModel></cmmn:case><cmmndi:CMMNDI><cmmndi:CMMNDiagram id="CMMNDiagram_1"><cmmndi:Size xsi:type="dc:Dimension" width="500" height="500" /><cmmndi:CMMNShape id="DI_CasePlanModel_1" cmmnElementRef="CasePlanModel_1"><dc:Bounds x="114" y="63" width="534" height="389" /><cmmndi:CMMNLabel /></cmmndi:CMMNShape><cmmndi:CMMNShape id="PlanItem_1_di" cmmnElementRef="PlanItem_1"><dc:Bounds x="150" y="96" width="100" height="80" /><cmmndi:CMMNLabel /></cmmndi:CMMNShape></cmmndi:CMMNDiagram></cmmndi:CMMNDI></cmmn:definitions>',e)},i.prototype._createModdle=function(e){var t=a.prototype._createModdle.call(this,e);return t.ids=new o([32,36,1]),t},i.prototype._collectIds=function(e,t){var n,i=e.$model,r=i.ids;r.clear();for(n in t.elementsById)r.claim(n,t.elementsById[n])},i.prototype._interactionModules=[e(118),e(226),e(229),e(50)],i.prototype._modelingModules=[e(124),e(141),e(183),e(201),e(10),e(12),e(16),e(20),e(44),e(52),e(66),e(56)],i.prototype._modules=[].concat(i.prototype._modules,i.prototype._interactionModules,i.prototype._modelingModules)},{10:10,118:118,12:12,124:124,141:141,16:16,183:183,2:2,20:20,201:201,226:226,229:229,265:265,267:267,3:3,44:44,50:50,52:52,56:56,66:66}],2:[function(e,t,n){"use strict";function i(e){o.call(this,e)}var r=e(267),o=e(3);r(i,o),t.exports=i,i.prototype._navigationModules=[e(229),e(226)],i.prototype._modules=[].concat(i.prototype._modules,i.prototype._navigationModules)},{226:226,229:229,267:267,3:3}],3:[function(e,t,n){"use strict";function i(e){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/,n=t.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid CMMN 1.1 diagram file"+n[2]),e}function r(e){return e+(u(e)?"px":"")}function o(e){e=s({},v,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),a(this._container),this._init(this._container,this._moddle,e)}function a(e){var t=x.BPMNIO_IMG,n='<a href="http://bpmn.io" target="_blank" class="cjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100">'+t+"</a>",i=p(n);e.appendChild(i),_.bind(i,"click",function(e){x.open(),e.preventDefault()})}var s=e(408),c=e(412),u=e(402),l=e(267),p=e(422),h=e(424),d=e(425),f=e(453),m=e(97),g=e(78),y=e(69),v={width:"100%",height:"100%",position:"relative"};l(o,m),t.exports=o,o.prototype.importXML=function(e,t){t=t||function(){};var n=this;e=this._emit("import.parse.start",{xml:e})||e,this._moddle.fromXML(e,"cmmn:Definitions",function(e,r,o){r=n._emit("import.parse.complete",{error:e,definitions:r,context:o})||r;var a=o.warnings;if(e)return e=i(e),n._emit("import.done",{error:e,warnings:a}),t(e,a);n.importDefinitions(r,function(e,i){var r=[].concat(a,i||[]);n._emit("import.done",{error:e,warnings:r}),t(e,r)})})},o.prototype.saveXML=function(e,t){t||(t=e,e={});var n=this._definitions;if(!n)return t(new Error("no definitions loaded"));this._moddle.toXML(n,e,t)},o.prototype.saveSVG=function(e,t){t||(t=e,e={});var n=this.get("canvas"),i=n.getDefaultLayer(),r=h("defs",n._svg),o=f(i),a=r&&r.outerHTML||"",s=i.getBBox();t(null,'<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- created with cmmn-js / http://bpmn.io --\x3e\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+s.width+'" height="'+s.height+'" viewBox="'+s.x+" "+s.y+" "+s.width+" "+s.height+'" version="1.1">'+a+o+"</svg>")},o.prototype.importDefinitions=function(e,t){try{this._definitions&&this.clear(),this._definitions=e,y.importCmmnDiagram(this,e,t)}catch(e){t(e)}},o.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),"string"==typeof e&&(e=h(e)),e.appendChild(this._container),this._emit("attach",{})},o.prototype.getDefinitions=function(){return this._definitions},o.prototype.detach=function(){var e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},o.prototype.getModules=function(){return this._modules},o.prototype.destroy=function(){m.prototype.destroy.call(this),d(this._container)},o.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},o.prototype.off=function(e,t){this.get("eventBus").off(e,t)},o.prototype._init=function(e,t,n){var i=n.modules||this.getModules(),r=n.additionalModules||[],o=[{cmmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,i,r),u=s(c(n,"additionalModules"),{canvas:s({},n.canvas,{container:e}),modules:a});m.call(this,u),n&&n.container&&this.attachTo(n.container)},o.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},o.prototype._createContainer=function(e){var t=p('<div class="cjs-container"></div>');return s(t.style,{width:r(e.width),height:r(e.height),position:e.position}),t},o.prototype._createModdle=function(e){var t=s({},this._moddleExtensions,e.moddleExtensions);return new g(t)},o.prototype._modules=[e(5),e(210),e(188)];var x=e(75),_=e(423)},{188:188,210:210,267:267,402:402,408:408,412:412,422:422,423:423,424:424,425:425,453:453,5:5,69:69,75:75,78:78,97:97}],4:[function(e,t,n){"use strict";function i(e,t){this._items={},this._referencedBy={},this._elementRegistry=e,this._eventBus=t,this._init()}function r(e){return s(e)||c(e)}function o(e){return u(e,["cmmn:PlanItemDefinition","cmmn:Sentry","cmmn:CaseFileItemDefinition"])}var a=e(74),s=a.getDefinition,c=a.getSentry,u=e(45).isAny,l=e(281),p=e(399);i.$inject=["elementRegistry","eventBus"],t.exports=i,i.prototype._init=function(e){var t=this._eventBus;t.on("diagram.destroy",500,this._clear,this),t.on("diagram.clear",500,this._clear,this)},i.prototype._clear=function(){this._items={},this._referencedBy={}},i.prototype.add=function(e){var t=this._items,n=e.id,i=this._referencedBy,o=r(e),a=o&&o.id;t[n]=e,o&&(i[a]=i[a]||[],-1===i[a].indexOf(e)&&i[a].push(e))},i.prototype.remove=function(e){var t=this._items,n=e.id,i=this._referencedBy,o=r(e),a=o&&o.id;if(delete t[n],o){var s=i[a]||[],c=s.indexOf(e);-1!==c&&s.splice(c,1),s.length||delete i[a]}},i.prototype.updateId=function(e,t){var n,i;"string"==typeof e&&(e=this.get(e)),n=o(e)?this._referencedBy:this._items,e&&(i=n[e.id],delete n[e.id],n[t]=i)},i.prototype.updateReference=function(e,t){var n=this._referencedBy,i=r(e),o=i&&i.id;if(i){var a=n[o]||[],s=a.indexOf(e);-1!==s&&a.splice(s,1),a.length||delete n[o]}if(t){var c=t.id;c&&(n[c]=n[c]||[],-1===n[c].indexOf(e)&&n[c].push(e))}},i.prototype.get=function(e){return this._items[e]},i.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},i.prototype.getAll=function(){return this.filter(function(e){return e})},i.prototype.forEach=function(e){var t=this._items;l(t,function(t){return e(t,r(t))})},i.prototype.getReferences=function(e){var t=e.id||e;return(this._referencedBy[t]||[]).slice()},i.prototype.getShape=function(e){var t=e.id||e;return this._elementRegistry&&this._elementRegistry.get(t)},i.prototype.getShapes=function(e){function t(e){e&&n.push(e)}var n=[],i=this;if(p(e))l(e,function(e){t(i.getShape(e))});else if(o(e)){var r=i.getReferences(e);l(r,function(e){t(i.getShape(e))})}else t(i.getShape(e));return n}},{281:281,399:399,45:45,74:74}],5:[function(e,t,n){t.exports={__depends__:[e(8),e(71)],itemRegistry:["type",e(4)]}},{4:4,71:71,8:8}],6:[function(e,t,n){"use strict";function i(e,t,n){function i(e,t){ie[e]=t}function r(e){return ie[e]}function l(e){function t(t,n){var r=s({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},n.attrs),o=n.ref||{x:0,y:0},a=n.scale||1;"none"===r.strokeDasharray&&(r.strokeDasharray=[1e4,1]);var c=k("marker");R(n.element,r),P(c,n.element),R(c,{id:t,viewBox:"0 0 20 20",refX:o.x,refY:o.y,markerWidth:20*a,markerHeight:20*a,orient:"auto"});var u=M("defs",e);return u||(u=k("defs"),P(e,u)),P(u,c),i(t,c)}var n=k("path");R(n,{d:"M 11 5 L 1 10 L 11 15"}),t("association-start",{element:n,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});var r=k("path");R(r,{d:"M 1 5 L 11 10 L 1 15"}),t("association-end",{element:r,attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}function p(e,n,i){return o(n)||(i=n,n=[]),t.style(n||[],s(i,e||{}))}function j(e,t,n,i,r){a(i)&&(r=i,i=0),i=i||0,r=p(r,{stroke:"black",strokeWidth:2,fill:"white"});var o=t/2,s=n/2,c=k("circle");return R(c,{cx:o,cy:s,r:Math.round((t+n)/4-i)}),R(c,r),P(e,c),c}function N(e,t,n,i,r,o){a(r)&&(o=r,r=0),r=r||0,o=p(o,{stroke:"black",strokeWidth:2,fill:"white"});var s=k("rect");return R(s,{x:r,y:r,width:t-2*r,height:n-2*r,rx:i,ry:i}),R(s,o),P(e,s),s}function O(e,t,n,i){var r=t/2,o=n/2,a=[{x:r,y:0},{x:t,y:o},{x:r,y:n},{x:0,y:o}],s=a.map(function(e){return e.x+","+e.y}).join(" ");i=p(i,{stroke:"black",strokeWidth:2,fill:"white"});var c=k("polygon");return R(c,{points:s}),R(c,i),P(e,c),c}function D(e,t,n){n=p(n,["no-fill"],{strokeWidth:2,stroke:"black"});var i=k("path");return R(i,{d:t}),R(i,n),P(e,i),i}function B(e,t,n,i,r){i=i||20;var o=i,a=n,s=n-i,c=i,u=i,l=t-i,p=t,h=i,d=t,f=n-i,m=t-i,g=n,y=[{x:o,y:a},{x:0,y:s},{x:0,y:c},{x:u,y:0},{x:l,y:0},{x:p,y:h},{x:d,y:f},{x:m,y:g}];return r=r||{},r.fill="white",r.stroke="black",r.strokeWidth=2,L(e,y,r)}function L(e,t,n){var i=t.map(function(e){return e.x+","+e.y}).join(" "),r=k("polygon");return R(r,{points:i}),R(r,n),P(e,r),r}function z(e,t,n){n=p(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var i=I(t,n);return P(e,i),i}function F(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)n+="L"+t[i].x+","+t[i].y+" ";return n}function $(e,t,n){var i=ne.createText(t||"",n);return T(i).add("djs-label"),P(e,i),i}function H(e,t,n){return $(e,E(t),{box:t,align:n,padding:5})}function U(e,t,n){var i=E(t),r=$(e,i,{box:t,align:n,padding:5});return A(r,ee,0),r}function W(e,t){var n=g(t),i=t.width/2-60,r=n.name,o=$(e,r,{box:{height:18,width:i},align:"left-top"}),a=o.getBBox().width,s=a+40;a<60&&(s=100);var c=[{x:10,y:0},{x:20,y:-18},{x:s,y:-18},{x:s+10,y:0}],u=L(e,c,{fill:"white",stroke:"black",strokeWidth:2,fillOpacity:.95,"pointer-events":"all"});return o.parentNode.insertBefore(u,o),A(o,25,-19),o}function V(e,t){var n=E(t),i=!1,r=S(t);if(r){var o=h(t);r="["+r+"]",n?o&&(n=n+" "+r):(n=r,t.hidden=i=!o)}var a={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return t.hidden=t.labelTarget.hidden||i||!n,$(e,n,{box:a,style:{fontSize:"11px"}})}function G(e){return re[e]}function q(e,t){var n=g(t),i=[];v(n)&&i.push({marker:"RequiredMarker",width:1}),_(n)&&i.push({marker:"ManualActivationMarker",width:14}),x(n)&&i.push({marker:"RepetitionMarker",width:14}),i.length&&(1===i.length?Z(i[0].marker,e,t,i[0].width/2*-1):2===i.length?(Z(i[0].marker,e,t,-1*i[0].width-3),Z(i[1].marker,e,t,3)):3===i.length&&(Z(i[1].marker,e,t,i[1].width/2*-1),Z(i[0].marker,e,t,i[1].width/2*-1-6-i[0].width),Z(i[2].marker,e,t,i[1].width/2+6)))}function K(e,t){var n=g(t);b(n)&&Z("AutoCompleteMarker",e,t,-7)}function Y(e,t,n){var i=g(t);Z("StageMarker",e,t,-7);var r=[];v(i)&&r.push({marker:"RequiredMarker",width:1}),b(i)&&r.push({marker:"AutoCompleteMarker",width:14}),r.length&&(1===r.length?Z(r[0].marker,e,t,-1*r[0].width-7-6):2===r.length&&(Z(r[0].marker,e,t,-1*r[1].width-7-6- -1*r[0].width-6),Z(r[1].marker,e,t,-1*r[1].width-7-6)));var o=[];_(i)&&o.push({marker:"ManualActivationMarker",width:14}),x(i)&&o.push({marker:"RepetitionMarker",width:14}),o.length&&(1===o.length?Z(o[0].marker,e,t,13):2===o.length&&(Z(o[0].marker,e,t,13),Z(o[1].marker,e,t,13+o[0].width+6)))}function X(e,t){w(t)&&Z("PlanningTableMarker",e,t)}function Z(e,t,n,i){G(e)(t,n,i)}function Q(e,t){var n=re[t.type];return n?n(e,t):c.prototype.drawShape.apply(this,[e,t])}function J(e,t){var n=t.type,i=re[n];return i?i(e,t):c.prototype.drawConnection.apply(this,[e,t])}c.call(this,e);var ee=20,te={fontFamily:"Arial, sans-serif",fontSize:"12px"},ne=new u({style:te,size:{width:100}}),ie={},re={"cmmn:PlanItem":function(e,t){return G(y(t).$type)(e,t)},"cmmn:DiscretionaryItem":function(e,t){var n=y(t),i={strokeDasharray:"10, 12"};return C(n,"cmmn:Task")&&s(i,{strokeDasharray:"12, 12.4",strokeDashoffset:13.6}),G(n.$type)(e,t,i)},"cmmn:Stage":function(e,t,n){n=s({fillOpacity:.95},n);var i;return m(t)?re["cmmn:CasePlanModel"](e,t):(i=B(e,t.width,t.height,ee,n),f(t)?H(e,t,"center-middle"):U(e,t,"left-top"),X(e,t),Y(e,t),i)},"cmmn:PlanFragment":function(e,t,n){var i=N(e,t.width,t.height,10,{strokeDasharray:"10, 12",fillOpacity:.95});return H(e,t,f(t)?"center-middle":"left-top"),Y(e,t),i},"cmmn:CasePlanModel":function(e,t){var n=N(e,t.width,t.height,0,{fillOpacity:.95});return W(e,t),X(e,t),K(e,t),n},"cmmn:Milestone":function(e,t,n){var i=N(e,t.width,t.height,24,n);return H(e,t,"center-middle"),q(e,t),i},"cmmn:EventListener":function(e,t,n){var i=j(e,t.width,t.height,n);return n=n||{},n.strokeWidth=2,j(e,t.width,t.height,.1*t.height,n),i},"cmmn:TimerEventListener":function(e,t,i){var r=G("cmmn:EventListener")(e,t,i);D(e,n.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square"});for(var o=0;o<12;o++){var a=n.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),s=t.width/2;D(e,a,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*o+","+t.height/2+","+s+")"})}return r},"cmmn:UserEventListener":function(e,t,i){var r=G("cmmn:EventListener")(e,t,i);return D(e,n.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:20,y:15}}),{strokeWidth:.5,fill:"none"}),D(e,n.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:20,y:15}}),{strokeWidth:.5,fill:"none"}),D(e,n.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:20,y:15}}),{strokeWidth:.5,fill:"black"}),r},"cmmn:Task":function(e,t,n){var i=N(e,t.width,t.height,10,n);return H(e,t,"center-middle"),q(e,t),i},"cmmn:HumanTask":function(e,t,i){var r=G("cmmn:Task")(e,t,i);t.businessObject.definitionRef.isBlocking?(D(e,n.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:"none"}),D(e,n.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:"none"}),D(e,n.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:"black"})):D(e,n.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:1.25,fill:"white",stroke:"black"});return X(e,t),r},"cmmn:CaseTask":function(e,t,i){var r=G("cmmn:Task")(e,t,i);return D(e,n.getScaledPath("TASK_TYPE_FOLDER",{abspos:{x:7,y:7}}),{strokeWidth:1.25,fill:"white",stroke:"black"}),r},"cmmn:ProcessTask":function(e,t,i){var r=G("cmmn:Task")(e,t,i);return D(e,n.getScaledPath("TASK_TYPE_CHEVRON",{abspos:{x:5,y:5}}),{strokeWidth:1.25,fill:"white",stroke:"black"}),r},"cmmn:DecisionTask":function(e,t,i){var r=G("cmmn:Task")(e,t,i);return D(e,n.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),{strokeWidth:1,fill:"000"}),D(e,n.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),{strokeWidth:1}),r},"cmmn:CaseFileItem":function(e,t,i){return D(e,n.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:"white"})},"cmmn:TextAnnotation":function(e,t){var i={fill:"none",stroke:"none"},r=N(e,t.width,t.height,0,0,i);return D(e,n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}})),$(e,g(t).text||"",{box:t,align:"left-middle",padding:5}),r},"cmmn:Association":function(e,t,n){var i=g(t);return n=s({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round"},n||{}),"One"!==i.associationDirection&&"Both"!==i.associationDirection||(n.markerEnd=r("association-end")),"Both"===i.associationDirection&&(n.markerStart=r("association-start")),z(e,t.waypoints,n)},StageMarker:function(e,t){var i=N(e,14,14,0,{strokeWidth:1,stroke:"black"});A(i,t.width/2-7,t.height-17);var r=f(t)?"MARKER_STAGE_COLLAPSED":"MARKER_STAGE_EXPANDED";D(e,n.getScaledPath(r,{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7)/t.width,my:(t.height-17)/t.height}}))},RequiredMarker:function(e,t,i){D(e,n.getScaledPath("MARKER_REQUIRED",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i)/t.width,my:(t.height-17)/t.height}}),{strokeWidth:3})},AutoCompleteMarker:function(e,t,n){var i=N(e,11,14,0,{strokeWidth:1,stroke:"black",fill:"black"});A(i,t.width/2+n+2,t.height-17)},ManualActivationMarker:function(e,t,i){D(e,n.getScaledPath("MARKER_MANUAL_ACTIVATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i)/t.width,my:(t.height-17)/t.height}}),{strokeWidth:1})},RepetitionMarker:function(e,t,i){D(e,n.getScaledPath("MARKER_REPEATABLE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i)/t.width,my:(t.height-17)/t.height}}))},PlanningTableMarker:function(e,t,i){var r=N(e,30,24,0,{strokeWidth:1.5,stroke:"black"});A(r,t.width/2-15,-17);var o=d(t),a=o?"MARKER_PLANNING_TABLE_COLLAPSED":"MARKER_PLANNING_TABLE_EXPANDED";D(e,n.getScaledPath(a,{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-15)/t.width,my:-17/t.height}}),{strokeWidth:1.5})},"cmmn:OnPart":function(e,t){return D(e,F(t),{strokeDasharray:"10, 5, 2, 5, 2, 5",strokeWidth:1.5})},"cmmn:PlanItemOnPart":function(e,t){return G("cmmn:OnPart")(e,t)},"cmmn:CaseFileItemOnPart":function(e,t){return G("cmmn:OnPart")(e,t)},"cmmn:EntryCriterion":function(e,t){return O(e,t.width,t.height,{fill:"white"})},"cmmn:ExitCriterion":function(e,t){return O(e,t.width,t.height,{fill:"black"})},"cmmndi:CMMNEdge":function(e,t){var n=g(t);return n.cmmnElementRef?G(n.cmmnElementRef.$type)(e,t):D(e,F(t),{strokeDasharray:"3, 5",strokeWidth:1})},label:function(e,t){var n,i=V(e,t);try{n=i.getBBox()}catch(e){n={width:0,height:0,x:0}}return t.x=Math.ceil(t.x+t.width/2)-Math.ceil(n.width/2),t.width=Math.ceil(n.width),t.height=Math.ceil(n.height),R(i,{transform:"translate("+-1*n.x+",0)"}),i}};this.canRender=function(e){return C(e,"cmmn:CMMNElement")||C(e,"cmmndi:CMMNEdge")},this.drawShape=Q,this.drawConnection=J,e.on("canvas.init",function(e){l(e.svg)})}var r=e(267),o=e(399),a=e(403),s=e(408),c=e(108),u=e(248),l=e(72),p=e(74),h=l.isStandardEventVisible,d=l.isPlanningTableCollapsed,f=l.isCollapsed,m=p.isCasePlanModel,g=p.getBusinessObject,y=p.getDefinition,v=p.isRequired,x=p.isRepeatable,_=p.isManualActivation,b=p.isAutoComplete,w=p.hasPlanningTable,E=p.getName,C=p.is,S=p.getStandardEvent,M=e(424),P=e(445),R=e(447),T=e(448),k=e(451),A=e(247).translate,I=e(246).createLine;r(i,c),i.$inject=["eventBus","styles","pathMap"],t.exports=i},{108:108,246:246,247:247,248:248,267:267,399:399,403:403,408:408,424:424,445:445,447:447,448:448,451:451,72:72,74:74}],7:[function(e,t,n){"use strict";function i(){var e="m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5",t="m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005",n="m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z";this.pathMap={TASK_TYPE_FOLDER:{d:"m {mx},{my} l18,0 l0,12 l-18,0 l0,-12 m 2,0 l3,-4 l5,0 l3,4"},TASK_TYPE_CHEVRON:{d:"m {mx},{my} l15,0 l6,6 l-6,6 l-15,0 l6,-6 l-6,-6"},TASK_TYPE_USER_1:{d:e},TASK_TYPE_USER_2:{d:t},TASK_TYPE_USER_3:{d:n},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_USER_1:{d:e,height:36,width:36,heightElements:[],widthElements:[]},EVENT_USER_2:{d:t,height:36,width:36,heightElements:[],widthElements:[]},EVENT_USER_3:{d:n,height:36,width:36,heightElements:[],widthElements:[]},MARKER_STAGE_EXPANDED:{d:"m{mx},{my} m 2,7 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_STAGE_COLLAPSED:{d:"m{mx},{my} m 2,7 l 10,0 m -5,-5 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_REQUIRED:{d:"m{mx},{my} l 0,9 m 0,2 l0,3",height:14,width:3,heightElements:[],widthElements:[]},MARKER_MANUAL_ACTIVATION:{d:"m{mx}, {my} l 14,7 l -14,7 l 0,-14 z",height:14,width:14,heightElements:[],widthElements:[]},MARKER_REPEATABLE:{d:"m{mx},{my} m 3,0 l 0,14 m 6,-14 l 0,14 m -10,-10 l 14,0 m -14,6 l 14,0",height:14,width:14,heightElements:[],widthElements:[]},MARKER_PLANNING_TABLE_EXPANDED:{d:"m{mx},{my} m 0,12 l 30,0 m -20,-12 l 0, 24 m 10, -24 l 0, 24 m -10, -6 l 10,0",height:24,width:30,heightElements:[],widthElements:[]},MARKER_PLANNING_TABLE_COLLAPSED:{d:"m{mx},{my} m 0,12 l 30,0 m -20,-12 l 0, 24 m 10, -24 l 0, 24 m -10, -6 l 10,0 m -5, -6 l 0,12",height:10,width:10,heightElements:[],widthElements:[]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]}},this.getRawPath=function(e){return this.pathMap[e].d},this.getScaledPath=function(e,t){var n,i,r=this.pathMap[e];t.abspos?(n=t.abspos.x,i=t.abspos.y):(n=t.containerWidth*t.position.mx,i=t.containerHeight*t.position.my);var a={};if(t.position){for(var s=t.containerHeight/r.height*t.yScaleFactor,c=t.containerWidth/r.width*t.xScaleFactor,u=0;u<r.heightElements.length;u++)a["y"+u]=r.heightElements[u]*s;for(var l=0;l<r.widthElements.length;l++)a["x"+l]=r.widthElements[l]*c}return o(r.d,{mx:n,my:i,e:a})}}function r(e,t,n){var i=n;return t.replace(s,function(e,t,n,r,o){t=t||r,i&&(t in i&&(i=i[t]),"function"==typeof i&&o&&(i=i()))}),i=(null==i||i==n?e:i)+""}function o(e,t){return String(e).replace(a,function(e,n){return r(e,n,t)})}t.exports=i;var a=/\{([^\}]+)\}/g,s=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g},{}],8:[function(e,t,n){t.exports={__init__:["cmmnRenderer"],cmmnRenderer:["type",e(6)],pathMap:["type",e(7)]}},{6:6,7:7}],9:[function(e,t,n){"use strict";function i(e){c.call(this,e)}var r=e(74).is,o=e(74).getDefinition,a=e(267),s=e(281),c=e(115);a(i,c),i.$inject=["eventBus"],t.exports=i,i.prototype.canResize=function(e,t){if(r(t,"cmmn:CMMNElement")){var n=!0;if(s(e,function(e){if(!r(e,"cmmn:Criterion"))return void(n=!1)}),!n){var i=o(t);return r(i,"cmmn:PlanFragment")}}}},{115:115,267:267,281:281,74:74}],10:[function(e,t,n){t.exports={__init__:["cmmnAutoResizeProvider"],__depends__:[e(116)],cmmnAutoResizeProvider:["type",e(9)]}},{116:116,9:9}],11:[function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){e.registerProvider(this),this._contextPad=e,this._connect=t,this._create=n,this._elementFactory=i,this._modeling=r,this._rules=o,this._popupMenu=a,this._canvas=s}function r(e){var t=l(e);return u(t,"cmmn:HumanTask")&&t.isBlocking}var o=e(408),a=e(399),s=e(45).isAny,c=e(74),u=c.is,l=c.getDefinition;i.$inject=["contextPad","connect","create","elementFactory","modeling","rules","popupMenu","canvas"],t.exports=i,i.prototype.getContextPadEntries=function(e){function t(t){d.removeElements([e])}function n(e){var t=f.getContainer(),n=u.getPad(e).html,i=t.getBoundingClientRect(),r=n.getBoundingClientRect(),o=r.top-i.top;return{x:r.left-i.left,y:o+r.height+5}}function i(e,t,n){l.start(e,t,n)}function c(e,t,n,i,r){function a(t,n){var r=h.createShape(o({type:e},i));p.start(t,r,n)}return"string"!=typeof n&&(i=n,n="Append "+e.replace(/^cmmn\:/,"")),{group:"model",className:t,title:n,action:{dragstart:r||a,click:r||a}}}var u=this._contextPad,l=this._connect,p=this._create,h=this._elementFactory,d=this._modeling,f=this._canvas,m=this._rules,g=this._popupMenu,y={};if("label"===e.type)return y;s(e,["cmmn:PlanItem","cmmn:CaseFileItem"])&&o(y,{"append.entryCriterion":function(e,t,n){function i(e,t){var n=h.createCriterionShape("cmmn:EntryCriterion");p.start(e,n,t)}return c("cmmn:EntryCriterion",e,t,n,i)}("cmmn-icon-entry-criterion","Append Criterion")}),r(e)&&o(y,{"append.discretionaryItem":function(e,t,n){function i(e,t){var n=h.createDiscretionaryItemShape("cmmn:Task");p.start(e,n,t)}return c("cmmn:DiscretionaryItem",e,t,n,i)}("cmmn-icon-task-discretionary","Append DiscretionaryItem")});var v;g._providers["cmmn-replace"]&&(v=g.create("cmmn-replace",e)),v&&!v.isEmpty()&&o(y,{replace:{group:"edit",className:"cmmn-icon-screw-wrench",title:"Change type",action:{click:function(e,t){v.open(o(n(t),{cursor:{x:e.x,y:e.y}}),t)}}}}),s(e,["cmmndi:CMMNEdge","cmmn:TextAnnotation"])||o(y,{"append.text-annotation":c("cmmn:TextAnnotation","cmmn-icon-text-annotation")}),s(e,["cmmn:PlanItem","cmmn:DiscretionaryItem","cmmn:CaseFileItem","cmmn:Criterion"])&&o(y,{connect:{group:"connect",className:"cmmn-icon-connection",title:"Connect using Discretionary/OnPart or Association",action:{click:i,dragstart:i}}});var x=m.allowed("elements.delete",{elements:[e]});return a(x)&&(x=x[0]===e),x&&o(y,{delete:{group:"edit",className:"cmmn-icon-trash",title:"Remove",action:{click:t}}}),y}},{399:399,408:408,45:45,74:74}],12:[function(e,t,n){t.exports={__depends__:[e(130),e(132),e(136),e(210),e(54)],__init__:["contextPadProvider"],contextPadProvider:["type",e(11)]}},{11:11,130:130,132:132,136:136,210:210,54:54}],13:[function(e,t,n){"use strict";function i(e){e.registerProvider(this)}function r(e){return!e||o(e)}function o(e){return e.labelTarget}var a=e(45).isAny;i.$inject=["globalConnect"],t.exports=i,i.prototype.canStartConnect=function(e){if(r(e))return null;var t=e.businessObject;return a(t,["cmmn:CaseFileItem","cmmn:Criterion","cmmn:DiscretionaryItem","cmmn:PlanItem"])}},{45:45}],14:[function(e,t,n){t.exports={__depends__:[e(143)],__init__:["cmmnGlobalConnect"],cmmnGlobalConnect:["type",e(13)]}},{13:13,143:143}],15:[function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s,c,u,l){var p={selectElements:function(){var t=e.getRootElement(),n=i.filter(function(e){return e!=t});c.select(n)},spaceTool:function(){l.toggle()},lassoTool:function(){s.toggle()},handTool:function(){o.toggle()},globalConnectTool:function(){r.toggle()},directEditing:function(){var e=c.get();e.length&&t.activate(e[0])},find:function(){u.toggle()}};n.register(p),a.addListener(function(e,t){if(65===e&&a.isCmd(t))return n.trigger("selectElements"),!0;if(70===e&&a.isCmd(t))return n.trigger("find"),!0;if(!a.hasModifier(t))return 83===e?(n.trigger("spaceTool"),!0):76===e?(n.trigger("lassoTool"),!0):72===e?(n.trigger("handTool"),!0):67===e?(n.trigger("globalConnectTool"),!0):69===e?(n.trigger("directEditing"),!0):void 0})}i.$inject=["canvas","directEditing","editorActions","elementRegistry","globalConnect","handTool","keyboard","lassoTool","selection","searchPad","spaceTool"],t.exports=i},{}],16:[function(e,t,n){t.exports={__depends__:[e(145),e(149),e(153),e(217),e(90),e(14),e(63)],__init__:["cmmnKeyBindings"],cmmnKeyBindings:["type",e(15)]}},{14:14,145:145,149:149,15:15,153:153,217:217,63:63,90:90}],17:[function(e,t,n){"use strict";function i(e,t,n,i){this._canvas=t,this._commandStack=i,n.registerProvider(this),i.registerHandler("element.updateLabel",r),e.on("element.dblclick",function(e){n.activate(e.element)}),e.on(["element.mousedown","drag.init","canvas.viewbox.changed"],function(e){n.complete()}),e.on(["commandStack.changed"],function(){n.cancel()}),"ontouchstart"in document.documentElement||e.on("create.end",500,function(e){var t=e.shape;e.context.canExecute&&n.activate(t)})}var r=e(19),o=e(18),a=e(74).isCasePlanModel,s=e(74).is,c=e(74).getDefinition,u=e(408);i.$inject=["eventBus","canvas","directEditing","commandStack"],t.exports=i,i.prototype.activate=function(e){var t=o.getLabel(e);if(void 0!==t&&e.parent){var n=e.label||e,i=this.getEditingBBox(e),r=c(e),a={};return(s(r,"cmmn:Task")||s(r,"cmmn:Milestone"))&&(a.centerVertically=!0),s(e,"cmmn:TextAnnotation")&&(a.autoResize=!0,a.resizable=!0),n.labelTarget&&(a.autoResize=!0),u({text:t,options:a},i)}},i.prototype.getEditingBBox=function(e,t){var n=this._canvas,i=c(e),r=e.label||e,o=this._canvas.getAbsoluteBBox(r),u={x:o.x+o.width/2,y:o.y+o.height/2},l={x:o.x,y:o.y},p={},h=n.zoom();return a(e)&&(l.height=50,l.width=200,l.y-=30,p.textAlign="left"),s(i,"cmmn:PlanFragment")&&!a(e)&&(l.width=e.width,l.maxHeight=48,l.y+=5,p.textAlign="left"),(s(i,"cmmn:Task")||s(i,"cmmn:Milestone"))&&(h>1?(l.width=o.width,
l.height=o.height):(l.width=o.width/h,l.height=o.height/h),h<1&&(l.x=o.x-(l.width/2-o.width/2),l.y=o.y-(l.height/2-o.height/2))),s(e,"cmmn:TextAnnotation")&&(l.width=o.width,l.height=o.height,l.minWidth=30*h,l.minHeight=10*h,p.textAlign="left"),r.labelTarget&&(l.width=150,l.minHeight=20,l.x=u.x-l.width/2),{bounds:l,style:p}},i.prototype.update=function(e,t){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t})}},{18:18,19:19,408:408,74:74}],18:[function(e,t,n){"use strict";function i(e){return a(e,"cmmn:TextAnnotation")?"text":"name"}function r(e){var t=c(e);return a(t,"cmmndi:CMMNEdge")&&t.cmmnElementRef&&(t=t.cmmnElementRef),t}function o(e){return!s(e,["cmmn:Association","cmmn:Criterion","cmmndi:CMMNEdge"])}var a=e(74).is,s=e(45).isAny,c=e(74).getBusinessObject,u=function(e){return s(e,["cmmn:PlanItem","cmmn:DiscretionaryItem","cmmn:CaseFileItem"])},l=function(e){var t=r(e),n=i(t);if(o(t))return!t[n]&&u(e)&&(t=t.definitionRef),t[n]||""};t.exports.getLabel=l;var p=function(e,t,n,o){var a=r(e),s=i(a);return!a[s]&&u(e)&&o&&(a=a.definitionRef),a[s]=t,n&&(e.hidden=!t),e};t.exports.setLabel=p},{45:45,74:74}],19:[function(e,t,n){"use strict";function i(e){function t(e,t){var i=e.label||e,o=e.labelTarget||e;return r.setLabel(i,t,o!==i,n(e)),[i,o]}function n(t){var n=o(t);return!n||1===e.getReferences(n).length}function i(e){return e.oldLabel=r.getLabel(e.element),t(e.element,e.newLabel)}function a(e){return t(e.element,e.oldLabel)}this.execute=i,this.revert=a}var r=e(18),o=e(74).getDefinition;i.$inject=["itemRegistry"],t.exports=i},{18:18,74:74}],20:[function(e,t,n){t.exports={__depends__:[e(101),e(126),e(90)],__init__:["labelEditingProvider"],labelEditingProvider:["type",e(17)]}},{101:101,126:126,17:17,90:90}],21:[function(e,t,n){"use strict";function i(e){this._model=e}var r=e(283),o=e(408),a=e(414),s=e(45).isAny;i.$inject=["moddle"],i.prototype._needsId=function(e){return s(e,["cmmn:CMMNElement","cmmndi:CMMNShape","cmmndi:CMMNEdge","cmmndi:CMMNStyle","cmmndi:CMMNDiagram"])},i.prototype._ensureId=function(e){var t=(e.$type||"").replace(/^[^:]*:/g,"")+"_";!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},i.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},i.prototype.createDiLabel=function(){return this.create("cmmndi:CMMNLabel")},i.prototype.createDiShape=function(e,t,n){return this.create("cmmndi:CMMNShape",o({cmmnElementRef:e,bounds:this.createDiBounds(t),label:this.createDiLabel()},n))},i.prototype.createDiEdge=function(e,t,n){return this.create("cmmndi:CMMNEdge",o({cmmnElementRef:e,label:this.createDiLabel()},n))},i.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},i.prototype.createDiWaypoints=function(e){return r(e,function(e){return this.createDiWaypoint(e)},this)},i.prototype.createDiWaypoint=function(e){return this.create("dc:Point",a(e,["x","y"]))},i.prototype.createItem=function(e,t){var n=this.create(t);return this.create(e,{definitionRef:n})},i.prototype.createCriterion=function(e,t){return t=t||{},t.sentryRef||(t=o({sentryRef:this.createSentry()},t)),this.create(e,t)},i.prototype.createSentry=function(e){return this.create("cmmn:Sentry",e)},i.prototype.createCasePlanModel=function(){var e=this.create("cmmn:Stage");this._model.ids.unclaim(e.id),e.id=this._model.ids.nextPrefixed("CasePlanModel_",e);var t=this.create("cmmn:Case",{casePlanModel:e});return e.$parent=t,e},i.prototype.createCaseFileModel=function(e){var t=this.create("cmmn:CaseFile");return this._model.ids.unclaim(t.id),t.id=this._model.ids.nextPrefixed("CaseFileModel_",t),t.$parent=e,t},i.prototype.createCaseFileItem=function(e){return e=e||{},e.definitionRef||(e=o({definitionRef:this.create("cmmn:CaseFileItemDefinition")},e)),this.create("cmmn:CaseFileItem",e)},t.exports=i},{283:283,408:408,414:414,45:45}],22:[function(e,t,n){"use strict";function i(){}function r(e,t){return e?e.original||e:c(t)}var o=e(267),a=e(220),s=e(223),c=e(222).getMid;o(i,a),t.exports=i,i.prototype.layoutConnection=function(e,t){t=t||{};var n=e.source,i=e.target,o=e.waypoints,a=t.connectionStart,c=t.connectionEnd;return a||(a=r(o&&o[0],n)),c||(c=r(o&&o[o.length-1],i)),s.repairConnection(n,i,a,c,o,t)||[a,c]}},{220:220,222:222,223:223,267:267}],23:[function(e,t,n){"use strict";function i(e,t,n,i){function o(e){var t,n=e.context;n.cropped||(t=n.connection,t.waypoints=i.getCroppedWaypoints(t),n.cropped=!0)}function a(e){var t=e.context;y.updateParent(t.shape||t.connection,t.oldParent)}function s(e){var t=e.context,n=t.shape||t.connection,i=t.parent||t.newParent;y.updateParent(n,i)}function c(e){var t=e.context.shape;y.updateBounds(t)}function u(e){y.updateConnection(e.context)}function p(e){y.updateConnectionWaypoints(e.context.connection)}function d(e){y.updateAttachment(e.context)}function f(e){var t=e.context,i=t.shape,r=h(i);n.add(r)}function m(e){var t=e.context,i=t.shape;if(!g(i)){var r=h(i);n.remove(r)}}l.call(this,e),this._cmmnFactory=t,this._itemRegistry=n;var y=this;this.executed(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],o),this.reverted(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],function(e){delete e.context.cropped}),this.executed(["shape.create","shape.move","shape.delete","connection.delete","connection.create"],r(a)),this.reverted(["shape.create","shape.move","shape.delete","connection.delete","connection.create"],r(s)),this.executed(["shape.create","shape.move","shape.resize"],r(function(e){"label"!==e.context.shape.type&&c(e)})),this.reverted(["shape.create","shape.move","shape.resize"],r(function(e){"label"!==e.context.shape.type&&c(e)})),e.on("shape.changed",function(e){"label"===e.element.type&&c({context:{shape:e.element}})}),this.executed(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],r(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],r(u)),this.executed(["connection.create","connection.layout","connection.move","connection.reconnectStart","connection.reconnectEnd","connection.updateWaypoints"],r(p)),this.reverted(["connection.create","connection.layout","connection.move","connection.reconnectStart","connection.reconnectEnd","connection.updateWaypoints"],r(p)),this.executed(["element.updateAttachment"],r(d)),this.reverted(["element.updateAttachment"],r(d)),this.executed("shape.create",r(f)),this.reverted("shape.create",r(m)),this.executed("shape.delete",r(m)),this.reverted("shape.delete",r(f))}function r(e){return function(t){var n=t.context,i=n.shape||n.connection;(d(i,"cmmn:CMMNElement")||d(i,"cmmndi:CMMNDiagramElement"))&&e(t)}}function o(e){return m(e,"cmmn:Definitions")}function a(e){return!y(e,["cmmn:CaseFileItem","cmmn:Criterion","cmmn:DiscretionaryItem","cmmn:OnPart","cmmndi:CMMNEdge"])}function s(e){return e=e.businessObject||e,!(!e.cmmnElementRef||!d(e.cmmnElementRef,"cmmn:Association"))}var c=e(408),u=e(267),l=e(99),p=e(232),h=e(74).getBusinessObject,d=e(74).is,f=e(74).isCasePlanModel,m=e(45).getParent,g=e(45).isLabel,y=e(45).isAny;u(i,l),t.exports=i,i.$inject=["eventBus","cmmnFactory","itemRegistry","connectionDocking"],i.prototype.updateAttachment=function(e){var t=e.shape,n=h(t),i=t.host,r=i&&h(i);this.updateSemanticParent(n,r)},i.prototype.updateParent=function(e,t){if(!g(e)){var n=h(e),i=h(e.parent),r=n.di||n,o=i&&i.di;s(n)&&(n=n.cmmnElementRef),a(n)&&this.updateSemanticParent(n,i),d(i,"cmmndi:CMMNDiagram")&&(o=i),this.updateDiParent(r,o)}},i.prototype.updateSemanticParent=function(e,t){var n;if(e.$parent!==t){if(d(e,"cmmn:PlanItem")?(n="planItems",t&&!f(t)&&(t=t.definitionRef)):f(e)?(n="cases",e=e.$parent,t=t&&o(t)):d(e,"cmmn:EntryCriterion")?(f(t)&&(t=null),n="entryCriteria"):d(e,"cmmn:ExitCriterion")?n="exitCriteria":d(e,"cmmn:Artifact")&&(t=t&&o(t),n="artifacts"),!n)throw new Error("no parent for ",e,t);var i;e.$parent&&(i=e.$parent.get(n),p.remove(i,e)),t?(i=t.get(n),i.push(e),e.$parent=t):e.$parent=null}},i.prototype.updateDiParent=function(e,t){if(t&&!d(t,"cmmndi:CMMNDiagram")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("diagramElements");t?(n.push(e),e.$parent=t):(p.remove(n,e),e.$parent=null)}},i.prototype.updateBounds=function(e){var t=e.businessObject.di||e.businessObject,n=g(e)?this._getLabel(t).bounds:t.bounds;c(n,{x:e.x,y:e.y,width:e.width,height:e.height})},i.prototype.updateConnectionWaypoints=function(e){e.businessObject.set("waypoint",this._cmmnFactory.createDiWaypoints(e.waypoints))},i.prototype.updateConnection=function(e){var t,n,i,r,o=e.connection,a=h(o),s=h(o.source),c=h(o.target),u=a.cmmnElementRef;if(d(u,"cmmn:Association"))t=u,n=u,i="sourceRef",r="targetRef";else if(n=a,r="targetCMMNElementRef",d(u,"cmmn:OnPart")){t=u,i="sourceRef";var l;d(s,"cmmn:ExitCriterion")&&(l=s,s=m(l)),u.exitCriterionRef!==l&&(u.exitCriterionRef=l)}else t=a,i="sourceCMMNElementRef";i&&t[i]!==s&&(t[i]=s),r&&n[r]!==c&&(n[r]=c),this.updateConnectionWaypoints(o)},i.prototype._getLabel=function(e){return e.label||(e.label=this._cmmnFactory.createDiLabel()),e.label.bounds||(e.label.bounds=this._cmmnFactory.createDiBounds()),e.label}},{232:232,267:267,408:408,45:45,74:74,99:99}],24:[function(e,t,n){"use strict";function i(e,t){a.call(this),this._cmmnFactory=e,this._moddle=t}var r=e(408),o=e(267),a=e(103),s=e(73),c=e(74).is,u=e(74).getDefinition,l=e(74).isCasePlanModel,p=e(72).isCollapsed;o(i,a),i.$inject=["cmmnFactory","moddle"],t.exports=i,i.prototype.baseCreate=a.prototype.create,i.prototype.create=function(e,t){return"label"===e?this.baseCreate(e,r({type:"label"},s.DEFAULT_LABEL_SIZE,t)):"root"===e?this.baseCreate(e,t):this.createCmmnElement(e,t)},i.prototype.createCmmnElement=function(e,t){var n;t=t||{};var i=t.businessObject;if(!i){if(!t.type)throw new Error("no shape type specified");var o={};t.name&&r(o,{name:t.name}),i=this._cmmnFactory.create(t.type,o)}if("connection"===e&&(c(i,"cmmndi:CMMNEdge")||(i=this._cmmnFactory.createDiEdge(i,[],{id:i.id+"_di"})),i.label||(i.label=this._cmmnFactory.createDiLabel()),t.type="cmmndi:CMMNEdge"),t.definitionType){var a=this._cmmnFactory.create(t.definitionType);i.definitionRef=a}return t.sentryRef&&(i.sentryRef=t.sentryRef),"shape"!==e||i.di||(i.di=this._cmmnFactory.createDiShape(i,{},{id:i.id+"_di"})),t.isCollapsed&&(i.di.isCollapsed=t.isCollapsed),t.isPlanningTableCollapsed&&(i.di.isPlanningTableCollapsed=t.isPlanningTableCollapsed),t.isStandardEventVisible&&(i.isStandardEventVisible=t.isStandardEventVisible),void 0!==t.isBlocking&&(i.definitionRef.isBlocking=t.isBlocking),t.autoComplete&&(i.definitionRef.autoComplete=!0),n=this._getDefaultSize(i),t=r({businessObject:i,id:i.id},n,t),this.baseCreate(e,t)},i.prototype._getDefaultSize=function(e){var t=u(e);return l(e)?{width:400,height:250}:c(t,"cmmn:PlanFragment")?p(e)?{width:100,height:80}:{width:350,height:200}:c(t,"cmmn:Milestone")?{width:100,height:40}:c(t,"cmmn:EventListener")?{width:36,height:36}:c(e,"cmmn:Criterion")?{width:20,height:28}:c(e,"cmmn:TextAnnotation")?{width:100,height:30}:c(e,"cmmn:CaseFileItem")?{width:36,height:50}:{width:100,height:80}},i.prototype.createPlanItemShape=function(e){return this.createShape({type:"cmmn:PlanItem",businessObject:this._cmmnFactory.createItem("cmmn:PlanItem",e)})},i.prototype.createDiscretionaryItemShape=function(e){return this.createShape({type:"cmmn:DiscretionaryItem",businessObject:this._cmmnFactory.createItem("cmmn:DiscretionaryItem",e)})},i.prototype.createCasePlanModelShape=function(){return this.createShape({type:"cmmn:Stage",businessObject:this._cmmnFactory.createCasePlanModel()})},i.prototype.createCriterionShape=function(e){return this.createShape({type:e,businessObject:this._cmmnFactory.createCriterion(e)})},i.prototype.createCaseFileItemShape=function(){return this.createShape({type:"cmmn:CaseFileItem",businessObject:this._cmmnFactory.createCaseFileItem()})}},{103:103,267:267,408:408,72:72,73:73,74:74}],25:[function(e,t,n){"use strict";function i(e,t,n,i,r){a.call(this,e,t,n),this._cmmnRules=i,this._rules=r}var r=e(267),o=e(408),a=e(154),s=e(37),c=e(39),u=e(40),l=e(42),p=e(43),h=e(41),d=e(38);r(i,a),i.$inject=["eventBus","elementFactory","commandStack","cmmnRules","rules"],t.exports=i,i.prototype.getHandlers=function(){var e=a.prototype.getHandlers.call(this);return e["shape.append"]=s,e["shape.replace"]=u,e["connection.reconnectStart"]=c,e["connection.reconnectEnd"]=c,e["element.updateProperties"]=l,e["element.updateSemanticParent"]=p,e["element.updateControls"]=h,e["id.updateClaim"]=d,e},i.prototype.connect=function(e,t,n){var i=this._rules;return n||(n=i.allowed("connection.create",{source:e,target:t})||{type:"cmmn:Association"}),n.reverse?this.createConnection(t,e,n,t.parent):this.createConnection(e,t,n,e.parent)},i.prototype.createConnection=function(e,t,n,i,r){"object"==typeof n&&(r=i,i=n,n=void 0);var a={source:e,target:t,parent:r,parentIndex:n,canExecute:i};return i=this._create("connection",i),o(a,{connection:i}),this._commandStack.execute("connection.create",a),a.connection},i.prototype.reconnectStart=function(e,t,n,i){var r={connection:e,newSource:t,dockingOrPoints:n,hints:i||{}};this._commandStack.execute("connection.reconnectStart",r)},i.prototype.reconnectEnd=function(e,t,n,i){var r={connection:e,newTarget:t,dockingOrPoints:n,hints:i||{}};this._commandStack.execute("connection.reconnectEnd",r)},i.prototype.updateProperties=function(e,t,n){this._commandStack.execute("element.updateProperties",{element:e,properties:t,shape:n})},i.prototype.updateSemanticParent=function(e,t,n,i){this._commandStack.execute("element.updateSemanticParent",{element:e,newParent:t,containment:n,shape:i})},i.prototype.updateControls=function(e,t){this._commandStack.execute("element.updateControls",{element:e,values:t})},i.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},i.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})}},{154:154,267:267,37:37,38:38,39:39,40:40,408:408,41:41,42:42,43:43}],26:[function(e,t,n){"use strict";function i(e){o.call(this,e),this.preExecute(["shape.create","elements.move"],function(e){var t=e.shape,n=e.shapes,i=e.parent||e.newParent,r=e.host||e.newHost;i&&r&&c(r)&&(n&&n.length>1||(t=t||n[0],s(t,"cmmn:Criterion")&&(e.parent=e.parent&&r,e.newParent=e.newParent&&r)))},!0)}var r=e(267),o=e(99),a=e(74),s=a.is,c=a.isCasePlanModel;i.$inject=["eventBus"],r(i,o),t.exports=i},{267:267,74:74,99:99}],27:[function(e,t,n){"use strict";function i(e,t,n,i){function u(e){var t=x(e),r=t.caseFileModel;return r||(r=n.createCaseFileModel(t),i.updateProperties(t,{caseFileModel:r})),r}function d(e){var t=e&&e.get(C);if(t&&!t.length){var n="caseFileModel",r=e.$parent;a(e)||(n="children");var o={};o[n]=void 0,i.updateProperties(r,o),i.updateSemanticParent(e)}}function f(e){e=g(e);var t=e.sourceRef;t&&(y(t,function(t){return e===t}),i.updateProperties(e,{sourceRef:void 0}))}function y(e,t){e=g(e);var n,r=e&&e.get("targetRefs");r&&r.length&&(n=r.slice(),p(r,function(r){if(!t||t(r)){r.sourceRef===e&&i.updateProperties(r,{sourceRef:void 0});var o=n.indexOf(r);-1!==o&&n.splice(o,1)}}),r.length!==n.length&&i.updateProperties(e,{targetRefs:n}))}function v(e,t,n){e=g(e);var r=e.children,o=r&&r.get(C);o&&o.length&&(p(o,function(e){(!n||n(e))&&i.updateSemanticParent(e,t,C)}),d(r))}function E(e){var n=m(e);return n&&1===t.getReferences(n).length}this._cmmnFactory=n,this._modeling=i,l.call(this,e);var C="caseFileItems";this.preExecuted("shape.create",function(e){var t,n,a,s=e.shape,c=e.parent,l=g(c);o(s)&&(n=m(s),n&&(t=r(l),i.updateSemanticParent(n,t,"caseFileItemDefinitions")),a=u(c),i.updateSemanticParent(s,a,C))},!0),this.preExecuted("elements.move",function(e){var t,n=e.newParent,r=e.hints,l=r&&r.primaryShape&&r.primaryShape.parent,m=e.closure||{},x=m.allShapes;n&&l!==n&&(x=h(x,function(e){return o(e)&&!w(e)&&!b(e.parent,n)}))&&x.length&&(t=u(n),x=s(x),p(x,function(e){var n=g(e),r=c(n),o=_(n);if(a(o))i.updateSemanticParent(e,t,C);else{var s=_(n,"cmmn:CaseFileItem");x[s.id]||i.updateSemanticParent(e,t,C)}var u=n.sourceRef;u&&!x[u.id]&&f(n),y(n,function(e){return!x[e.id]}),v(n,r,function(e){return!x[e.id]}),d(o)}))},!0),this.postExecuted("shape.delete",function(e){var t,n=e.shape,r=g(n);if(o(n)&&!w(n)){var a=_(r),s=c(r);i.updateSemanticParent(n,null,C),f(n),y(n),v(r,s),d(a),E(n)&&(t=m(n),i.updateSemanticParent(t,null,"caseFileItemDefinitions"))}},!0)}function r(e){return _(e,"cmmn:Definitions")}function o(e){return y(e,"cmmn:CaseFileItem")}function a(e){return y(e,"cmmn:CaseFile")}function s(e){return d(e,function(e,t){return e[t.id]=t,e},{})}function c(e){return _(g(e),"cmmn:CaseFile")}var u=e(267),l=e(99),p=e(281),h=e(279),d=e(284),f=e(74),m=f.getDefinition,g=f.getBusinessObject,y=f.is,v=e(45),x=v.getCase,_=v.getParent,b=v.isSameCase,w=v.isLabel;i.$inject=["eventBus","itemRegistry","cmmnFactory","modeling"],u(i,l),t.exports=i},{267:267,279:279,281:281,284:284,45:45,74:74,99:99}],28:[function(e,t,n){"use strict";function i(e,t,n){g.call(this,e),this.postExecuted(["shape.create","connection.create"],200,function(e){var n,i=e.context,r=i.shape||i.connection,o=r.businessObject;h(o)&&(n=d(r),t.createLabel(r,n,{id:o.id+"_label",hidden:!p(r)&&!f(o),businessObject:o}))}),this.postExecute(["connection.updateWaypoints"],function(e){var n=e.context,i=n.connection,r=i.label;if(r&&r.hidden){var o=d(i),a={x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2};t.moveShape(r,a)}}),this.postExecute(["shape.replace"],function(e){var t=e.context,n=t.newShape,i=t.oldShape,r=l(n);r&&h(r)&&(n.label.x=i.label.x,n.label.y=i.label.y)}),this.executed(["label.create"],function(e){var t,i,o=e.context.shape;o.labelTarget&&m(o.labelTarget||o,["cmmn:CMMNElement","cmmndi:CMMNDiagramElement"])&&(t=o.businessObject,i=t.di||t,i.label||(i.label=n.createDiLabel()),i.label.bounds||(i.label.bounds=n.createDiBounds()),r(i.label.bounds,{x:o.x,y:o.y,width:o.width,height:o.height}))})}var r=e(408),o=e(267),a=e(73),s=e(74),c=e(72),u=e(45),l=s.getBusinessObject,p=s.getName,h=a.hasExternalLabel,d=a.getExternalLabelMid,f=c.isStandardEventVisible,m=u.isAny,g=e(99);o(i,g),i.$inject=["eventBus","modeling","cmmnFactory"],t.exports=i},{267:267,408:408,45:45,72:72,73:73,74:74,99:99}],29:[function(e,t,n){"use strict";function i(e,t,n,i){function a(e,t){function n(e){a[e.id]=e}function r(e){return!!a[e.id]}function o(e,s){l(e,function(e){if(!r(e)){n(e),e=i.getShape(e.id)||e;var c=t(e);c&&c.length&&o(c)}s&&(a={})})}var a={};o(e,!0)}this._modeling=t,this._cmmnReplace=n,this._itemRegistry=i;var u=this;f.call(this,e);this.postExecuted("shape.create",function(e){var n=e.shape;if(P(n)){var i=v(n),r=y(i),a=o(i);b(r)||t.updateSemanticParent(r,a,"planItemDefinitions")}},!0),this.postExecuted("shape.replace",function(e){var t=e.newShape;P(t)&&u.updatePlanItemDefinitions([t])},!0),this.postExecuted("shape.delete",function(e){var t,n=e.shape,i={};P(n)&&!E(n)&&(t=y(n),i[t.id]=t,u.deletePlanItemDefinitions(i))},!0),this.preExecuted("shape.delete",function(e){var t=e.shape,n=y(t);R(n)&&!n.$parent&&(e.discretionaryItems=e.discretionaryItems||S(n))},!0),this.postExecuted("shape.delete",T,function(e){var t=e.discretionaryItems,n=[];l(t,function(e){var t=i.getShape(e.id);t&&n.push(t)}),n&&n.length&&u.updatePlanItemDefinitions(n)},!0),this.preExecuted("elements.move",function(e){var r,o,a=e.closure.allShapes,s=e.newParent,c=e.hints,u=c&&c.primaryShape&&c.primaryShape.parent,p={},h={};s&&u!==s&&(o=w(s),r=d(a,function(e){if(P(e)&&!E(e)&&w(e)!==o){var t=y(e);return h[t.id]=h[t.id]||[],h[t.id].push(e),!0}return!1}),l(r,function(e){var r,o,a,s=y(e);p[s.id]?a=p[s.id]:(r=i.getReferences(s.id),o=h[s.id],r.length>o.length&&(a=p[s.id]=n.replacePlanItemDefinition(s))),a&&a!==s&&t.updateProperties(e,{definitionRef:a})}),e.definitionReplacements=p)},!0),this.postExecuted("elements.move",T,function(e){var t=e.shapes,n=e.newParent,i=e.hints&&e.hints.oldParent;n&&i!==n&&(t=d(t,function(e){return P(e)&&!E(e)}))&&t.length&&u.updatePlanItemDefinitions(t)},!0),this.postExecuted(["connection.create","connection.delete","connection.reconnectEnd","connection.reconnectStart"],T,function(e){var t=e.connection,n=e.newSource||e.source||t.source,i=e.newTarget||e.target||t.target,r=[];c(t,n,i)&&(t.target&&r.push(t.target),!t.target&&e.target&&r.push(e.target),e.oldTarget&&r.push(e.oldTarget),r&&r.length&&u.updatePlanItemDefinitions(r))},!0),this.deletePlanItemDefinitions=function(e){var n;l(e,function(e){n=i.getReferences(e),n.length||t.updateSemanticParent(e,null,"planItemDefinitions")})},this.updatePlanItemDefinitions=function(e){a(e,function(e){var n=v(e),o=y(n),a=i.getReferences(o),c=r(a);c||(c=s(n)),c&&c!==o.$parent&&t.updateSemanticParent(o,c,"planItemDefinitions");var u=M(o),p=[];return g(o,"cmmn:PlanFragment")&&e.children&&e.children.length&&l(e.children,function(e){var t=v(e);P(t)&&!E(t)&&-1===u.indexOf(t)&&p.push(t)}),h(u,p)})}}function r(e){var t,n;if(e.length)if(n=e.splice(0,1)[0],e.length){var i=a(n);l(e,function(e){i=p(i,a(e))}),t=i[0]}else t=o(n);return t}function o(e){return e=v(e),b(e,"cmmn:Stage")}function a(e){return e=v(e),_(e,"cmmn:Stage")}function s(e){var t=b(e,"cmmn:Case");return t&&t.casePlanModel}function c(e,t,n){return!e.businessObject.cmmnElementRef}var u=e(267),l=e(281),p=e(270),h=e(272),d=e(279),f=e(99),m=e(74),g=m.is,y=m.getDefinition,v=m.getBusinessObject,x=e(45),_=x.getParents,b=x.getParent,w=x.getCase,E=x.isLabel,C=e(46),S=C.getAllDiscretionaryItems,M=C.getDirectItemCapables,P=C.isItemCapable,R=C.isHumanTask,T=400;i.$inject=["eventBus","modeling","cmmnReplace","itemRegistry"],u(i,f),t.exports=i},{267:267,270:270,272:272,279:279,281:281,45:45,46:46,74:74,99:99}],30:[function(e,t,n){"use strict";function i(e,t,n,i){function o(e,t){return u(e.incoming,function(e){return e!==t&&s(e)})}function s(e){return!e.businessObject.cmmnElementRef}this._cmmnFactory=t,this._modeling=n,this._itemRegistry=i;var p=this;c.call(this,e);this.preExecuted(["connection.delete","connection.reconnectEnd","connection.reconnectStart"],function(e){var t=e.context,i="connection.reconnectStart"===e.command,c=t.connection,u=c.target;if(s(c)){if(i){if(!t.newSource||!t.newTarget)return;u=t.newSource,t.oldPlanningTable=a(u)}if(t.planningTable=a(u),u!==t.newTarget&&!o(u,c)){var l=r(u.parent),h=p.createPlanningTable(l);n.updateSemanticParent(u,h,"tableItems")}}}),this.postExecuted("connection.delete",function(e){s(e.connection)&&p.deletePlanningTable(e.planningTable)},!0),this.postExecuted("connection.reconnectEnd",function(e){var t=e.connection,i=t.target;if(s(t)){var r=a(i);n.updateSemanticParent(i,e.planningTable,"tableItems"),p.deletePlanningTable(r)}},!0),this.postExecuted("connection.reconnectStart",function(e){s(e.connection)&&e.newSource&&e.newTarget&&p.deletePlanningTable(e.oldPlanningTable)},!0),this.preExecuted(["connection.create","connection.reconnectStart"],function(e){var t=e.connection,i=e.newSource||e.source,r=e.target||e.newTarget||t.target;if(s(t)){e.planningTable=a(r);var o=f(i);if(t.source){if(f(t.source)===o)return}var c=p.createPlanningTable(o);n.updateSemanticParent(r,c,"tableItems")}},!0),this.postExecuted(["connection.create","connection.reconnectStart"],function(e){s(e.connection)&&p.deletePlanningTable(e.planningTable)},!0),this.preExecuted("elements.move",500,function(e){function r(e){var n=t.create("cmmn:PlanningTable",{applicabilityRules:e.applicabilityRules}),i=x.push(e);return _[i-1]=n,n}var o=e.closure.allShapes,s=e.newParent,c=e.hints,d=c&&c.primaryShape&&c.primaryShape.parent,f=e.definitionReplacements,x=[],_={};s&&d!==s&&l(o,function(e){var t,s,c,d,w,C=m(e),S=[];if(b(e)&&!y(e)&&(t=g(C,"cmmn:PlanItemDefinition"),h(t,"cmmn:HumanTask")&&(s=f[t.id])&&-1===(E(s)||[]).indexOf(C))){c=E(t);if(!u(c,function(e){return!o[e.id]})){var M=t.planningTable;return n.updateProperties(s,{planningTable:M},i.getShapes(s)),n.updateSemanticParent(M,s),void n.updateProperties(t,{planningTable:void 0},i.getShapes(t))}if((d=v(C,"cmmn:PlanningTable"))&&d.length){l(d,function(e){var t,i=x.indexOf(e);t=-1===i?r(e):_[i],w&&!w.$parent&&n.updateSemanticParent(w,t,"tableItems"),w=t,S.push(t)}),s.planningTable||(n.updateProperties(s,{planningTable:w},i.getShapes(s)),n.updateSemanticParent(w,s));var P=S.splice(0,1)[0],R=a(C);n.updateSemanticParent(C,P,"tableItems"),p.deletePlanningTable(R)}}})},!0),this.preExecuted(["shape.create","shape.move"],function(e){var t=e.shape;if(b(t)&&!y(t)&&!_(t)){e.planningTable=a(t);var i=e.parent||e.newParent;if(i){var o=r(i),s=p.createPlanningTable(o);n.updateSemanticParent(t,s,"tableItems")}}},!0),this.postExecuted("shape.move",function(e){var t=e.shape;b(t)&&!y(t)&&(_(t)||p.deletePlanningTable(e.planningTable))},!0),this.preExecuted("shape.delete",function(e){var t=e.shape;b(t)&&!y(t)&&(e.planningTable=a(t),n.updateSemanticParent(t,null,"tableItems"))},!0),this.postExecuted("shape.delete",function(e){var t=e.shape;b(t)&&!y(t)&&p.deletePlanningTable(e.planningTable)},!0),this.postExecuted("shape.delete",500,function(e){var t=e.shape,o=f(t);if(C(o)&&!o.$parent){var a=E(o);l(a,function(e){var t=i.getShape(e.id);if(t){var o=r(t.parent),a=p.createPlanningTable(o);n.updateSemanticParent(t,a,"tableItems")}}),o.planningTable&&p.deletePlanningTable(o.planningTable)}},!0),this.createPlanningTable=function(e){var t=e.planningTable;if(!t){t=p._cmmnFactory.create("cmmn:PlanningTable");var r=i.getShapes(e);n.updateProperties(e,{planningTable:t},r),n.updateSemanticParent(t,e)}return t},this.deletePlanningTable=function(e){if(!(e.get("tableItems").length>0)){for(var t=e.$parent;h(t,"cmmn:PlanningTable")&&!e.get("tableItems").length;)n.updateSemanticParent(e,null,"tableItems"),e=t,t=t.$parent;if(h(t,"cmmn:PlanItemDefinition")&&e&&!e.get("tableItems").length){var r=g(e,"cmmn:PlanItemDefinition"),o=i.getShapes(r);n.updateProperties(r,{planningTable:void 0},o),n.updateSemanticParent(e,null,null)}}}}function r(e){var t=o(e);return f(t)||m(t)}function o(e){if(e&&!d(e)){var t=f(e);w(t)&&(e=g(e,["cmmn:Stage","cmmn:PlanItem","cmmn:DiscretionaryItem"]),e=o(e))}return e}function a(e){return e=m(e),g(e,"cmmn:PlanningTable")}var s=e(267),c=e(99),u=e(277),l=e(281),p=e(74),h=p.is,d=p.isCasePlanModel,f=p.getDefinition,m=p.getBusinessObject,g=e(45).getParent,y=e(45).isLabel,v=e(45).getParents,x=e(46),_=x.isDiscretionaryToHumanTask,b=x.isDiscretionaryItem,w=x.isPlanFragment,E=x.getAllDiscretionaryItems,C=x.isHumanTask;i.$inject=["eventBus","cmmnFactory","modeling","itemRegistry"],s(i,c),t.exports=i},{267:267,277:277,281:281,45:45,46:46,74:74,99:99}],31:[function(e,t,n){"use strict";function i(e,t,n,i,u){function g(e,t){return n.canConnectPlanItemOnPartConnection(e,t)}function y(e,t){return n.canConnectCaseFileItemOnPartConnection(e,t)}function v(e,t,i){return n.canConnectDiscretionaryConnection(e,t,i)}function x(e,t){return n.canConnectAssociation(e,t)}function _(e,t){return u.allowed(e,t)}function b(e,n,a,c){var u=e.parent;if(c=c||{},n=n||e.source,a=a||e.target,u){var p,h,f=o(e);if(f?(d(f,"cmmn:PlanItemOnPart")&&(g(n,a)||(p=!0),y(n,a)&&(h={type:"cmmn:CaseFileItemOnPart",name:f.name,isStandardEventVisible:r(e)}),v(n,a,e)&&(h={type:"cmmndi:CMMNEdge"})),d(f,"cmmn:CaseFileItemOnPart")&&(y(n,a)||(p=!0),g(n,a)&&(h={type:"cmmn:PlanItemOnPart",name:f.name,isStandardEventVisible:r(e)})),d(f,"cmmn:Association")&&!x(n,a)&&(p=!0)):(v(n,a,e)||(p=!0),g(n,a)&&(h={type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0})),p&&(h||!s(n)&&!s(a)||(h={type:"cmmn:Association"}),t.removeConnection(e)),h){var m=l({waypoints:e.waypoints.slice()},h),_=t.connect(n,a,m);return!1!==c.select&&i.select(_),_}}}h.call(this,e),this.postExecuted("elements.move",f,function(e){var t=e.closure,n=t.allConnections;c(n,function(e){b(e,null,null,{select:!1})})},!0),this.preExecute(["connection.reconnectEnd","connection.reconnectStart"],m+f,function(e){var t=e.command,n="connection.reconnectStart"===t,i=e.context,r=i.connection,o=i.newSource||r.source,a=i.newTarget||r.target,s=i.dockingOrPoints,c=i.canExecute;if(!i.hints||!i.hints.nested){if(void 0===c){var u={connection:r};u[n?"hover":"source"]=o,u[n?"target":"hover"]=a,c=_(t,u)}if(c&&c.reverse){if(!p(s)){var l=r.waypoints.slice();l.splice(n?0:-1,1,s),s=l}i.newSource=a,i.newTarget=o,i.dockingOrPoints=s.reverse()}}}),this.preExecute(["connection.reconnectStart","connection.reconnectEnd"],m,function(e){var t=e.connection,n=e.newSource||t.source,i=e.newTarget||t.target,r=e.hints||{};e.connection=b(t,n,i,{select:!r.nested})||t},!0),this.postExecuted("shape.replace",function(e){var n=e.newShape,i=n.businessObject,r=a(n);c(r,function(e){var n=e.source,r=e.target,a=o(e);d(a,"cmmn:PlanItemOnPart")&&(g(n,r)?t.updateProperties(a,{sourceRef:i},e):t.removeConnection(e))})},!0),this.postExecuted("element.updateProperties",function(e){var t=e.properties,n=e.changed;t&&!1===t.isBlocking&&c(n,function(e){var t=e.outgoing;c(t,function(e){b(e,null,null,{select:!1})})})},!0)}function r(e){return e.businessObject.isStandardEventVisible}function o(e){return e.businessObject&&e.businessObject.cmmnElementRef}function a(e){var t=e.attachers,n=[];return c(t,function(e){c(e.outgoing,function(e){n.push(e)})}),n}function s(e){return d(e,"cmmn:TextAnnotation")}var c=e(281),u=e(267),l=e(408),p=e(399),h=e(99),d=e(74).is,f=200,m=5e3;u(i,h),i.$inject=["eventBus","modeling","cmmnRules","selection","rules"],t.exports=i},{267:267,281:281,399:399,408:408,74:74,99:99}],32:[function(e,t,n){"use strict";function i(e,t,n,i,o,c,v,x){function _(e,t){return x.allowed("connection.create",{source:e,target:t})}function b(e,t){return x.allowed(e,t)}a.call(this,o),this._cmmnReplace=e,this._cmmnRules=t,this._elementFactory=n,this._elementRegistry=i,this._modeling=c,this._selection=v,this._rules=x;var w=this;this.preExecute(["shape.create","shape.append"],m,function(e){var i=e.shape,o=e.source,a=e.parent||e.target||o&&o.parent,s=e.host,c=e.position;if(!(e.hints||{}).nested&&(s&&r(i)&&(a=s),!t.canCreate(i,a,o,c))){var u=t.canReplace([i],a,c,o);if(u&&u.replacements){var h=u.replacements[0],d=l(i),m=p(i),g=h.newElementType,y=h.newDefinitionType||d&&d.$type,v=f({},{type:g});y&&f(v,{definitionType:y}),m&&f(v,{sentryRef:m}),e.shape=n.createShape(v)}}},!0),this.postExecuted("elements.move",g,function(e){var n=e.newParent,i=e.newHost,o=e.shapes.slice();if(1===o.length&&i?n=i:o=d(o,function(e){return!r(e)}),n&&!t.canMove(o,n)){var a=t.canReplace(o,n);a&&a.replacements&&w.replaceElements(o,a.replacements)}},!0),this.postExecuted(["shape.replace"],1500,function(e){var t=e.context,n=t.oldShape,i=t.newShape;c.unclaimId(n.businessObject.id,n.businessObject),c.updateProperties(i,{id:n.id})}),this.preExecute("connection.create",m,function(e){var t=e.source,n=e.target,i=e.canExecute||_(t,n);if(i&&i.replacements){var r=w.replaceElements([t,n],i.replacements,{select:!1});e.source=r[t.id]||e.source,e.target=r[n.id]||e.target,f(i,{replacedBy:i.reverse?e.source:e.target})}},!0),o.on("connect.end",g+y,function(e){var t=e.context.canExecute,n=t&&t.replacedBy;n&&(e.context.target=n)}),this.preExecute(["connection.reconnectStart","connection.reconnectEnd"],m,function(e){var t,n=e.command,i="connection.reconnectStart"===n,r=e.context,o=r.connection,a=r.newSource||o.source,s=r.newTarget||o.target,c={connection:o};if(!r.hints||!r.hints.nested){if(c[i?"hover":"source"]=a,c[i?"target":"hover"]=s,(t=b(n,c))&&t.replacements){var u=w.replaceElements([a,s],t.replacements,{select:!1});r.newSource=u[a.id]||r.newSource,r.newTarget=u[s.id]||r.newTarget}r.canExecute=t}}),this.preExecute("shape.delete",m,function(e){var t=e.shape,n=r(t)?t.host:t.parent,i=l(n);u(i,"cmmn:Stage")||s(t.incoming,function(e){c.removeConnection(e,{nested:!0,endChanged:!0})})},!0),this.postExecuted(["connection.delete","connection.reconnectEnd"],g,function(e){var n=e.target||e.oldTarget,i=[n],o=r(n)?n.host:n.parent;if(!(e.hints||{}).endChanged&&o&&!t.canMove(i,o)){var a=t.canReplace(i,o)
;a&&a.replacements&&w.replaceElements(i,a.replacements,{select:!1})}},!0),this.postExecuted("element.updateProperties",function(e){var n=e.properties,i=e.changed;n&&!1===n.isBlocking&&h(i,function(e){var n=e.attachers,i=t.canReplace(n,e);i&&w.replaceElements(n,i.replacements,{select:!1})})},!0),this.replaceElements=function(e,t,n){var i=this,r=this._elementRegistry,o=this._selection,a={};return n=n||{},h(t,function(t){var n,o=r.get(t.oldElementId),s=e.indexOf(o);o&&(n=i.replaceElement(o,t),-1!==s&&(e[s]=n),a[o.id]=n)}),t&&!1!==n.select&&o.select(e),a},this.replaceElement=function(e,t){var n=this._cmmnReplace,i=l(e),r=t.newDefinitionType||i&&i.$type;if(e){var o={type:t.newElementType};return r&&f(o,{definitionType:r}),n.replaceElement(e,o,{select:!1})}}}function r(e){return u(e,"cmmn:Criterion")}var o=e(267),a=e(99),s=e(245).saveClear,c=e(74),u=c.is,l=c.getDefinition,p=c.getSentry,h=e(281),d=e(279),f=e(408),m=6e3,g=500,y=100;i.$inject=["cmmnReplace","cmmnRules","elementFactory","elementRegistry","eventBus","modeling","selection","rules"],o(i,a),t.exports=i},{245:245,267:267,279:279,281:281,408:408,74:74,99:99}],33:[function(e,t,n){"use strict";function i(e){var t,n,i=e.shape,o=e.direction;return t=e.minDimensions||{width:m,height:m},n=r(i,e.childrenBoxPadding),h.getMinResizeBounds(o,i,t,n)}function r(e,t){var n=p(e.children,function(t){return o(e,t)});if(n.length)return h.addPadding(d(n),t)}function o(e,t){if(t.waypoints)return!1;if("label"===t.type)return!1;if(c(t,"cmmn:ExitCriterion")){var n=u(e),i=n.get("exitCriteria"),r=u(t);if(i.indexOf(r)>=0)return!1}return!0}function a(e,t){e.on("resize.start",f,function(e){var t=e.context,n=t.shape;l(n)&&(t.minBounds=i(t))})}var s=e(74),c=s.is,u=s.getBusinessObject,l=s.isCasePlanModel,p=e(279),h=e(200),d=e(235).getBBox,f=1001,m=10;a.$inject=["eventBus","modeling"],t.exports=a},{200:200,235:235,279:279,74:74}],34:[function(e,t,n){"use strict";function i(e,t,n,i,h){function g(e){var t=o(e);return y(e,function(e){var n=C(e);if(A(n)){var i=T(e);return i&&i.length&&(t=t.concat(o(i))),i}return k(e)}),m(t)}function y(e,t){function i(e){a[e.id]=e}function r(e){return!!a[e.id]}function o(e,s){f(e,function(e){if(!r(e)){i(e),e=n.getShape(e.id)||e;var c=t(e);c&&c.length&&o(c)}s&&(a={})})}var a={};o(e,!0)}function x(e){var t=h.createSentry();return b(e,t),t}function b(e,n){t.updateProperties(e,{sentryRef:n})}function S(e,n){t.updateProperties(e,{cmmnElementRef:n})}function P(e){var t={name:e.name,sourceRef:e.sourceRef,standardEvent:e.standardEvent};return _(e,"cmmn:PlanItemOnPart")&&(t.exitCriterionRef=e.exitCriterionRef),h.create(e.$type,t)}function R(e){var t=e.businessObject.cmmnElementRef;return _(t,"cmmn:OnPart")}function j(e,t,n){return!e.businessObject.cmmnElementRef}var N=this;d.call(this,e);this.postExecuted("connection.create",function(e){var n=e.connection;if(R(n)){var i=u(n),o=n.target,a=o.host,s=w(o);s||(s=x(o),t.updateSemanticParent(s,r(a),"sentries")),t.updateSemanticParent(i,s,"onParts",n)}},!0),this.preExecuted("connection.delete",function(e){var n=e.connection;if(R(n)){var i=n.source,r=u(n);c(i,n)&&(r=P(r),S(n,r)),t.updateSemanticParent(r,null,"onParts",n)}},!0),this.preExecuted("connection.reconnectStart",function(e){var n=e.connection,i=n.source;if(R(n)){var r=u(n),o=n.target,a=w(o);c(i,n)&&(r=P(r),S(n,r),t.updateSemanticParent(r,a,"onParts",n))}},!0),this.preExecuted("connection.reconnectEnd",function(e){var n=e.connection,i=n.source;if(R(n)){var o=u(n),a=n.target,s=w(a),l=e.newTarget,p=w(l);s!==p&&(p||(p=x(l),t.updateSemanticParent(p,r(l.host),"sentries")),c(i,n)&&(o=P(o),S(n,o)),t.updateSemanticParent(o,p,"onParts",n))}},!0),this.postExecuted(["connection.create","connection.reconnectStart"],function(e){var n=e.connection;if(R(n)){var i,r=u(n);l(n)||(i=p(n),t.updateProperties(r,{standardEvent:i},n))}},!0),this.postExecuted("element.updateAttachment",function(e){var t=e.shape;s(t)&&(t.host?N.updateSentriesSemanticParent([t]):N.deleteSentry(t))},!0),this.preExecuted("shape.delete",function(e){var t=C(e.shape);A(t)&&(e.discretionaryItems=e.discretionaryItems||T(t))},!0),this.postExecuted("shape.delete",I,function(e){var t,n=e.discretionaryItems;(t=g(n))&&t.length&&N.updateSentriesSemanticParent(t)},!0),this.postExecuted(["connection.create","connection.delete","connection.reconnectEnd","connection.reconnectStart"],I,function(e){var t,n=e.connection,i=e.newSource||e.source||n.source,r=e.newTarget||e.target||n.target,o=[];j(n,i,r)&&(n.target&&o.push(n.target),!n.target&&e.target&&o.push(e.target),e.oldTarget&&o.push(e.oldTarget),(t=g(o))&&t.length&&N.updateSentriesSemanticParent(t))},!0),this.postExecuted("elements.move",I,function(e){var t,n=e.shapes,i=e.newParent,r=e.hints&&e.hints.oldParent;r!==i&&(t=g(n))&&t.length&&N.updateSentriesSemanticParent(t)},!0),this.deleteSentry=function(e){var i,r=w(e);r&&(i=n.getReferences(r),i.length<=1&&t.updateSemanticParent(r,null,"sentries"))},this.updateSentriesSemanticParent=function(e){function o(e){return!!p[e.id]}function s(e,t){p[e.id]=t}function c(e){return p[e.id]||e}function u(e,t){var i=n.getReferences(e),o=l[e.id]||[];return n.getReferences(e).length>o.length&&(!t||v(i,function(e){var i=n.getShape(e);return i&&t!==r(i.host)}))}var l=a(e),p={};y(e,function(e){var n=w(e);if(n){var a=r(e.host);if(!a){var l=M(E(e));a=l&&r(l)}if(n.$parent===a)return;if(!o(n)&&u(n,a)){var p=i.replaceSentry(n);s(n,p),f(e.incoming,function(e){var t=e.businessObject.cmmnElementRef;t&&_(t,"cmmn:OnPart")&&s(t,P(t))})}n=c(n),w(e)!==n&&b(e,n),f(e.incoming,function(e){var i=e.businessObject.cmmnElementRef;if(i&&_(i,"cmmn:OnPart")){var r=c(i);r&&i!==r&&(S(e,r),t.updateSemanticParent(r,n,"onParts"))}}),t.updateSemanticParent(n,a,"sentries")}})}}function r(e){if(b(e))return E(e);if(R(e)){var t=E(e);return M(t,"cmmn:PlanFragment")}}function o(e){return m(y(e,function(e){var t=[];if(e.attachers)t=e.attachers;else{var n=E(e),i=n.get("exitCriteria");f(i,function(e){t.push(e)});var r=n.get("entryCriteria");f(r,function(e){t.push(e)})}return t||[]}))}function a(e){return g(e,function(e){var t=w(e);return t&&t.id})}function s(e){return _(e,"cmmn:Criterion")}function c(e,t){var n=u(t);return v(e.outgoing,function(e){return t!==e&&n===u(e)})}function u(e){return e=E(e),e.cmmnElementRef}function l(e){var t=u(e),n=t.standardEvent,i=S(t);return n&&-1!==i.indexOf(n)}function p(e){if(e=u(e),_(e.sourceRef,"cmmn:CaseFileItem"))return"update";if(_(e.exitCriterionRef,"cmmn:ExitCriterion"))return"exit";if(_(e.sourceRef,"cmmn:PlanItem")){var t=C(e.sourceRef);return _(t,"cmmn:EventListener")||_(t,"cmmn:Milestone")?"occur":"complete"}}var h=e(267),d=e(99),f=e(281),m=e(269),g=e(282),y=e(283),v=e(277),x=e(74),_=x.is,b=x.isCasePlanModel,w=x.getSentry,E=x.getBusinessObject,C=x.getDefinition,S=x.getStandardEvents,M=e(45).getParent,P=e(46),R=P.isItemCapable,T=P.getAllDiscretionaryItems,k=P.getDirectItemCapables,A=P.isHumanTask,I=300;i.$inject=["eventBus","modeling","itemRegistry","cmmnReplace","cmmnFactory"],h(i,d),t.exports=i},{267:267,269:269,277:277,281:281,282:282,283:283,45:45,46:46,74:74,99:99}],35:[function(e,t,n){"use strict";function i(e,t){a.call(this,e),this.preExecute("elements.delete",function(e){var n=e.context,i=n.elements;r(i,function(e){t.unclaimId(e.businessObject.id,e.businessObject)})})}var r=e(281),o=e(267),a=e(99);o(i,a),i.$inject=["eventBus","modeling"],t.exports=i},{267:267,281:281,99:99}],36:[function(e,t,n){t.exports={__init__:["attachCriterionBehavior","caseFileItemUpdater","labelBehavior","planItemDefinitionUpdater","planningTableUpdater","replaceConnectionBehavior","replaceElementBehavior","resizeCasePlanModelBehavior","sentryUpdater","unclaimIdBehavior"],attachCriterionBehavior:["type",e(26)],caseFileItemUpdater:["type",e(27)],labelBehavior:["type",e(28)],planItemDefinitionUpdater:["type",e(29)],planningTableUpdater:["type",e(30)],replaceConnectionBehavior:["type",e(31)],replaceElementBehavior:["type",e(32)],resizeCasePlanModelBehavior:["type",e(33)],sentryUpdater:["type",e(34)],unclaimIdBehavior:["type",e(35)]}},{26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35}],37:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._cmmnRules=t}function r(e){return a(e,"cmmn:Criterion")}var o=e(267),a=e(74).is;o(i,e(156)),i.$inject=["modeling","cmmnRules"],t.exports=i,i.prototype.preExecute=function(e){if(!e.source)throw new Error("source required");var t=this._cmmnRules,n=e.shape,i=e.source,o=e.target||e.source.parent,a=e.position,s=e.attach;r(n)&&(s="attach"===t.canAttach(n,o,i,a)),e.shape=this._modeling.createShape(n,a,o,{attach:s,nested:!0})}},{156:156,267:267,74:74}],38:[function(e,t,n){"use strict";function i(e){this._moddle=e}i.$inject=["moddle"],t.exports=i,i.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.claim(n,i):t.unclaim(n)},i.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element;e.claiming?t.unclaim(n):t.claim(n,i)}},{}],39:[function(e,t,n){"use strict";function i(e){this._rules=e}var r=e(267),o=e(399);r(i,e(170)),i.$inject=["rules"],t.exports=i,i.prototype.execute=function(e){var t,n=e.newSource,i=e.newTarget,r=e.connection,a=e.dockingOrPoints,s=r.waypoints;if(!n&&!i)throw new Error("newSource or newTarget are required");return e.oldWaypoints=s,o(a)?t=a:(t=s.slice(),t.splice(n?0:-1,1,a)),n&&(e.oldSource=r.source,r.source=n),i&&(e.oldTarget=r.target,r.target=i),r.waypoints=t,r}},{170:170,267:267,399:399}],40:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._rules=t}e(267)(i,e(171)),i.$inject=["modeling","rules"],t.exports=i,i.prototype.createShape=function(e,t,n){return this._modeling.createShape(e,t,n,{nested:!0})},i.prototype.reconnectStart=function(e,t,n){this._modeling.reconnectStart(e,t,n,{nested:!0,startChanged:!0})},i.prototype.reconnectEnd=function(e,t,n){this._modeling.reconnectEnd(e,t,n,{nested:!0,endChanged:!0})}},{171:171,267:267}],41:[function(e,t,n){"use strict";function i(e,t,n,i){this._itemRegistry=e,this._modeling=t,this._cmmnReplace=n,this._cmmnFactory=i}function r(e,t){var n={};return n[e]=t,n}function o(e){return!(d(e)&&h(e))}var a=e(279),s=e(281),c=e(74).getBusinessObject,u=e(74).getItemControl,l=e(74).getDefaultControl,p=e(74).getDefinition,h=e(74).hasPlanningTable,d=e(46).isPlanningTableCapable;i.$inject=["itemRegistry","modeling","cmmnReplace","cmmnFactory"],t.exports=i;var f=["requiredRule","repetitionRule","manualActivationRule"];i.prototype.preExecute=function(e){var t=this,n=e.element,i=e.values;if(!n)throw new Error("element required");s(i,function(e,i){-1!==f.indexOf(i)?t._updateRule(n,i,e):t._updateDecorator(n,i,e)})},i.prototype.execute=function(){},i.prototype.revert=function(){},i.prototype._updateDecorator=function(e,t,n){var i=this,a=i._modeling,s=p(e),c=r(t,n),u=[];s[t]!==n&&(u=i._getReferencingShapes(s),u.length>1&&o(s)&&(s=i._replaceDefinition(e),u=e),a.updateProperties(s,c,u))},i.prototype._updateRule=function(e,t,n){function i(e,t){return e&&e[t]}function s(){return m.create("cmmn:PlanItemControl")}function h(e){return!(!e||e.repetitionRule||e.requiredRule||e.manualActivationRule)}var d=this,f=d._modeling,m=d._cmmnFactory,g=u(e),y=l(e),v=p(e),x=r(t,n);n?function(){g||(g=s(),f.updateProperties(e,{itemControl:g}),f.updateSemanticParent(g,c(e))),f.updateProperties(g,x,e),f.updateSemanticParent(n,g)}():function(){var n;if(i(g,t)&&(n=g[t],f.updateProperties(g,x,e),f.updateSemanticParent(n),h(g)&&(f.updateProperties(e,{itemControl:void 0}),f.updateSemanticParent(g))),i(y,t)){n=y[t];var r=d._getReferencingShapes(v);r.length>1&&o(v)&&(r=a(r,function(e){var n=u(e),r=l(e);return!i(n,t)&&i(r,t)}),r.length>1&&(d._replaceDefinition(e),y=l(e),r=e)),f.updateProperties(y,x,r),f.updateSemanticParent(n),h(y)&&(f.updateProperties(v,{defaultControl:void 0},r),f.updateSemanticParent(y))}}()},i.prototype._replaceDefinition=function(e){var t=this,n=t._modeling,i=t._cmmnReplace,r=p(e),o=i.replacePlanItemDefinition(r);return n.updateProperties(e,{definitionRef:o}),n.updateSemanticParent(o,r.$parent,"planItemDefinitions"),o},i.prototype._getReferencingShapes=function(e){return this._itemRegistry.getShapes(e)}},{279:279,281:281,46:46,74:74}],42:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=e,this._itemRegistry=t,this._moddle=n}function r(e,t){return m in e&&e[m]!==t[m]}function o(e,t){return g in e&&e[g]!==t[g]}function a(e,t){return y in e&&e[y]!==t[y]}function s(e,t){return l(t,function(t,n){return t[n]=e.get(n),t},{})}function c(e,t){h(t,function(t,n){e.set(n,t)})}function u(e){var t=d({},e);return x.forEach(function(n){n in e&&(t[n]=f(t[n]))}),t}var l=e(415),p=e(409),h=e(281),d=e(408),f=e(74).getBusinessObject,m="id",g="definitionRef",y="sentryRef",v=e(269);i.$inject=["elementRegistry","itemRegistry","moddle"],t.exports=i,i.prototype.preExecute=function(e){var t=e.element,n=e.shape;if(!t)throw new Error("element required");var i=t.businessObject||t;e.businessObject=i;var r=[];t.businessObject&&r.push(t),n&&r.push(n),e.changed=v(r)},i.prototype.execute=function(e){var t=this._elementRegistry,n=this._itemRegistry,i=this._moddle.ids,l=e.changed,d=e.element,f=e.businessObject,v=u(e.properties),x=e.oldProperties||s(f,p(v));if(r(v,f)){i.unclaim(f[m]),n.updateId(f,v[m]);var _=t.get(d.id);_&&t.updateId(_,v[m]),i.claim(v[m],f)}return o(v,f)&&n.updateReference(f,v[g]),a(v,f)&&n.updateReference(f,v[y]),"name"in v&&h(l,function(e){e.label&&l.push(e.label)}),("standardEvent"in v||"isStandardEventVisible"in v)&&h(l,function(e){e.label&&l.push(e.label)}),c(f,v),e.oldProperties=x,l},i.prototype.revert=function(e){var t=e.properties,n=e.oldProperties,i=e.businessObject,s=this._elementRegistry,u=this._itemRegistry,l=this._moddle.ids;if(r(n,i)&&u.updateId(i,n[m]),o(n,i)&&u.updateReference(i,n[g]),a(n,i)&&u.updateReference(i,n[y]),c(i,n),r(t,i)){l.unclaim(t[m]);var p=s.get(t[m]);p&&s.updateId(p,n[m]),l.claim(n[m],i)}return e.changed};var x=["default"]},{269:269,281:281,408:408,409:409,415:415,74:74}],43:[function(e,t,n){"use strict";function i(){}var r=e(269),o=e(232);t.exports=i,i.prototype.preExecute=function(e){var t=e.element,n=e.shape;if(!t)throw new Error("element required");var i=t.businessObject||t;e.businessObject=i,e.oldParent=i.$parent;var o=[];t.businessObject&&o.push(t),n&&o.push(n),e.changed=r(o)},i.prototype.execute=function(e){var t=e.businessObject,n=e.newParent,i=e.containment;return this.updateSemanticParent(t,n,i),e.changed},i.prototype.revert=function(e){var t=e.businessObject,n=e.oldParent,i=e.containment;return this.updateSemanticParent(t,n,i),e.changed},i.prototype.updateSemanticParent=function(e,t,n){if(e.$parent!==t){var i;e.$parent&&n&&(i=e.$parent.get(n),o.remove(i,e)),e.$parent=null,t&&(n&&(i=t.get(n),i.push(e)),e.$parent=t)}}},{232:232,269:269}],44:[function(e,t,n){t.exports={__init__:["modeling","cmmnUpdater"],__depends__:[e(36),e(48),e(59),e(61),e(101),e(210),e(151),e(113),e(126)],cmmnFactory:["type",e(21)],cmmnUpdater:["type",e(23)],elementFactory:["type",e(24)],modeling:["type",e(25)],layouter:["type",e(22)],connectionDocking:["type",e(221)]}},{101:101,113:113,126:126,151:151,21:21,210:210,22:22,221:221,23:23,24:24,25:25,36:36,48:48,59:59,61:61}],45:[function(e,t,n){"use strict";function i(e,t){return e===t}function r(e,t){return i(o(e),o(t))}function o(e){return s(d(e),"cmmn:Case")}function a(e,t){var n=[];for("string"==typeof t&&(t=[t]);e;)(e=e.$parent||e.parent)&&(t?c(e,t)&&n.push(e):n.push(e));return n}function s(e,t){for("string"==typeof t&&(t=[t]);e=e.$parent||e.parent;){if(!t)return e;if(c(e,t))return e}return null}function c(e,t){return l(t,function(t){return h(e,t)})}function u(e){return e instanceof f.Label}var l=e(277),p=e(74),h=p.is,d=p.getBusinessObject,f=e(224);t.exports.isSame=i,t.exports.isSameCase=r,t.exports.getCase=o,t.exports.getParents=a,t.exports.getParent=s,t.exports.isAny=c,t.exports.isLabel=u},{224:224,277:277,74:74}],46:[function(e,t,n){"use strict";function i(e){e=f(e),o(e)&&(e=d(e));var t=[];if(a(e)&&(e=e.planningTable)){var n=e.get("tableItems");y(n,function(e){if(!s(e))return e.get("tableItems");t.push(e)})}return t}function r(e){function t(e){n.push(e)}e=f(e),o(e)&&(e=d(e));var n=[];if(e){var r;h(e,"cmmn:PlanFragment")&&(r=e.get("planItems"),y(r,t)),a(e)&&(r=i(e),y(r,t))}return n}function o(e){return m(e,["cmmn:DiscretionaryItem","cmmn:PlanItem"])}function a(e){return m(e,["cmmn:HumanTask","cmmn:Stage"])}function s(e){return h(e,"cmmn:DiscretionaryItem")}function c(e){var t=f(e),n=g(t,"cmmn:PlanItemDefinition");return h(n,"cmmn:HumanTask")}function u(e){return h(e,"cmmn:HumanTask")}function l(e){return h(e,"cmmn:PlanFragment")&&!h(e,"cmmn:Stage")}var p=e(74),h=p.is,d=p.getDefinition,f=p.getBusinessObject,m=e(45).isAny,g=e(45).getParent,y=e(235).eachElement;t.exports.getAllDiscretionaryItems=i,t.exports.getDirectItemCapables=r,t.exports.isItemCapable=o,t.exports.isPlanningTableCapable=a,t.exports.isDiscretionaryItem=s,t.exports.isDiscretionaryToHumanTask=c,t.exports.isHumanTask=u,t.exports.isPlanFragment=l},{235:235,45:45,74:74}],47:[function(e,t,n){"use strict";function i(e){function t(e){r(e)&&(e=e.businessObject.cmmnElementRef||e);var t=c(o,function(t){return u(e,t.type)});return t&&t.order||{level:1}}function n(e){var n=e.order;return n||(e.order=n=t(e)),n}function i(e,t,n){var i=t;for(r(e)&&e.source&&(i=e.source.parent);i&&!l(i,n);)i=i.parent;if(!i)throw new Error("no parent for "+e.id+" in "+t.id);return i}a.call(this,e);var o=[{type:"label",order:{level:10}},{type:"cmmn:Criterion",order:{level:6}},{type:"cmmn:OnPart",order:{level:9,containers:["cmmn:Stage"]}},{type:"cmmn:Association",order:{level:9,containers:["cmmndi:CMMNDiagram"]}},{type:"cmmndi:CMMNEdge",order:{level:9,containers:["cmmn:PlanItem","cmmn:DiscretionaryItem","cmmn:Stage"]}}];this.getOrdering=function(e,t){var r=n(e);r.containers&&(t=i(e,t,r.containers));var o=t.children.indexOf(e),a=s(t.children,function(t){return!(!e.labelTarget&&t.labelTarget)&&r.level<n(t).level});return-1!==a&&-1!==o&&o<a&&(a-=1),{index:a,parent:t}}}function r(e){return u(e,"cmmndi:CMMNEdge")}var o=e(267),a=e(184),s=e(268),c=e(280),u=e(74).is,l=e(45).isAny;i.$inject=["eventBus"],o(i,a),t.exports=i},{184:184,267:267,268:268,280:280,45:45,74:74}],48:[function(e,t,n){t.exports={__init__:["cmmnOrderingProvider"],cmmnOrderingProvider:["type",e(47)]}},{47:47}],49:[function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=e(185),o=e(267),a=e(74).isCasePlanModel,s=e(447);o(i,r),i.$inject=["eventBus","styles","elementRegistry"],i.prototype.baseUpdateShapeOutline=r.prototype.updateShapeOutline,i.prototype.updateShapeOutline=function(e,t){a(t)?s(e,{x:-this.offset,y:-this.offset-18,width:t.width+2*this.offset,height:t.height+18+2*this.offset}):this.baseUpdateShapeOutline(e,t)},t.exports=i},{185:185,267:267,447:447,74:74}],50:[function(e,t,n){"use strict";t.exports={__init__:["outline"],outline:["type",e(49)]}},{49:49}],51:[function(e,t,n){"use strict";function i(e,t,n,i,r,o,a){this._create=e,this._elementFactory=t,this._globalConnect=n,this._handTool=i,this._palette=o,this._lassoTool=r,this._spaceTool=a,o.registerProvider(this)}var r=e(408);t.exports=i,i.$inject=["create","elementFactory","globalConnect","handTool","lassoTool","palette","spaceTool"],i.prototype.getPaletteEntries=function(e){function t(e,t,n,i){function r(t){s.start(t,c.createPlanItemShape(e))}var o=e.replace(/^cmmn\:/,"");return{group:t,className:n,title:i||"Create "+o,action:{dragstart:r,click:r}}}function n(e){s.start(e,c.createCasePlanModelShape())}function i(e){s.start(e,c.createCriterionShape("cmmn:EntryCriterion"))}function o(e){s.start(e,c.createCaseFileItemShape())}var a={},s=this._create,c=this._elementFactory,u=this._spaceTool,l=this._lassoTool,p=this._globalConnect,h=this._handTool;return r(a,{"hand-tool":{group:"tools",className:"cmmn-icon-hand-tool",title:"Activate the hand tool",action:{click:function(e){h.activateHand(e)}}},"lasso-tool":{group:"tools",className:"cmmn-icon-lasso-tool",title:"Activate the lasso tool",action:{click:function(e){l.activateSelection(e)}}},"space-tool":{group:"tools",className:"cmmn-icon-space-tool",title:"Activate the create/remove space tool",action:{click:function(e){u.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"cmmn-icon-connection",title:"Activate the global connect tool",action:{click:function(e){p.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.task":t("cmmn:Task","planItem","cmmn-icon-task"),"create.stage":t("cmmn:Stage","planItem","cmmn-icon-stage-expanded","Create expanded Stage"),"create.milestone":t("cmmn:Milestone","planItem","cmmn-icon-milestone"),"create.eventListener":t("cmmn:EventListener","planItem","cmmn-icon-event-listener"),"create.criterion":{group:"criterion",className:"cmmn-icon-entry-criterion",title:"Create Criterion",action:{dragstart:i,click:i}},"create.casePlanModel":{group:"casePlanModel",className:"cmmn-icon-case-plan-model",title:"Create CasePlanModel",action:{dragstart:n,click:n}},"create.caseFileItem":{group:"caseFileItem",className:"cmmn-icon-case-file-item",title:"Create Case File Item",action:{dragstart:o,click:o}}}),a}},{408:408}],52:[function(e,t,n){t.exports={__depends__:[e(190),e(136),e(217),e(153),e(145),e(14)],__init__:["paletteProvider"],paletteProvider:["type",e(51)]}},{136:136,14:14,145:145,153:153,190:190,217:217,51:51}],53:[function(e,t,n){"use strict";function i(e,t){return b(e).$type!==t.target.type}function r(e,t){return w(e).$type!==t.target.definitionType}function o(e,t){var n=t.type,i=t.definitionType,r=e.parent,o=w(e);if(f(e)&&"cmmn:DiscretionaryItem"===n&&!u(r))return!1;if("cmmn:HumanTask"===i){if(c(e)&&!t.isBlocking)return!1;if(h(e)&&o.isBlocking!==t.isBlocking)return!1}return!0}function a(e,t,n,i,r){this._popupMenu=e,this._cmmnReplace=t,this._cmmnFactory=n,this._modeling=i,this._rules=r,this.register()}function s(e){var t=w(e);return!E(e)&&x(t,["cmmn:Stage","cmmn:Milestone","cmmn:Task"])}function c(e){return P(w(e),"cmmn:PlanFragment")}function u(e){return P(w(e),"cmmn:Stage")}function l(e){return P(w(e),"cmmn:EventListener")}function p(e){return P(w(e),"cmmn:Milestone")}function h(e){return P(w(e),"cmmn:Task")}function d(e){return P(e,"cmmn:Criterion")}function f(e){return P(e,"cmmn:PlanItem")}var m=e(281),g=e(279),y=e(58),v=e(46).isItemCapable,x=e(45).isAny,_=e(74),b=_.getBusinessObject,w=_.getDefinition,E=_.isCasePlanModel,C=_.isRequired,S=_.isRepeatable,M=_.isManualActivation,P=_.is,R=e(72).isCollapsed;a.$inject=["popupMenu","cmmnReplace","cmmnFactory","modeling","rules"],a.prototype.register=function(){this._popupMenu.registerProvider("cmmn-replace",this)},a.prototype.getEntries=function(e){var t,n=this._rules,a=w(e);if(!n.allowed("shape.replace",{element:e}))return[];if(v(e)){if(h(e))return t=g(y.TASK,function(t){var n=t.target;if(o(e,n))return i(e,t)^r(e,t)}),this._createEntries(e,t);if(c(e)){if(!R(e))return t=g(y.PLAN_FRAGMENT_EXPANDED,function(t){var n=t.target;if(o(e,n))return i(e,t)||r(e,t)}),this._createEntries(e,t);if(R(e))return t=g(y.TASK,function(t){var n=t.target,s=n.definitionType;return!!o(e,n)&&(s===a.$type&&!n.isCollapsed||i(e,t)^r(e,t))}),this._createEntries(e,t)}if(l(e))return t=g(y.EVENT_LISTENER,function(t){return r(e,t)}),this._createEntries(e,t)}return d(e)?(t=g(y.CRITERION,function(t){return i(e,t)}),this._createEntries(e,t)):[]},a.prototype.getHeaderEntries=function(e){var t=[];return h(e)&&(t=t.concat(this._getBlockingEntry(e))),u(e)&&(t=t.concat(this._getAutoCompleteEntry(e))),s(e)&&(t=t.concat(this._getRuleEntries(e))),t},a.prototype._createEntries=function(e,t){var n=[],i=this;return m(t,function(t){var r=i._createMenuEntry(t,e);n.push(r)}),n},a.prototype._createMenuEntry=function(e,t,n){var i=this._cmmnReplace.replaceElement,r=function(){return i(t,e.target)};return n=n||r,{label:e.label,className:e.className,id:e.actionName,action:n}},a.prototype._getBlockingEntry=function(e){function t(t,i){var r=!i.active;n._modeling.updateControls(e,{isBlocking:r})}var n=this;return[{id:"toggle-is-blocking",className:"cmmn-icon-blocking",title:"Blocking",active:w(e).isBlocking,action:t}]},a.prototype._getAutoCompleteEntry=function(e){function t(t,i){var r=!i.active;n._modeling.updateControls(e,{autoComplete:r})}var n=this;return[{id:"toggle-auto-complete",className:"cmmn-icon-auto-complete-marker",title:"Auto Complete",active:w(e).autoComplete,action:t}]},a.prototype._getRuleEntries=function(e){function t(t,i){return function(r,o){var a={};o.active?a[t]=void 0:a[t]=n._cmmnFactory.create(i),n._modeling.updateControls(e,a)}}var n=this,i=S(e),r=C(e),o=M(e),a=[{id:"toggle-required-rule",className:"cmmn-icon-required-marker",title:"Required Rule",active:r,action:t("requiredRule","cmmn:RequiredRule")}];return p(e)||a.push({id:"toggle-manual-activation-rule",className:"cmmn-icon-manual-activation-marker",title:"Manual Activation Rule",active:o,action:t("manualActivationRule","cmmn:ManualActivationRule")}),a.push({id:"toggle-repetition-rule",className:"cmmn-icon-repetition-marker",title:"Repetition Rule",active:i,action:t("repetitionRule","cmmn:RepetitionRule")}),a},t.exports=a},{279:279,281:281,45:45,46:46,58:58,72:72,74:74}],54:[function(e,t,n){t.exports={__init__:["replaceMenuProvider"],replaceMenuProvider:["type",e(53)]}},{53:53}],55:[function(e,t,n){"use strict";function i(e,t,n,i,o,l){function x(t,i){var r={type:i.newElementType,x:t.x,y:t.y,width:t.width,height:t.height};if(u(t)){var o,s=p(t),c=h(t),l=i.newElementType,d=i.newDefinitionType;d&&(c=e.replacePlanItemDefinition(c,d)),o=e.replaceItemCapable(s,l,c),a(r,{businessObject:o})}return n.createShape(r)}function _(e){return e.visualReplacements||(e.visualReplacements={}),e.visualReplacements}function b(e){var n=e.context,i=n.canExecute||n.allowed;if("attach"===i){var r=n.position||{x:e.x,y:e.y},o=n.shapes||[n.shape],a=n.target;i=t.canReplace(o,a,r,n.source)}return i}function w(e,t){var n=e&&c(e);n&&(y(n),n=g("g"),m(n).add("djs-visual"),f(e,n),l.drawShape(n,t))}function E(e,t,n){s(t,function(t){var r=t.oldElementId,o=i.get(r)||e.shape;if(!e.visualReplacements[r]){var a=x(o,t);w(n(o),a),e.visualReplacements[r]=o}})}function C(e,t){var n=e.visualReplacements;s(n,function(e,i){w(t(e),e),delete n[i]})}r.call(this,o),o.on(["shape.move.move","create.move"],v,function(e){var t=e.context,n=t.dragGroup,i=t.visual,r=b(e),o=r&&r.replacements;_(t);var a=function(e){var t,r;return n?(t="[data-element-id="+e.id+"]",r=n):i&&(t=".djs-dragger",r=i),r&&d(t,r)};o&&o.length?E(t,o,a):C(t,a)}),o.on(["bendpoint.move.move","connect.move"],v,function(e){var t=e.context,n=b(e),r=n&&n.replacements;_(t),r&&r.length&&E(t,r,function(e){return i.getGraphics(e)})}),o.on(["bendpoint.move.cancel","bendpoint.move.cleanup","bendpoint.move.end","bendpoint.move.out","connect.cleanup","connect.end","connect.out"],v,function(e){C(e.context,function(e){return i.getGraphics(e)})})}var r=e(99),o=e(267),a=e(408),s=e(281),c=e(238).getVisual,u=e(46).isItemCapable,l=e(74),p=l.getBusinessObject,h=l.getDefinition,d=e(424),f=e(445),m=e(448),g=e(451),y=e(454),v=250;i.$inject=["cmmnReplace","cmmnRules","elementFactory","elementRegistry","eventBus","graphicsFactory"],o(i,r),t.exports=i},{238:238,267:267,281:281,408:408,424:424,445:445,448:448,451:451,454:454,46:46,74:74,99:99}],56:[function(e,t,n){t.exports={__depends__:[e(183)],__init__:["cmmnReplacePreview"],cmmnReplacePreview:["type",e(55)]}},{183:183,55:55}],57:[function(e,t,n){"use strict";function i(e,t,n,i){function r(i,r,l){l=l||{};var p,_=r.type,b=i.businessObject,w={type:_};if(u(b)&&(p=a(b,_)),v(b)){var E=d(b),C=r.definitionType,S=E;E.$type!==C&&(S=h(E,C)),p=x(b,_,S),s(E)&&s(S)&&!1!==r.isCollapsed&&(w.isCollapsed=m(b)),o(E)&&!0===r.isCollapsed&&(w.isCollapsed=!0),o(S)&&!1===r.isBlocking&&(w.isBlocking=!1),y(E)&&y(S)&&(w.isPlanningTableCollapsed=g(b)),c(E)&&c(S)&&(w.autoComplete=f(b)),m(b)||r.isCollapsed||o(E)||(w.width=i.width,w.height=i.height)}return w.businessObject=p||e.create(_),w=t.replaceElement(i,w,l),!1!==l.select&&n.select(w),w}function a(t,n){var i;return t&&(n=n||t.$type,i=e.createCriterion(n,{sentryRef:t.sentryRef,name:t.name})),i}function p(t){var n;if(t&&(n=e.createSentry({name:t.name}),t.ifPart)){var i=e.create("cmmn:IfPart");E(i,n),n.ifPart=i;var r=w(t.ifPart.condition);E(r,i),i.condition=r}return n}function h(t,n){n=n||t.$type;var i=e.create(n,{name:t.name});if(l(i)&&t.defaultControl){var r=_(t.defaultControl,i);E(r,i),i.defaultControl=r}return c(i)&&t.autoComplete&&(i.autoComplete=t.autoComplete),o(t)&&o(i)&&(i.isBlocking=t.isBlocking),i}function x(t,n,i){n=n||t.$type,i=i||d(t);var r=e.create(n,{name:t.name,definitionRef:i});if(l(r)&&t.itemControl){var o=_(t.itemControl,r);E(o,r),r.itemControl=o}return r}function _(t,n){var r;if(t){r=e.create("cmmn:PlanItemControl");var o=t.repetitionRule;!o||n&&!i.canSetRepetitionRule(n)||(o=b(o),E(o,r),r.repetitionRule=o);var a=t.requiredRule;!a||n&&!i.canSetRequiredRule(n)||(a=b(a),E(a,r),r.requiredRule=a);var s=t.manualActivationRule;!s||n&&!i.canSetManualActivationRule(n)||(s=b(s),E(s,r),r.manualActivationRule=s)}return r}function b(t){var n;if(t){var i=t.$type,r=w(t.condition);n=e.create(i,{condition:r}),E(r,n)}return n}function w(t){var n;return t&&(n=e.create("cmmn:Expression",{language:t.language,body:t.body})),n}function E(e,t){e&&(e.$parent=t)}this.replaceElement=r,this.replaceCriterion=a,this.replaceSentry=p,this.replacePlanItemDefinition=h,this.replaceItemCapable=x,this.replacePlanItemControl=_,this.replaceRule=b,this.replaceCondition=w}function r(e,t){return e=d(e),h(e,t)}function o(e){return r(e,"cmmn:Task")}function a(e){return r(e,"cmmn:Milestone")}function s(e){return r(e,"cmmn:PlanFragment")}function c(e){return r(e,"cmmn:Stage")}function u(e){return h(e,"cmmn:Criterion")}function l(e){return o(e)||c(e)||a(e)}var p=e(74),h=p.is,d=p.getDefinition,f=p.isAutoComplete,m=e(72).isCollapsed,g=e(72).isPlanningTableCollapsed,y=e(46).isPlanningTableCapable,v=e(46).isItemCapable;i.$inject=["cmmnFactory","replace","selection","cmmnRules"],t.exports=i},{46:46,72:72,74:74}],58:[function(e,t,n){"use strict";t.exports.TASK=[{label:"Task",actionName:"replace-with-task-plan-item",className:"cmmn-icon-task-none",target:{definitionType:"cmmn:Task",type:"cmmn:PlanItem"}},{label:"Human Task",actionName:"replace-with-blocking-human-task-plan-item",className:"cmmn-icon-human-blocking-task",target:{definitionType:"cmmn:HumanTask",type:"cmmn:PlanItem",isBlocking:!0}},{label:"Human Task",actionName:"replace-with-non-blocking-human-task-plan-item",className:"cmmn-icon-human-non-blocking-task",target:{definitionType:"cmmn:HumanTask",type:"cmmn:PlanItem",isBlocking:!1}},{label:"Decision Task",actionName:"replace-with-decision-task-plan-item",className:"cmmn-icon-decision-task",target:{definitionType:"cmmn:DecisionTask",type:"cmmn:PlanItem"}},{label:"Process Task",actionName:"replace-with-process-task-plan-item",className:"cmmn-icon-process-task",target:{definitionType:"cmmn:ProcessTask",type:"cmmn:PlanItem"}},{label:"Case Task",actionName:"replace-with-case-task-plan-item",className:"cmmn-icon-case-task",target:{definitionType:"cmmn:CaseTask",type:"cmmn:PlanItem"}},{label:"Stage (collapsed)",actionName:"replace-with-collapsed-stage-plan-item",className:"cmmn-icon-stage-collapsed",target:{definitionType:"cmmn:Stage",type:"cmmn:PlanItem",isCollapsed:!0}},{label:"Stage (expanded)",actionName:"replace-with-expanded-stage-plan-item",className:"cmmn-icon-stage-expanded",target:{definitionType:"cmmn:Stage",type:"cmmn:PlanItem",isCollapsed:!1}},{label:"Discretionary Task",actionName:"replace-with-task-discretionary-item",className:"cmmn-icon-task-discretionary",target:{definitionType:"cmmn:Task",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Human Task",actionName:"replace-with-blocking-human-task-discretionary-item",className:"cmmn-icon-human-blocking-task-discretionary",target:{definitionType:"cmmn:HumanTask",type:"cmmn:DiscretionaryItem",isBlocking:!0}},{label:"Discretionary Human Task",actionName:"replace-with-non-blocking-human-task-discretionary-item",
className:"cmmn-icon-human-non-blocking-task-discretionary",target:{definitionType:"cmmn:HumanTask",type:"cmmn:DiscretionaryItem",isBlocking:!1}},{label:"Discretionary Decision Task",actionName:"replace-with-decision-task-discretionary-item",className:"cmmn-icon-decision-task-discretionary",target:{definitionType:"cmmn:DecisionTask",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Process Task",actionName:"replace-with-process-task-discretionary-item",className:"cmmn-icon-process-task-discretionary",target:{definitionType:"cmmn:ProcessTask",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Case Task",actionName:"replace-with-case-task-discretionary-item",className:"cmmn-icon-case-task-discretionary",target:{definitionType:"cmmn:CaseTask",type:"cmmn:DiscretionaryItem"}},{label:"Discretionary Stage (collapsed)",actionName:"replace-with-collapsed-stage-discretionary-item",className:"cmmn-icon-stage-collapsed-discretionary",target:{definitionType:"cmmn:Stage",type:"cmmn:DiscretionaryItem",isCollapsed:!0}},{label:"Discretionary Stage (expanded)",actionName:"replace-with-expanded-stage-discretionary-item",className:"cmmn-icon-stage-expanded-discretionary",target:{definitionType:"cmmn:Stage",type:"cmmn:DiscretionaryItem",isCollapsed:!1}}],t.exports.PLAN_FRAGMENT_EXPANDED=[{label:"Stage",actionName:"replace-with-stage-plan-item",className:"cmmn-icon-stage-expanded",target:{definitionType:"cmmn:Stage",type:"cmmn:PlanItem",isCollapsed:!1}},{label:"Discretionary Stage",actionName:"replace-with-stage-discretionary-item",className:"cmmn-icon-stage-expanded-discretionary",target:{definitionType:"cmmn:Stage",type:"cmmn:DiscretionaryItem",isCollapsed:!1}},{label:"Discretionary Plan Fragment",actionName:"replace-with-plan-fragment-discretionary-item",className:"cmmn-icon-plan-fragment-expanded-discretionary",target:{definitionType:"cmmn:PlanFragment",type:"cmmn:DiscretionaryItem",isCollapsed:!1}}],t.exports.EVENT_LISTENER=[{label:"Event Listener",actionName:"replace-with-event-listener-plan-item",className:"cmmn-icon-event-listener",target:{definitionType:"cmmn:EventListener",type:"cmmn:PlanItem"}},{label:"Timer Event Listener",actionName:"replace-with-timer-event-listener-plan-item",className:"cmmn-icon-timer-event-listener",target:{definitionType:"cmmn:TimerEventListener",type:"cmmn:PlanItem"}},{label:"User Event Listener",actionName:"replace-with-user-event-listener-plan-item",className:"cmmn-icon-user-event-listener",target:{definitionType:"cmmn:UserEventListener",type:"cmmn:PlanItem"}}],t.exports.CRITERION=[{label:"Entry Criterion",actionName:"replace-with-entry-criterion",className:"cmmn-icon-entry-criterion",target:{type:"cmmn:EntryCriterion"}},{label:"Exit Criterion",actionName:"replace-with-exit-criterion",className:"cmmn-icon-exit-criterion",target:{type:"cmmn:ExitCriterion"}}]},{}],59:[function(e,t,n){t.exports={__depends__:[e(192),e(196),e(210)],cmmnReplace:["type",e(57)]}},{192:192,196:196,210:210,57:57}],60:[function(e,t,n){"use strict";function i(e){Y.call(this,e)}function r(e,t){return-1!==z(t).indexOf(e)}function o(e){return y(e)||g(e)||N(D(e),"cmmn:Stage")}function a(e){return!e||s(e)}function s(e){return e.labelTarget}function c(e){return e.waypoints}function u(e,t,n){return!T(t.incoming,function(i){return i!==n&&p(i)&&i.source===e&&i.target===t})}function l(e,t){return T(e.incoming,function(e){return e!==t&&p(e)})}function p(e){return!e.businessObject.cmmnElementRef}function h(e){return T(e.incoming,function(e){return d(e)})}function d(e){return N(e.businessObject.cmmnElementRef,"cmmn:OnPart")}function f(e,t){var n=D(e)||e;return!!N(n,"cmmn:PlanFragment")&&!(!t&&N(n,"cmmn:Stage"))}function m(e){return N(D(e),"cmmn:EventListener")}function g(e){return N(D(e),"cmmn:Milestone")}function y(e){return N(D(e),"cmmn:Task")}function v(e){return!(!(e=D(e))||!e.isBlocking)}function x(e){return N(e,"cmmn:Criterion")}function _(e){return N(e,"cmmn:EntryCriterion")}function b(e){return N(e,"cmmn:ExitCriterion")}function w(e){return c(e)&&(e=e.businessObject.cmmnElementRef),N(e,"cmmn:Artifact")}function E(e){return N(e,"cmmn:TextAnnotation")}function C(e){return N(e,"cmmn:CaseFileItem")}function S(e){return N(e,"cmmn:PlanItem")}function M(e,t){return $(U(e),U(t))}function P(e,t){return $(D(e),D(t))}var R=e(267),T=e(277),k=e(281),A=e(408),I=e(279),j=e(74),N=j.is,O=j.isCasePlanModel,D=j.getDefinition,B=j.getBusinessObject,L=e(72).isCollapsed,z=e(45).getParents,F=e(45),$=F.isSame,H=F.isSameCase,U=F.getParent,W=e(46),V=W.isDiscretionaryToHumanTask,G=W.isHumanTask,q=W.isDiscretionaryItem,K=e(65).getCriterionAttachment,Y=e(202);R(i,Y),i.$inject=["eventBus"],t.exports=i,i.prototype.init=function(){var e=this;this.addRule("connection.create",function(t){var n=t.source,i=t.target,r=!1,o=t.hints||{},a=o.targetParent;if(o.targetAttach)return!1;a&&(i.parent=a);try{r=e.canConnect(n,i)||e.canReplaceConnectionEnd(n,i,"target"),r||(r=e.canConnect(i,n)||e.canReplaceConnectionEnd(i,n,"source"))&&A(r,{reverse:!0})}finally{a&&(i.parent=null)}return r}),this.addRule("connection.reconnectStart",function(t){var n=t.connection,i=t.hover,r=i||t.source,o=n.target,a=!1;return a=e.canConnect(r,o,n),!a&&i&&((a=e.canReplaceConnectionEnd(i,o,"source"))||(a=e.canConnect(o,i,n)||e.canReplaceConnectionEnd(o,i,"target"))&&A(a,{reverse:!0})),a}),this.addRule("connection.reconnectEnd",function(t){var n=t.connection,i=n.source,r=t.hover,o=r||t.target,a=!1;return a=e.canConnect(i,o,n),!a&&r&&((a=e.canReplaceConnectionEnd(i,r,"target"))||(a=e.canConnect(r,i,n)||e.canReplaceConnectionEnd(r,i,"source"))&&A(a,{reverse:!0})),a}),this.addRule("shape.attach",function(t){return e.canAttach(t.shape,t.target,null,t.position)}),this.addRule("shape.create",function(t){var n=t.target,i=t.shape,r=t.source,o=t.position,a=[i];return e.canCreate(i,n,r,o)||e.canReplace(a,n,o,r)}),this.addRule("shape.resize",function(t){var n=t.shape,i=t.newBounds;return e.canResize(n,i)}),this.addRule("elements.move",function(t){var n=t.target,i=t.shapes,r=t.position;return e.canAttach(i,n,null,r)||e.canMove(i,n,r)||e.canReplace(i,n,r)}),this.addRule("shape.replace",function(e){var t,n=e.element;if(x(n)){if(t=n.host,O(t))return!1;if(y(t)&&!v(t))return!1;if(g(t)||m(t))return!1}}),this.addRule(["elements.delete"],function(t){return e.canRemove(t.elements)})},i.prototype.canRemove=function(e){return I(e,function(e){return!s(e)})},i.prototype.canMove=function(e,t){var n=this;return!t||e.every(function(i){return!(q(i)&&!n.canMoveDiscretionaryItem(i,e,t))&&n.canDrop(i,t)})},i.prototype.canMoveDiscretionaryItem=function(e,t,n){return!f(n)||T(e.incoming,function(e){var i=e.source;if(p(e))return r(n,i)||-1!==t.indexOf(i)})},i.prototype.canCreate=function(e,t,n,i){var o=this;return!!t&&(s(t)?null:!$(n,t)&&((!n||!r(n,t))&&(!(q(e)&&!o.canCreateDiscretionaryItem(e,t,n))&&o.canDrop(e,t,i))))},i.prototype.canCreateDiscretionaryItem=function(e,t,n){return!f(t)||r(t,n)},i.prototype.canDrop=function(e,t){return!(!s(e)||c(t))||(w(e)?N(t,"cmmndi:CMMNDiagram")||f(t,!0):!x(e)&&(O(e)?N(t,"cmmndi:CMMNDiagram"):!!f(t,!0)&&!L(t)))},i.prototype.canResize=function(e,t){return f(e,!0)?!L(e)&&(!t||t.width>=100&&t.height>=80):!!E(e)},i.prototype.canConnect=function(e,t,n){return a(e)||a(t)?null:!$(e,t)&&(this.canConnectPlanItemOnPartConnection(e,t)?{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0}:this.canConnectCaseFileItemOnPartConnection(e,t)?{type:"cmmn:CaseFileItemOnPart",isStandardEventVisible:!0}:this.canConnectDiscretionaryConnection(e,t,n)?{type:"cmmndi:CMMNEdge"}:n&&N(n.businessObject.cmmnElementRef,"cmmn:Association")&&this.canConnectAssociation(e,t)?{type:"cmmn:Association"}:!(!E(e)&&!E(t))&&{type:"cmmn:Association"})},i.prototype.canConnectDiscretionaryConnection=function(e,t,n){if(!G(D(e)))return!1;if(!v(e))return!1;if(!q(t))return!1;var i=D(e),r=D(t);if($(i,r))return!1;var o=U(e),a=U(t);if(!$(o,a))return!1;if(V(t)){if(!u(e,t,n))return!1;var s=U(B(t),"cmmn:HumanTask");if(!$(D(e),s)&&l(t,n))return!1}return!0},i.prototype.canConnectPlanItemOnPartConnection=function(e,t){return!!H(e,t)&&(b(e)&&(e=e.host),!$(e,t.host)&&(!r(e,t.host)&&((!_(t)||!r(t.host,e))&&(S(e)&&x(t)))))},i.prototype.canConnectCaseFileItemOnPartConnection=function(e,t){return!!(H(e,t)&&C(e)&&x(t))},i.prototype.canConnectAssociation=function(e,t){return!c(e)&&!c(t)&&(!r(t,e)&&!r(e,t))},i.prototype.canAttach=function(e,t,n,i){if($(n,t))return!1;if(Array.isArray(e)||(e=[e]),1!==e.length)return!1;var r=e[0];return!s(r)&&(!!x(r)&&(!t||!!this.canAttachCriterion(r,t,i,n)&&"attach"))},i.prototype.canAttachEntryCriterion=function(e,t,n,i){return!!this.canAttachCriterion(e,t,n,i)&&((!i||!r(t,i))&&(!O(t)&&(!f(t,!0)||!T(e.incoming,function(e){if(N(e.businessObject.cmmnElementRef,"cmmn:PlanItemOnPart"))return r(t,e.source)}))))},i.prototype.canAttachExitCriterion=function(e,t,n,i){return!!this.canAttachCriterion(e,t,n,i)&&(!g(t)&&!(y(t)&&!v(t)))},i.prototype.canAttachCriterion=function(e,t,n,i){return(!i||!r(i,t))&&(!x(t)&&(!m(t)&&(!f(t)&&(!E(t)&&(!C(t)&&!(n&&!K(n,t)))))))},i.prototype.canReplace=function(e,t,n,i){if(!t)return!1;if($(i,t))return!1;var r={replacements:[]},o=this;return k(e,function(a){if(_(a)&&!o.canAttachEntryCriterion(a,t,n,i)&&o.canAttachExitCriterion(a,t,n,i)&&r.replacements.push({oldElementId:a.id,newElementType:"cmmn:ExitCriterion"}),b(a)&&!o.canAttachExitCriterion(a,t,n,i)&&o.canAttachEntryCriterion(a,t,n,i)&&r.replacements.push({oldElementId:a.id,newElementType:"cmmn:EntryCriterion"}),f(t)&&q(a)&&o.canDrop(a,t)&&!o.canMoveDiscretionaryItem(a,e,t)){var s={oldElementId:a.id,newElementType:"cmmn:PlanItem"};f(a)&&A(s,{newDefinitionType:"cmmn:Stage"}),r.replacements.push(s)}}),!!r.replacements.length&&r},i.prototype.canReplaceConnectionEnd=function(e,t,n){return!(!e||!t)&&(!$(e,t)&&(!!H(e,t)&&("source"===n?this.canReplaceSource(e,t):this.canReplaceTarget(e,t))))},i.prototype.canReplaceSource=function(e,t){return q(e)&&x(t)?!$(e,t.host)&&(!f(e)&&(!r(e,t.host)&&((!_(t)||!r(t.host,e))&&{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0,replacements:[{oldElementId:e.id,newElementType:"cmmn:PlanItem"}]}))):!(!_(e)||!_(t))&&(!$(e.host,t.host)&&(!r(t.host,e.host)&&!r(e.host,t.host)&&(!h(e)&&(!!this.canAttachExitCriterion(e,e.host)&&{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0,replacements:[{oldElementId:e.id,newElementType:"cmmn:ExitCriterion"}]}))))},i.prototype.canReplaceTarget=function(e,t){return G(D(e))&&S(t)?!!v(e)&&(!m(t)&&!g(t)&&(!P(e,t)&&(!!M(e,t)&&{type:"cmmndi:CMMNEdge",replacements:[{oldElementId:t.id,newElementType:"cmmn:DiscretionaryItem"}]}))):!(!S(e)&&!b(e)||!_(t))&&(!$(e.host||e,t.host)&&(!!r(t.host,e.host||e)&&(!h(t)&&(!!this.canAttachExitCriterion(t,t.host)&&{type:"cmmn:PlanItemOnPart",isStandardEventVisible:!0,replacements:[{oldElementId:t.id,newElementType:"cmmn:ExitCriterion"}]}))))},i.prototype.canSetRepetitionRule=function(e){return o(e)},i.prototype.canSetRequiredRule=function(e){return o(e)},i.prototype.canSetManualActivationRule=function(e){return!g(e)&&o(e)}},{202:202,267:267,277:277,279:279,281:281,408:408,45:45,46:46,65:65,72:72,74:74}],61:[function(e,t,n){t.exports={__depends__:[e(204)],__init__:["cmmnRules"],cmmnRules:["type",e(60)]}},{204:204,60:60}],62:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}function r(e){return s(e,function(e){return!!e.matched}).length>0}function o(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(0!==r&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}var a=e(283),s=e(279),c=e(287),u=e(18);t.exports=i,i.$inject=["elementRegistry","searchPad","canvas"],i.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(e){return!e.labelTarget});return n=s(n,function(e){return e!==t}),n=a(n,function(t){return{primaryTokens:o(u.getLabel(t),e),secondaryTokens:o(t.id,e),element:t}}),n=s(n,function(e){return r(e.primaryTokens)||r(e.secondaryTokens)}),n=c(n,function(e){return u.getLabel(e.element)+e.element.id})}},{18:18,279:279,283:283,287:287}],63:[function(e,t,n){t.exports={__depends__:[e(206)],__init__:["cmmnSearch"],cmmnSearch:["type",e(62)]}},{206:206,62:62}],64:[function(e,t,n){"use strict";function i(e){return a(s(e),"cmmn:PlanFragment")}function r(e,t,n){function r(e,t,i){return"attach"===n.canAttach([e],t,null,i)}function o(e,t,n){var i=f(n),r=y(e,n);/top/.test(r)?d(e,"y",i.top):/bottom/.test(r)&&d(e,"y",i.bottom),/left/.test(r)?d(e,"x",i.left):/right/.test(r)&&d(e,"x",i.right)}u.call(this,e,t),e.on("resize.start",m+500,function(e){var t=e.context,n=t.shape;i(n)&&!c(n)&&(t.minDimensions={width:140,height:120}),a(n,"cmmn:TextAnnotation")&&(t.minDimensions={width:50,height:30})}),e.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(e){var t=e.context,n=t.target,i=t.shape;n&&!h(e)&&r(i,n,e)&&o(e,i,n)})}var o=e(267),a=e(74).is,s=e(74).getDefinition,c=e(72).isCollapsed,u=e(213),l=e(212),p=l.mid,h=l.isSnapped,d=l.setSnapped,f=e(222).asTRBL,m=1001,g=e(281),y=e(65).getCriterionAttachment;o(r,u),r.$inject=["eventBus","canvas","cmmnRules"],t.exports=r,r.prototype.addTargetSnaps=function(e,t,n){var i=this.getSiblings(t,n)||[];g(i,function(t){t.waypoints||e.add("mid",p(t))}),g(t.incoming,function(t){-1===i.indexOf(t.source)&&e.add("mid",p(t.source));var n=t.waypoints[0];e.add(t.id+"-docking",n.original||n)}),g(t.outgoing,function(t){-1===i.indexOf(t.target)&&e.add("mid",p(t.target));var n=t.waypoints[t.waypoints.length-1];e.add(t.id+"-docking",n.original||n)})}},{212:212,213:213,222:222,267:267,281:281,65:65,72:72,74:74}],65:[function(e,t,n){"use strict";function i(e,t,n,i){return e.x-i<t.x&&e.y-i<t.y?"corner":e.x+i>t.x+t.width&&e.y-i<t.y?"corner":e.x-i<t.x&&e.y+i>t.y+t.height?"corner":e.x+i>t.x+t.width&&e.y+i>t.y+t.height?"corner":o(e,t,n)}function r(e,t){var n,r=s(t);return n=a(t,"cmmn:PlanItem")&&a(r,"cmmn:Stage")?i(e,t,-15,20):a(r,"cmmn:Milestone")?i(e,t,-3,7):o(e,t,-15),"intersect"!==n?n:null}var o=e(222).getOrientation,a=e(74).is,s=e(74).getDefinition;t.exports.getCriterionAttachment=r},{222:222,74:74}],66:[function(e,t,n){t.exports={__init__:["snapping"],snapping:["type",e(64)]}},{64:64}],67:[function(e,t,n){"use strict";function i(e,t){return s({id:e.id,type:e.$type,businessObject:e},t)}function r(e){return c(e,function(e){return{x:e.x,y:e.y}})}function o(e,t,n){return new Error("element "+f(t)+" referenced by "+f(e)+"#"+n+" not yet drawn")}function a(e,t,n,i){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i}var s=e(408),c=e(283),u=e(73),l=e(74).is,p=u.hasExternalLabel,h=u.getExternalLabelBounds,d=e(72).isCollapsed,f=e(70).elementToString;a.$inject=["eventBus","canvas","elementFactory","elementRegistry"],t.exports=a,a.prototype.root=function(e){var t=this._elementFactory.createRoot(i(e));return this._canvas.setRootElement(t),t},a.prototype.add=function(e,t){var n,o,a=e.di;if(a&&l(a,"cmmndi:CMMNShape")&&!this._getElement(e)){var s=d(e);o=t&&(t.hidden||t.collapsed);var c=e.di.bounds;n=this._elementFactory.createShape(i(e,{collapsed:s,hidden:o,x:Math.round(c.x),y:Math.round(c.y),width:Math.round(c.width),height:Math.round(c.height)})),l(e,"cmmn:Criterion")&&this._attachCriterion(e,n),this._canvas.addShape(n,t)}else{if(!(a&&l(a,"cmmndi:CMMNEdge")||l(e,"cmmndi:CMMNEdge")))throw new Error("unknown di "+f(a)+" for element "+f(e));var u=this._getSource(e),h=this._getTarget(e);o=t&&(t.hidden||t.collapsed)||u&&u.hidden||h&&h.hidden;var m=(e.di||{}).waypoint||e.waypoint;n=this._elementFactory.createConnection(i(e,{hidden:o,source:u,target:h,waypoints:r(m)})),this._canvas.addConnection(n,t)}return p(e)&&this.addLabel(e,n),this._eventBus.fire("cmmnElement.added",{element:n}),n},a.prototype._attachCriterion=function(e,t){var n=e.$parent;if(!n)throw new Error("missing "+f(e)+"$parent");var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw o(e,n,"criterion");t.host=i,r||(i.attachers=r=[]),-1===r.indexOf(t)&&r.push(t)},a.prototype.addLabel=function(e,t){var n=h(e,t),r=this._elementFactory.createLabel(i(e,{id:e.id+"_label",labelTarget:t,type:"label",hidden:t.hidden,x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}));return this._canvas.addShape(r,t.parent)},a.prototype._getSource=function(e){var t=e.cmmnElementRef;if(t){if(l(t,"cmmn:OnPart"))return t.exitCriterionRef?this._getEnd(t,"exitCriterionRef"):this._getEnd(t,"sourceRef");if(l(t,"cmmn:Association"))return this._getEnd(t,"sourceRef")}if(l(e,"cmmndi:CMMNEdge"))return this._getEnd(e,"sourceCMMNElementRef")},a.prototype._getTarget=function(e){var t=e.cmmnElementRef;return t&&l(t,"cmmn:Association")?this._getEnd(t,"targetRef"):this._getEnd(e,"targetCMMNElementRef")},a.prototype._getEnd=function(e,t){var n=e[t],i=n&&this._getElement(n);if(i)return i;throw n?o(e,n,t):new Error(f(e)+"#"+t+"Ref not specified")},a.prototype._getElement=function(e){return this._elementRegistry.get(e.id)}},{283:283,408:408,70:70,72:72,73:73,74:74}],68:[function(e,t,n){"use strict";function i(e){function t(e){return!!V[e.id]}function n(e){V[e.id]=e}function i(e){for(;e&&!c(e,"cmmn:Case");)e=e.$parent;return e}function a(t,n){return e.element(t,n)}function p(t,n){return e.root(t,n)}function h(t,n){try{return e.addItem(t),t.di&&a(t,n)}catch(e){d(e.message,{element:t,error:e}),console.error("failed to import "+s(t)),console.error(e)}}function d(t,n){e.error(t,n)}function f(e,t){return function(n){e(n,t)}}function m(e){var t=e.cmmnElementRef;if(t&&!c(e,"cmmndi:CMMNEdge"))if(t.di)d("multiple DI elements defined for "+s(t),{element:t});else{var n=i(t);n&&-1===W.indexOf(n)&&W.push(n),(c(t,"cmmn:TextAnnotation")||c(t,"cmmn:CaseFileItem"))&&G.push(t),l.bind(t,"di"),t.di=e}else if(c(e,"cmmndi:CMMNEdge")){var r=!0;if(g(e)||(r=!1,d("no target referenced in "+s(e),{element:e})),y(e)||(r=!1,d("no source referenced in "+s(e),{element:e})),r)if(c(t,"cmmn:Association"))q.push(e);else if(t)H.push(function(t){v(e,t)});else{var o=e.sourceCMMNElementRef;U[o.id]=U[o.id]||[],U[o.id].push(e)}}else d("no cmmnElement referenced in "+s(e),{element:e})}function g(e){return c(e.cmmnElementRef,"cmmn:Association")?!!e.cmmnElementRef.targetRef:!!e.targetCMMNElementRef}function y(e){return c(e.cmmnElementRef,"cmmn:OnPart")?!(!e.cmmnElementRef.exitCriterionRef&&!e.cmmnElementRef.sourceRef):c(e.cmmnElementRef,"cmmn:Association")?!!e.cmmnElementRef.sourceRef:!!e.sourceCMMNElementRef}function v(e,t){a(e,t)}function x(e){_(e.diagramElements)}function _(e){r(e,b)}function b(e){m(e)}function w(e,t){var n=e.CMMNDI;if(n){var i=n.diagrams;if(t&&-1===i.indexOf(t))throw new Error("diagram not part of cmmn:Definitions");!t&&i&&i.length&&(t=i[0]),x(t);var o=p(t,t);E(W,o),r(G,f(O)),r(q,f(L))}}function E(e,t){r(e,function(e){C(e,t),$=[],H=[]})}function C(e,t){var n,i=e.casePlanModel;i&&(n=S(i,t)),M($),r(H,function(e){e(n)})}function S(e,t){var n=h(e,t);return r(e.exitCriteria,f(j,n)),P(e,n),N(e,n),n}function M(e){r(e,function(e){e()})}function P(e,t){A(e.planItems,t),c(e,"cmmn:Stage")&&R(e,t)}function R(e,t){T(e.planningTable,t)}function T(e,t){e&&r(e.tableItems,function(e){c(e,"cmmn:DiscretionaryItem")?k(e,t):c(e,"cmmn:PlanningTable")&&T(e,t)})}function k(e,i){t(e)||(n(e),I(e,i))}function A(e,t){r(e,f(I,t))}function I(e,t){var n=h(e,t);r(e.exitCriteria,f(j,t)),r(e.entryCriteria,f(j,t));var i=e.definitionRef;if(c(i,"cmmn:PlanFragment"))P(i,n),N(e,n);else if(c(i,"cmmn:HumanTask")){T(i.planningTable,t);var o=U[e.id];r(o,f(z,t)),delete U[e.id]}}function j(e,t){$.unshift(function(){h(e,t)})}function N(e,t){if(e.di&&e.di.bounds){var n=F(G,e);r(n,function(e){u.remove(G,e),O(e,t)})}}function O(e,t){c(e,"cmmn:TextAnnotation")?B(e,t):c(e,"cmmn:CaseFileItem")&&D(e,t)}function D(e,t){h(e,t)}function B(e,t){h(e,t)}function L(e,t){a(e,t)}function z(e,t){$.push(function(){a(e,t)})}function F(e,t){var n=t.di.bounds;return o(e,function(e){return e.di.bounds.x>n.x&&e.di.bounds.x<n.x+n.width&&e.di.bounds.y>n.y&&e.di.bounds.y<n.y+n.height})}var $=[],H=[],U={},W=[],V={},G=[],q=[];return{handleDefinitions:w}}var r=e(281),o=e(279),a=e(438),s=e(70).elementToString,c=e(74).is,u=e(232),l=new a({name:"cmmnElement",enumerable:!0},{name:"di"});t.exports=i},{232:232,279:279,281:281,438:438,70:70,74:74}],69:[function(e,t,n){"use strict";function i(e,t,n){var i,o=e.get("cmmnImporter"),a=e.get("eventBus"),s=e.get("itemRegistry"),c=[];a.fire("import.render.start",{definitions:t});try{!function(e){new r({root:function(e){return o.root(e)},element:function(e,t){return o.add(e,t)},error:function(e,t){c.push({message:e,context:t})},addItem:function(e){s.add(e)}}).handleDefinitions(e)}(t)}catch(e){i=e}a.fire("import.render.complete",{error:i,warnings:c}),n(i,c)}var r=e(68);t.exports.importCmmnDiagram=i},{68:68}],70:[function(e,t,n){"use strict";t.exports.elementToString=function(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}},{}],71:[function(e,t,n){t.exports={cmmnImporter:["type",e(67)]}},{67:67}],72:[function(e,t,n){"use strict";var i=e(74).is,r=e(74).getBusinessObject,o=e(74).isCasePlanModel;t.exports.isCollapsed=function(e){if(!o(e)){e=r(e);var t=e.definitionRef;if(i(t,"cmmn:PlanFragment"))return!!(e&&e.di&&e.di.isCollapsed)}return!1},t.exports.isPlanningTableCollapsed=function(e){return e=r(e),!!(i(e,"cmmn:Stage")||e.definitionRef&&(i(e.definitionRef,"cmmn:Stage")||i(e.definitionRef,"cmmn:HumanTask")))&&(e.di&&e.di.isPlanningTableCollapsed)},t.exports.isStandardEventVisible=function(e){e=r(e);var t=e.cmmnElementRef;return!(!i(t,"cmmn:OnPart")||!e.isStandardEventVisible)}},{74:74}],73:[function(e,t,n){"use strict";var i=e(74).is,r=e(408),o=t.exports.DEFAULT_LABEL_SIZE={width:90,height:20};t.exports.hasExternalLabel=function(e){return(i(e,"cmmn:PlanItem")||i(e,"cmmn:DiscretionaryItem"))&&(e=e.definitionRef),i(e,"cmmndi:CMMNEdge")&&e.cmmnElementRef&&i(e.cmmnElementRef,"cmmn:OnPart")&&(e=e.cmmnElementRef),i(e,"cmmn:EventListener")||i(e,"cmmn:OnPart")||i(e,"cmmn:CaseFileItem")};var a=t.exports.getWaypointsMid=function(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}},s=t.exports.getExternalLabelMid=function(e){var t=e.businessObject,n=t.di;return!n&&i(t,"cmmndi:CMMNEdge")&&t.cmmnElementRef&&(n=t),t&&n&&n.waypoint?a(n.waypoint):{x:e.x+e.width/2,y:e.y+e.height+o.height/2}};t.exports.getExternalLabelBounds=function(e,t){var n,i,a,c=e.di||e,u=c.label;return u&&u.bounds?(a=u.bounds,i={width:Math.max(o.width,a.width),height:a.height},n={x:a.x+a.width/2,y:a.y+a.height/2}):(n=s(t),i=o),r({x:n.x-i.width/2,y:n.y-i.height/2},i)};var c=t.exports.hasLabelBounds=function(e){return e&&e.di&&e.di.label&&e.di.label.bounds};t.exports.getLabelBounds=function(e){if(c(e))return e.di.label.bounds}},{408:408,74:74}],74:[function(e,t,n){"use strict";function i(e,t){return!(!e||"function"!=typeof e.$instanceOf||!e.$instanceOf(t))}function r(e,t){return i(o(e),t)}function o(e){return e&&e.businessObject?e.businessObject:e}function a(e){return e=o(e),r(e,"cmmn:Stage")&&e.$parent&&r(e.$parent,"cmmn:Case")}function s(e){var t=o(e);return r(e,"cmmn:PlanItemDefinition")||r(e,"cmmn:CaseFileItemDefinition")?t:t&&t.definitionRef}function c(e){var t=s(e);return t&&t.defaultControl}function u(e){return(e=o(e))&&e.itemControl}function l(e,t){var n=u(e),i=c(e);return n&&n[t]?n[t]:i&&i[t]}function p(e){return!!l(e,"requiredRule")}function h(e){return!!l(e,"repetitionRule")}function d(e){return!!l(e,"manualActivationRule")}function f(e){e=o(e);var t=s(e);return e.autoComplete||t&&t.autoComplete}function m(e){return e=o(e),e.planningTable||s(e)&&s(e).planningTable}function g(e){e=o(e),r(e,"cmmndi:CMMNEdge")&&e.cmmnElementRef&&(e=e.cmmnElementRef);var t=e.name;return t||e.definitionRef&&(t=e.definitionRef.name),t}function y(e){var t=o(e);return r(t,"cmmn:Sentry")?t:t&&t.sentryRef}function v(e){return e=o(e),e.cmmnElementRef&&e.cmmnElementRef.standardEvent}function x(e){return r(e,"cmmndi:CMMNEdge")&&(e=o(e).cmmnElementRef),r(e,"cmmn:OnPart")?r(e.exitCriterionRef,"cmmn:ExitCriterion")?["exit"]:_(e.sourceRef):[]}function _(e){if(e=o(e),r(e,"cmmn:CaseFileItem"))return["addChild","addReference","create","delete","removeChild","removeReference","replace","update"];if(r(e,"cmmn:PlanItem")||r(e,"cmmn:DiscretionaryItem")){var t=s(e);return r(t,"cmmn:EventListener")||r(t,"cmmn:Milestone")?["create","occur","resume","suspend","terminate"]:["complete","create","disable","enable","exit","fault","manualStart","parentResume","parentSuspend","reactivate","reenable","resume","start","suspend","terminate"]}return a(e)?["close","complete","create","fault","reactivate","suspend","terminate"]:[]}t.exports.is=r,t.exports.getBusinessObject=o,t.exports.isCasePlanModel=a,t.exports.getDefinition=s,t.exports.getDefaultControl=c,t.exports.getItemControl=u,t.exports.isRequired=p,t.exports.isRepeatable=h,t.exports.isManualActivation=d,t.exports.isAutoComplete=f,t.exports.hasPlanningTable=m,t.exports.getName=g,t.exports.getSentry=y,t.exports.getStandardEvent=v,t.exports.getStandardEvents=x,t.exports.getTransitions=_},{}],75:[function(e,t,n){"use strict";function i(e){return e.join(";")}function r(){o||(o=a(d),s.bind(o,".backdrop","click",function(e){document.body.removeChild(o)})),document.body.appendChild(o)}var o,a=e(422),s=e(421),c="data:image/svg+xml;utf8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 960"><path fill="#fff" d="M960 60v839c0 33-27 61-60 61H60c-33 0-60-27-60-60V60C0 27 27 0 60 0h839c34 0 61 27 61 60z"/><path fill="#52b415" d="M217 548a205 205 0 0 0-144 58 202 202 0 0 0-4 286 202 202 0 0 0 285 3 200 200 0 0 0 48-219 203 203 0 0 0-185-128zM752 6a206 206 0 0 0-192 285 206 206 0 0 0 269 111 207 207 0 0 0 111-260A204 204 0 0 0 752 6zM62 0A62 62 0 0 0 0 62v398l60 46a259 259 0 0 1 89-36c5-28 10-57 14-85l99 2 12 85a246 246 0 0 1 88 38l70-52 69 71-52 68c17 30 29 58 35 90l86 14-2 100-86 12a240 240 0 0 1-38 89l43 58h413c37 0 60-27 60-61V407a220 220 0 0 1-44 40l21 85-93 39-45-76a258 258 0 0 1-98 1l-45 76-94-39 22-85a298 298 0 0 1-70-69l-86 22-38-94 76-45a258 258 0 0 1-1-98l-76-45 40-94 85 22a271 271 0 0 1 41-47z"/></svg>'),u='<img width="52" height="52" src="'+c+'" />',l=i(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),p=i(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"]),h=i(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"]),d='<div class="bjs-powered-by-lightbox" style="'+l+'"><div class="backdrop" style="'+p+'"></div><div class="notice" style="'+h+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px">'+u+'</a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io</a>.</div></div>';t.exports.open=r,t.exports.BPMNIO_IMG=u},{421:421,422:422}],76:[function(e,t,n){var i=e(77);t.exports=function(e,t,n){for(var r=n?e:e.parentNode;r&&r!==document;){if(i(r,t))return r;r=r.parentNode}}},{77:77}],77:[function(e,t,n){function i(e,t){if(o)return o.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;++i)if(n[i]==e)return!0;return!1}var r=Element.prototype,o=r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=i},{}],78:[function(e,t,n){t.exports=e(80)},{80:80}],79:[function(e,t,n){"use strict";function i(e,t){s.call(this,e,t)}var r=e(405),o=e(400),a=e(408),s=e(429),c=e(427),u=e(428);i.prototype=Object.create(s.prototype),t.exports=i,i.prototype.fromXML=function(e,t,n,i){r(t)||(i=n,n=t,t="cmmn:Definitions"),o(n)&&(i=n,n={});var s=new c(a({model:this,lax:!0},n)),u=s.handler(t);s.fromXML(e,u,i)},i.prototype.toXML=function(e,t,n){o(t)&&(n=t,t={});var i=new u(t);try{var r=i.toXML(e);n(null,r)}catch(e){n(e)}}},{400:400,405:405,408:408,427:427,428:428,429:429}],80:[function(e,t,n){"use strict";var i=e(408),r=e(79),o={cmmn:e(81),cmmndi:e(82),dc:e(83),di:e(84)};t.exports=function(e,t){return new r(i({},o,e),t)}},{408:408,79:79,81:81,82:82,83:83,84:84}],81:[function(e,t,n){t.exports={name:"CMMN",uri:"http://www.omg.org/spec/CMMN/20151109/MODEL",types:[{name:"ApplicabilityRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["CMMNElement"]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"CMMNElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"CMMNElement",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"ManualActivationRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Case",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"caseFileModel",type:"CaseFile",xml:{serialize:"property"}},{name:"casePlanModel",type:"Stage",xml:{serialize:"property"}},{name:"caseRoles",type:"CaseRoles"},{name:"input",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}}]},{name:"CaseFile",superClass:["CMMNElement"],properties:[{name:"caseFileItems",type:"CaseFileItem",isMany:!0}]},{name:"CaseFileItem",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"multiplicity",type:"String",isAttr:!0,default:"Unspecified"},{name:"definitionRef",type:"CaseFileItemDefinition",isAttr:!0,isReference:!0},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"targetRefs",type:"CaseFileItem",isAttr:!0,isReference:!0,isMany:!0},{name:"children",type:"Children",xml:{serialize:"property"}}]},{name:"CaseFileItemDefinition",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"definitionType",type:"String",default:"http://www.omg.org/spec/CMMN/DefinitionType/Unspecified",isAttr:!0},{name:"properties",type:"Property",isMany:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"importRef",type:"Import",isAttr:!0,isReference:!0}]},{name:"CaseFileItemOnPart",superClass:["OnPart"],properties:[{name:"standardEvent",type:"String"},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"CaseParameter",superClass:["Parameter"],properties:[{name:"bindingRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"bindingRefinement",type:"Expression",xml:{serialize:"property"}}]},{name:"CaseRoles",superClass:["Parameter"],properties:[{name:"role",type:"Role",isMany:!0}]},{name:"CaseTask",superClass:["Task"],properties:[{name:"parameterMapping",type:"ParameterMapping",isMany:!0},{name:"caseRefExpression",type:"Expression",xml:{serialize:"property"}},{name:"caseRef",type:"String",isAttr:!0}]},{name:"Children",superClass:["CMMNElement"],properties:[{name:"caseFileItems",type:"CaseFileItem",isMany:!0}]},{name:"CMMNElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionElements",type:"ExtensionElements"},{name:"extensionDefinitions",type:"ExtensionDefinition",isReference:!0,isMany:!0}]},{name:"Definitions",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",type:"String",isAttr:!0},{name:"expressionLanguage",type:"String",isAttr:!0,default:"http://www.w3.org/1999/XPath"},{name:"exporter",isAttr:!0,type:"String"},{
name:"exporterVersion",isAttr:!0,type:"String"},{name:"author",isAttr:!0,type:"String"},{name:"creationDate",type:"DateTime",isAttr:!0},{name:"imports",type:"Import",isMany:!0},{name:"caseFileItemDefinitions",type:"CaseFileItemDefinition",isMany:!0},{name:"cases",type:"Case",isMany:!0},{name:"processes",type:"Process",isMany:!0},{name:"decisions",type:"Decision",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"relationships",type:"Relationship",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"CMMNDI",type:"cmmndi:CMMNDI"}]},{name:"DiscretionaryItem",superClass:["TableItem"],properties:[{name:"itemControl",type:"PlanItemControl",xml:{serialize:"property"}},{name:"definitionRef",type:"PlanItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"entryCriteria",type:"EntryCriterion",isMany:!0},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"EventListener",superClass:["PlanItemDefinition"]},{name:"Expression",superClass:["CMMNElement"],properties:[{name:"language",type:"String",isAttr:!0},{name:"body",isBody:!0,type:"String"}]},{name:"HumanTask",superClass:["Task"],properties:[{name:"planningTable",type:"PlanningTable"},{name:"performerRef",type:"Role",isAttr:!0,isReference:!0}]},{name:"IfPart",superClass:["CMMNElement"],properties:[{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0},{name:"condition",type:"Expression",xml:{serialize:"property"}}]},{name:"Import",properties:[{name:"location",isAttr:!0,type:"String"},{name:"namespace",type:"String",isAttr:!0},{name:"importType",isAttr:!0,type:"String"}]},{name:"Milestone",superClass:["PlanItemDefinition"]},{name:"On",isAbstract:!0,superClass:["CMMNElement"]},{name:"OnPart",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"Parameter",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ParameterMapping",properties:[{name:"sourceRef",type:"Parameter",isAttr:!0,isReference:!0},{name:"targetRef",type:"Parameter",isAttr:!0,isReference:!0},{name:"transformation",type:"Expression",xml:{serialize:"property"}}]},{name:"PlanFragment",superClass:["PlanItemDefinition"],properties:[{name:"planItems",type:"PlanItem",isMany:!0},{name:"sentries",type:"Sentry",isMany:!0}]},{name:"PlanItem",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"definitionRef",type:"PlanItemDefinition",isAttr:!0,isReference:!0},{name:"itemControl",type:"PlanItemControl",xml:{serialize:"property"}},{name:"entryCriteria",type:"EntryCriterion",isMany:!0},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"PlanItemControl",superClass:["CMMNElement"],properties:[{name:"repetitionRule",type:"RepetitionRule"},{name:"requiredRule",type:"RequiredRule"},{name:"manualActivationRule",type:"ManualActivationRule"}]},{name:"PlanItemDefinition",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"defaultControl",type:"PlanItemControl",xml:{serialize:"property"}}]},{name:"PlanItemOnPart",superClass:["OnPart"],properties:[{name:"standardEvent",type:"String"},{name:"sourceRef",type:"PlanItem",isAttr:!0,isReference:!0},{name:"exitCriterionRef",type:"ExitCriterion",isAttr:!0,isReference:!0}]},{name:"PlanningTable",superClass:["TableItem"],properties:[{name:"tableItems",type:"TableItem",isMany:!0},{name:"applicabilityRules",type:"ApplicabilityRule",isMany:!0}]},{name:"Process",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"implementationType",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/ProcessType/Unspecified"},{name:"externalRef",type:"String",isAttr:!0},{name:"input",type:"ProcessParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"ProcessParameter",isMany:!0,xml:{serialize:"property"}}]},{name:"ProcessParameter",superClass:["Parameter"]},{name:"ProcessTask",superClass:["Task"],properties:[{name:"parameterMapping",type:"ParameterMapping",isMany:!0},{name:"processRefExpression",type:"Expression",xml:{serialize:"property"}},{name:"processRef",type:"String",isAttr:!0}]},{name:"Property",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/PropertyType/Unspecified"}]},{name:"RepetitionRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"RequiredRule",superClass:["CMMNElement"],properties:[{name:"condition",type:"Expression",xml:{serialize:"property"}},{name:"name",isAttr:!0,type:"String"},{name:"contextRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Role",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"Sentry",superClass:["CMMNElement"],properties:[{name:"onParts",type:"OnPart",isMany:!0},{name:"ifPart",type:"IfPart"},{name:"name",isAttr:!0,type:"String"}]},{name:"Stage",superClass:["PlanFragment"],properties:[{name:"planningTable",type:"PlanningTable"},{name:"planItemDefinitions",type:"PlanItemDefinition",isMany:!0},{name:"autoComplete",isAttr:!0,type:"Boolean"},{name:"exitCriteria",type:"ExitCriterion",isMany:!0}]},{name:"TableItem",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"authorizedRoleRefs",type:"Role",isAttr:!0,isReference:!0,isMany:!0},{name:"applicabilityRuleRefs",type:"ApplicabilityRule",isAttr:!0,isReference:!0,isMany:!0}]},{name:"Task",superClass:["PlanItemDefinition"],properties:[{name:"input",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"CaseParameter",isMany:!0,xml:{serialize:"property"}},{name:"isBlocking",isAttr:!0,default:!0,type:"Boolean"}]},{name:"TimerEventListener",superClass:["EventListener"],properties:[{name:"timerExpression",type:"Expression",xml:{serialize:"property"}},{name:"timerStart",type:"StartTrigger"}]},{name:"UserEventListener",superClass:["EventListener"],properties:[{name:"authorizedRoleRefs",type:"Role",isMany:!0,isAttr:!0}]},{name:"DateTime",superClass:[]},{name:"StartTrigger",isAbstract:!0,superClass:["CMMNElement"]},{name:"PlanItemStartTrigger",superClass:["StartTrigger"],properties:[{name:"standardEvent",type:"String",isAttr:!0},{name:"sourceRef",type:"PlanItem",isAttr:!0,isReference:!0}]},{name:"CaseFileItemStartTrigger",superClass:["StartTrigger"],properties:[{name:"standardEvent",type:"String",isAttr:!0},{name:"sourceRef",type:"CaseFileItem",isAttr:!0,isReference:!0}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition"}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",isAttr:!0,default:!1,type:"Boolean"}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Relationship",properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,type:"Element"},{name:"target",isMany:!0,type:"Element"}]},{name:"Documentation",superClass:["CMMNElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"DecisionTask",superClass:["Task"],properties:[{name:"mappings",type:"ParameterMapping",isMany:!0},{name:"decisionRef",type:"String",isAttr:!0},{name:"decisionRefExpression",type:"Expression",xml:{serialize:"property"}}]},{name:"Decision",superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"implementationType",type:"String",isAttr:!0,default:"http://www.omg.org/spec/CMMN/DecisionType/Unspecified"},{name:"input",type:"DecisionParameter",isMany:!0,xml:{serialize:"property"}},{name:"output",type:"DecisionParameter",isMany:!0,xml:{serialize:"property"}},{name:"externalRef",type:"String",isAttr:!0}]},{name:"DecisionParameter",superClass:["Parameter"]},{name:"Criterion",isAbstract:!0,superClass:["CMMNElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sentryRef",type:"Sentry",isAttr:!0,isReference:!0}]},{name:"EntryCriterion",superClass:["Criterion"]},{name:"ExitCriterion",superClass:["Criterion"]}],emumerations:[{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"CaseFileItemTransition",literalValues:[{name:"addChild"},{name:"addReference"},{name:"create"},{name:"delete"},{name:"removeChild"},{name:"removeReference"},{name:"replace"},{name:"update"}]},{name:"MultiplicityEnum",literalValues:[{name:"ZeroOrOne"},{name:"ZeroOrMore"},{name:"ExactlyOne"},{name:"OneOrMore"},{name:"Unspecified"},{name:"Unknown"}]},{name:"PlanItemTransition",literalValues:[{name:"close"},{name:"complete"},{name:"create"},{name:"disable"},{name:"enable"},{name:"exit"},{name:"fault"},{name:"manualStart"},{name:"occur"},{name:"parentResume"},{name:"parentSuspend"},{name:"reactivate"},{name:"reenable"},{name:"resume"},{name:"start"},{name:"suspend"},{name:"terminate"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]}],associations:[],xml:{tagAlias:"lowerCase",typePrefix:"t"},prefix:"cmmn"}},{}],82:[function(e,t,n){t.exports={name:"CMMNDI",uri:"http://www.omg.org/spec/CMMN/20151109/CMMNDI",types:[{name:"CMMNDI",properties:[{name:"diagrams",type:"CMMNDiagram",isMany:!0},{name:"styles",type:"CMMNStyle",isMany:!0}]},{name:"CMMNDiagram",properties:[{name:"cmmnElementRef",isAttr:!0,type:"cmmn:CMMNElement",isReference:!0},{name:"Size",type:"dc:Dimension",xml:{serialize:"xsi:type"}},{name:"diagramElements",type:"CMMNDiagramElement",isMany:!0}],superClass:["di:Diagram"]},{name:"CMMNDiagramElement",superClass:["di:DiagramElement"]},{name:"CMMNShape",properties:[{name:"cmmnElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"label",type:"CMMNLabel"},{name:"isCollapsed",isAttr:!0,type:"Boolean"},{name:"isPlanningTableCollapsed",isAttr:!0,type:"Boolean"}],superClass:["CMMNDiagramElement","di:Shape"]},{name:"CMMNEdge",properties:[{name:"label",type:"CMMNLabel"},{name:"cmmnElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"sourceCMMNElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"targetCMMNElementRef",isAttr:!0,isReference:!0,type:"cmmn:CMMNElement"},{name:"isStandardEventVisible",type:"Boolean",isAttr:!0}],superClass:["CMMNDiagramElement","di:Edge"]},{name:"CMMNLabel",superClass:["di:Shape"]},{name:"CMMNStyle",properties:[{name:"FillColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"StrokeColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"FontColor",type:"dc:Color",xml:{serialize:"xsi:type"}},{name:"fontFamily",type:"String",isAttr:!0},{name:"fontSize",type:"Real",isAttr:!0},{name:"fontItalic",type:"Boolean",isAttr:!0},{name:"fontBold",type:"Boolean",isAttr:!0},{name:"fontUnderline",type:"Boolean",isAttr:!0},{name:"fontStrikeThrough",type:"Boolean",isAttr:!0}],superClass:["di:Style"]}],associations:[],prefix:"cmmndi"}},{}],83:[function(e,t,n){t.exports={name:"DC",uri:"http://www.omg.org/spec/CMMN/20151109/DC",types:[{name:"rgb"},{name:"Real"},{name:"Color",properties:[{name:"red",type:"rgb",isAttr:!0},{name:"green",type:"rgb",isAttr:!0},{name:"blue",type:"rgb",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",isAttr:!0},{name:"y",type:"Real",isAttr:!0}]},{name:"Dimension",properties:[{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",isAttr:!0},{name:"y",type:"Real",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}},{}],84:[function(e,t,n){t.exports={name:"DI",uri:"http://www.omg.org/spec/CMMN/20151109/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"style",type:"Style"},{name:"sharedStyle",type:"Style",isReference:!0,isAttr:!0},{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"waypoint",isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"name",type:"String",isAttr:!0},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,default:300,type:"double"}]},{name:"Shape",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"extension",type:"Extension"},{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}}},{}],85:[function(e,t,n){function i(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}try{var r=e(87)}catch(t){var r=e(87)}var o=/\s+/,a=Object.prototype.toString;t.exports=function(e){return new i(e)},i.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},i.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},i.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},i.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},i.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(o);return""===n[0]&&n.shift(),n},i.prototype.has=i.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},{87:87}],86:[function(e,t,n){var i=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",o="addEventListener"!==i?"on":"";n.bind=function(e,t,n,r){return e[i](o+t,n,r||!1),n},n.unbind=function(e,t,n,i){return e[r](o+t,n,i||!1),n}},{}],87:[function(e,t,n){t.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],88:[function(e,t,n){function i(e,t){return t.querySelector(e)}n=t.exports=function(e,t){return t=t||document,i(e,t)},n.all=function(e,t){return t=t||document,t.querySelectorAll(e)},n.engine=function(e){if(!e.one)throw new Error(".one callback required");if(!e.all)throw new Error(".all callback required");return i=e.one,n.all=e.all,n}},{}],89:[function(e,t,n){var i=e(76),r=e(86),o=["focus","blur"];n.bind=function(e,t,n,a,s){return-1!==o.indexOf(n)&&(s=!0),r.bind(e,n,function(n){var r=n.target||n.srcElement;n.delegateTarget=i(r,t,!0,e),n.delegateTarget&&a.call(e,n)},s)},n.unbind=function(e,t,n,i){-1!==o.indexOf(t)&&(i=!0),r.unbind(e,t,n,i)}},{76:76,86:86}],90:[function(e,t,n){t.exports={__depends__:[e(147)],__init__:["directEditing"],directEditing:["type",e(91)]}},{147:147,91:91}],91:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._providers=[],this._textbox=new a({container:t.getContainer(),keyHandler:r(this._handleKey,this),resizeHandler:r(this._handleResize,this)})}var r=e(289),o=e(280),a=e(92);i.$inject=["eventBus","canvas"],i.prototype.registerProvider=function(e){this._providers.push(e)},i.prototype.isActive=function(){return!!this._active},i.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},i.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},i.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0},i.prototype.complete=function(){var e=this._active;if(e){var t=this.getValue(),n=this.$textbox.getBoundingClientRect();(t!==e.context.text||this.resizable)&&e.provider.update(e.element,t,e.context.text,{x:n.top,y:n.left,width:n.width,height:n.height}),this._fire("complete"),this.close()}},i.prototype.getValue=function(){return this._textbox.getValue()},i.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;return 27===t?(e.preventDefault(),this.cancel()):13!==t||e.shiftKey?void 0:(e.preventDefault(),this.complete())},i.prototype._handleResize=function(e){this._fire("resize",e)},i.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=o(this._providers,function(n){return(t=n.activate(e))?n:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t},t.exports=i},{280:280,289:289,92:92}],92:[function(e,t,n){"use strict";function i(e){e.preventDefault()}function r(e){e.stopPropagation()}function o(e){return e.nodeType===Node.TEXT_NODE}function a(e){return[].slice.call(e)}function s(e){this.container=e.container,this.parent=document.createElement("div"),this.content=document.createElement("div"),this.parent.appendChild(this.content),p(this.content,"contentEditable","true"),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=u(this.autoResize,this),this.handlePaste=u(this.handlePaste,this)}var c=e(408),u=e(289),l=e(414),p=e(93),h=e(94),d=e(95),f=e(96),m=Math.min,g=Math.max;t.exports=s,s.prototype.create=function(e,t,n,i){var o=this,a=this.parent,s=this.content,u=this.container;i=this.options=i||{},t=this.style=t||{};var p=l(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);c(a.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",wordWrap:"normal",textAlign:"center",outline:"none"},p);var h=l(t,["fontSize","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return c(s.style,{boxSizing:"border-box",width:"100%",outline:"none"},h),i.centerVertically&&c(s.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},h),s.innerText=n,d.bind(s,"keydown",this.keyHandler),d.bind(s,"mousedown",r),d.bind(s,"paste",o.handlePaste),i.autoResize&&d.bind(s,"input",this.autoResize),i.resizable&&this.resizable(t),u.appendChild(a),this.setSelection(s.lastChild,s.lastChild&&s.lastChild.length),a},s.prototype.handlePaste=function(e){var t=this,n=this.options,i=this.style;e.preventDefault();var r;if(r=e.clipboardData?e.clipboardData.getData("text/plain"):window.clipboardData.getData("Text"),!document.execCommand("insertHTML",!1,r)){var s,c,u=this.getSelection(),l=u.startContainer,p=u.endContainer,h=u.startOffset,d=u.endOffset,m=u.commonAncestorContainer,g=a(m.childNodes);if(o(m)){var y=l.textContent;l.textContent=y.substring(0,h)+r+y.substring(d),s=l,c=h+r.length}else if(l===this.content&&p===this.content){var v=document.createTextNode(r);this.content.insertBefore(v,g[h]),s=v,c=v.textContent.length}else{var x=g.indexOf(l),_=g.indexOf(p);g.forEach(function(e,t){t===x?e.textContent=l.textContent.substring(0,h)+r+p.textContent.substring(d):t>x&&t<=_&&f(e)}),s=l,c=h+r.length}s&&void 0!==c&&setTimeout(function(){t.setSelection(s,c)})}if(n.autoResize){var b=this.autoResize(i);b&&this.resizeHandler(b)}},s.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},s.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,o=parseInt(this.style.minWidth)||0,a=parseInt(this.style.minHeight)||0,s=parseInt(this.style.maxWidth)||1/0,u=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=document.createElement("div"),h(n).add("djs-direct-editing-resize-handle");var l,p,f,y,v=function(e){i(e),r(e),l=e.clientX,p=e.clientY;var n=t.getBoundingClientRect();f=n.width,y=n.height,d.bind(document,"mousemove",x),d.bind(document,"mouseup",_)},x=function(n){i(n),r(n);var c=m(g(f+n.clientX-l,o),s),h=m(g(y+n.clientY-p,a),u);t.style.width=c+"px",t.style.height=h+"px",e.resizeHandler({width:f,height:y,dx:n.clientX-l,dy:n.clientY-p})},_=function(e){i(e),r(e),d.unbind(document,"mousemove",x,!1),d.unbind(document,"mouseup",_,!1)};d.bind(n,"mousedown",v)}c(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},s.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),d.unbind(t,"keydown",this.keyHandler),d.unbind(t,"mousedown",r),d.unbind(t,"input",this.autoResize),d.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),f(n)),f(e)},s.prototype.getValue=function(){return this.content.innerText},s.prototype.getSelection=function(){return window.getSelection().getRangeAt(0)},s.prototype.setSelection=function(e,t){var n=document.createRange();null===e?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)}},{289:289,408:408,414:414,93:93,94:94,95:95,96:96}],93:[function(e,t,n){t.exports=function(e,t,n){return 2==arguments.length?e.getAttribute(t):null===n?e.removeAttribute(t):(e.setAttribute(t,n),e)}},{}],94:[function(e,t,n){t.exports=e(85)},{85:85}],95:[function(e,t,n){t.exports=e(86)},{86:86}],96:[function(e,t,n){t.exports=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{}],97:[function(e,t,n){t.exports=e(98)},{98:98}],98:[function(e,t,n){"use strict";function i(e){function t(e){return r.indexOf(e)>=0}function n(e){r.push(e)}function i(e){t(e)||((e.__depends__||[]).forEach(i),t(e)||(n(e),(e.__init__||[]).forEach(function(e){o.push(e)})))}var r=[],o=[];e.forEach(i);var s=new a.Injector(r);return o.forEach(function(e){try{s["string"==typeof e?"get":"invoke"](e)}catch(e){throw console.error("Failed to instantiate component"),console.error(e.stack),e}}),s}function r(t){return t=t||{},i([{config:["value",t]},e(107)].concat(t.modules||[]))}function o(e,t){this.injector=t=t||r(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}var a=e(260);t.exports=o,o.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},o.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},{107:107,260:260}],99:[function(e,t,n){"use strict";function i(e){return"object"==typeof e}function r(e){this._eventBus=e}function o(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}var a=e(281),s=e(400),c=e(399),u=e(402);r.$inject=["eventBus"],t.exports=r,r.prototype.on=function(e,t,n,r,l,p){if((s(t)||u(t))&&(p=l,l=r,r=n,n=t,t=null),s(n)&&(p=l,l=r,r=n,n=1e3),i(l)&&(p=l,l=!1),!s(r))throw new Error("handlerFn must be a function");c(e)||(e=[e]);var h=this._eventBus;a(e,function(e){var i=["commandStack",e,t].filter(function(e){return e}).join(".");h.on(i,n,l?o(r,p):r,p)})},a(["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"],function(e){r.prototype[e]=function(t,n,i,r,o){(s(t)||u(t))&&(o=r,r=i,i=n,n=t,t=null),this.on(t,e,n,i,r,o)}})},{281:281,399:399,400:400,402:402}],100:[function(e,t,n){"use strict";function i(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[]},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}var r=e(274),o=e(399),a=e(408),s=e(105).Event;i.$inject=["eventBus","injector"],t.exports=i,i.prototype.execute=function(e,t){if(!e)throw new Error("command required");var n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction(n)},i.prototype.canExecute=function(e,t){var n={command:e,context:t},i=this._getHandler(e),r=this._fire(e,"canExecute",n);if(void 0===r){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r},i.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed")},i.prototype.undo=function(){var e,t=this._getUndoAction();if(t){for(this._pushAction(t);t&&(this._internalUndo(t),(e=this._getUndoAction())&&e.id===t.id);)t=e;this._popAction()}},i.prototype.redo=function(){var e,t=this._getRedoAction();if(t){for(this._pushAction(t);t&&(this._internalExecute(t,!0),(e=this._getRedoAction())&&e.id===t.id);)t=e;this._popAction()}},i.prototype.register=function(e,t){this._setHandler(e,t)},i.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");var n=this._injector.instantiate(t);this.register(e,n)},i.prototype.canUndo=function(){return!!this._getUndoAction()},i.prototype.canRedo=function(){return!!this._getRedoAction()},i.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},i.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},i.prototype._internalUndo=function(e){var t=this,n=e.command,i=e.context,r=this._getHandler(n);this._atomicDo(function(){t._fire(n,"revert",e),r.revert&&t._markDirty(r.revert(i)),t._revertedAction(e),t._fire(n,"reverted",e)})},i.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);var i,r,o,c=t?[e+"."+t,t]:[e];for(n=a(new s,n),i=0;(r=c[i])&&(o=this._eventBus.fire("commandStack."+r,n),!n.cancelBubble);i++);return o},i.prototype._createId=function(){return this._uid++},i.prototype._atomicDo=function(e){var t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},i.prototype._internalExecute=function(e,t){var n=this,i=e.command,r=e.context,o=this._getHandler(i);if(!o)throw new Error("no command handler registered for <"+i+">");this._pushAction(e),t||(this._fire(i,"preExecute",e),o.preExecute&&o.preExecute(r),this._fire(i,"preExecuted",e)),this._atomicDo(function(){n._fire(i,"execute",e),o.execute&&n._markDirty(o.execute(r)),n._executedAction(e,t),n._fire(i,"executed",e)}),t||(this._fire(i,"postExecute",e),o.postExecute&&o.postExecute(r),this._fire(i,"postExecuted",e)),this._popAction(e)},i.prototype._pushAction=function(e){var t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},i.prototype._popAction=function(){var e=this._currentExecution,t=e.actions,n=e.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:r(n)}),n.length=0,this._fire("changed"))},i.prototype._markDirty=function(e){var t=this._currentExecution;e&&(e=o(e)?e:[e],t.dirty=t.dirty.concat(e))},i.prototype._executedAction=function(e,t){var n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},i.prototype._revertedAction=function(e){this._stackIdx--},i.prototype._getHandler=function(e){return this._handlerMap[e]},i.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t}},{105:105,274:274,399:399,408:408}],101:[function(e,t,n){t.exports={commandStack:["type",e(100)]}},{100:100}],102:[function(e,t,n){"use strict";function i(e,t){return Math.round(e*t)/t}function r(e){return u(e)?e+"px":e}function o(e){e=l({},{width:"100%",height:"100%"},e);var t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container"),l(n.style,{position:"relative",overflow:"hidden",width:r(e.width),height:r(e.height)}),t.appendChild(n),n}function a(e,t,n){var i=_("g");x(i).add(t);var r=void 0!==n?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]),i}function s(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._init(e||{})}function c(e,t){var n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}var u=e(402),l=e(408),p=e(281),h=e(278),d=e(290),f=e(284),m=e(232),g=e(235),y=e(445),v=e(447),x=e(448),_=e(451),b=e(455),w=e(452).createMatrix,E={shape:["x","y","width","height"],connection:["waypoints"]};s.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],t.exports=s,s.prototype._init=function(e){var t=this._eventBus,n=this._container=o(e),i=this._svg=_("svg");v(i,{width:"100%",height:"100%"}),y(n,i);var r=this._viewport=a(i,"viewport");this._layers={},!1!==e.deferUpdate&&(this._viewboxChanged=d(this._viewboxChanged,300)),t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:r})},this),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},s.prototype._destroy=function(e){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var t=this._container.parentNode;t&&t.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._rootElement,delete this._viewport},s.prototype._clear=function(){var e=this;this._elementRegistry.getAll().forEach(function(t){var n=g.getType(t);"root"===n?e.setRootElement(null,!0):e._removeElement(t,n)}),delete this._cachedViewbox},s.prototype.getDefaultLayer=function(){return this.getLayer("base",0)},s.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");var n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),void 0!==t&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},s.prototype._createLayer=function(e,t){t||(t=0);var n=f(this._layers,function(e,n){return t>=n.index&&e++,e},0);return{group:a(this._viewport,"layer-"+e,n),index:t}},s.prototype.getContainer=function(){return this._container},s.prototype._updateMarker=function(e,t,n){var i;e.id||(e=this._elementRegistry.get(e)),(i=this._elementRegistry._elements[e.id])&&(p([i.gfx,i.secondaryGfx],function(e){e&&(n?x(e).add(t):x(e).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},s.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},s.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},s.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));var n=this.getGraphics(e);return x(n).has(t)},s.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},s.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement},s.prototype.setRootElement=function(e,t){e&&this._ensureValid("root",e);var n=this._rootElement,i=this._elementRegistry,r=this._eventBus;if(n){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:n}),r.fire("root.removed",{element:n}),i.remove(n)}if(e){var o=this.getDefaultLayer();r.fire("root.add",{element:e}),i.add(e,o,this._svg),r.fire("root.added",{element:e,gfx:o})}
return this._rootElement=e,e},s.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var n=E[e];if(!h(n,function(e){return void 0!==t[e]}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},s.prototype._setParent=function(e,t,n){m.add(t.children,e,n),e.parent=t},s.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();var r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);var a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},s.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},s.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},s.prototype._removeElement=function(e,t){var n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e))return r.fire(t+".remove",{element:e}),i.remove(e),m.remove(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},s.prototype.removeShape=function(e){return this._removeElement(e,"shape")},s.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},s.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},s.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},s.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},s.prototype.viewbox=function(e){if(void 0===e&&this._cachedViewbox)return this._cachedViewbox;var t,n,r,o,a,s=this._viewport,c=this.getSize();if(!e){t=this.getDefaultLayer().getBBox();var u=b(s);return n=u?u.matrix:w(),r=i(n.a,1e3),o=i(-n.e||0,1e3),a=i(-n.f||0,1e3),e=this._cachedViewbox={x:o?o/r:0,y:a?a/r:0,width:c.width/r,height:c.height/r,scale:r,inner:{width:t.width,height:t.height,x:t.x,y:t.y},outer:c}}return this._changeViewbox(function(){r=Math.min(c.width/e.width,c.height/e.height);var t=this._svg.createSVGMatrix().scale(r).translate(-e.x,-e.y);b(s,t)}),e},s.prototype.scroll=function(e){var t=this._viewport,n=t.getCTM();return e&&this._changeViewbox(function(){e=l({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),c(t,n)}),{x:n.e,y:n.f}},s.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if("fit-viewport"===e)return this._fitViewport(t);var n,r;return this._changeViewbox(function(){"object"!=typeof t&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),r=this._setZoom(e,t)}),i(r.a,1e3)},s.prototype._fitViewport=function(e){var t,n,i=this.viewbox(),r=i.outer,o=i.inner;return o.x>=0&&o.y>=0&&o.x+o.width<=r.width&&o.y+o.height<=r.height&&!e?n={x:0,y:0,width:Math.max(o.width+o.x,r.width),height:Math.max(o.height+o.y,r.height)}:(t=Math.min(1,r.width/o.width,r.height/o.height),n={x:o.x+(e?o.width/2-r.width/t/2:0),y:o.y+(e?o.height/2-r.height/t/2:0),width:r.width/t,height:r.height/t}),this.viewbox(n),this.viewbox(!1).scale},s.prototype._setZoom=function(e,t){var n,i,r,o,a,s=this._svg,u=this._viewport,p=s.createSVGMatrix(),h=s.createSVGPoint();r=u.getCTM();var d=r.a;return t?(n=l(h,t),i=n.matrixTransform(r.inverse()),o=p.translate(i.x,i.y).scale(1/d*e).translate(-i.x,-i.y),a=r.multiply(o)):a=p.scale(e),c(this._viewport,a),a},s.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},s.prototype.getAbsoluteBBox=function(e){var t,n=this.viewbox();if(e.waypoints){t=this.getGraphics(e).getBBox()}else t=e;return{x:t.x*n.scale-n.x*n.scale,y:t.y*n.scale-n.y*n.scale,width:t.width*n.scale,height:t.height*n.scale}},s.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")}},{232:232,235:235,278:278,281:281,284:284,290:290,402:402,408:408,445:445,447:447,448:448,451:451,452:452,455:455}],103:[function(e,t,n){"use strict";function i(){this._uid=12}var r=e(224),o=e(408);t.exports=i,i.prototype.createRoot=function(e){return this.create("root",e)},i.prototype.createLabel=function(e){return this.create("label",e)},i.prototype.createShape=function(e){return this.create("shape",e)},i.prototype.createConnection=function(e){return this.create("connection",e)},i.prototype.create=function(e,t){return t=o({},t||{}),t.id||(t.id=e+"_"+this._uid++),r.create(e,t)}},{224:224,408:408}],104:[function(e,t,n){"use strict";function i(e){this._elements={},this._eventBus=e}var r="data-element-id",o=e(447);i.$inject=["eventBus"],t.exports=i,i.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),o(t,r,i),n&&o(n,r,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},i.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(o(i.gfx,r,""),i.secondaryGfx&&o(i.secondaryGfx,r,""),delete t[n])},i.prototype.updateId=function(e,t){this._validateId(t),"string"==typeof e&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},i.prototype.get=function(e){var t;t="string"==typeof e?e:e&&o(e,r);var n=this._elements[t];return n&&n.element},i.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},i.prototype.getAll=function(){return this.filter(function(e){return e})},i.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})},i.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},i.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")}},{447:447}],105:[function(e,t,n){"use strict";function i(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function r(){}function o(e,t){return e.apply(null,t)}var a=e(400),s=e(399),c=e(402),u=e(289),l=e(408),p=Array.prototype.slice;t.exports=i,i.prototype.on=function(e,t,n,i){if(e=s(e)?e:[e],a(t)&&(i=n,n=t,t=1e3),!c(t))throw new Error("priority must be a number");var r=n;i&&(r=u(n,i),r.__fn=n.__fn||n);var o=this,l={priority:t,callback:r};e.forEach(function(e){o._addListener(e,l)})},i.prototype.once=function(e,t,n,i){function r(){return o.off(e,r),n.apply(i,arguments)}var o=this;if(a(t)&&(i=n,n=t,t=1e3),!c(t))throw new Error("priority must be a number");r.__fn=n,this.on(e,t,r)},i.prototype.off=function(e,t){var n,i,r,o=this._getListeners(e);if(t)for(r=o.length-1;n=o[r];r--)(i=n.callback)!==t&&i.__fn!==t||o.splice(r,1);else o.length=0},i.prototype.fire=function(e,t){var n,i,o,a;if(a=p.call(arguments),"object"==typeof e&&(n=e,e=n.type),!e)throw new Error("no event type specified");if(i=this._listeners[e]){t instanceof r?n=t:(n=new r,n.init(t)),a[0]=n;var s=n.type;e!==s&&(n.type=e);try{o=this._invokeListeners(n,a,i)}finally{e!==s&&(n.type=s)}return void 0===o&&n.defaultPrevented&&(o=!1),o}},i.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},i.prototype._destroy=function(){this._listeners={}},i.prototype._invokeListeners=function(e,t,n){var i,r,o;for(i=0;(r=n[i])&&!e.cancelBubble;i++)o=this._invokeListener(e,t,r);return o},i.prototype._invokeListener=function(e,t,n){var i;try{i=o(n.callback,t),void 0!==i&&(e.returnValue=i,e.stopPropagation()),!1===i&&e.preventDefault()}catch(e){if(!this.handleError(e))throw console.error("unhandled error in event listener"),console.error(e.stack),e}return i},i.prototype._addListener=function(e,t){var n,i,r=this._getListeners(e);for(i=0;n=r[i];i++)if(n.priority<t.priority)return void r.splice(i,0,t);r.push(t)},i.prototype._getListeners=function(e){var t=this._listeners[e];return t||(this._listeners[e]=t=[]),t},t.exports.Event=r,r.prototype.stopPropagation=function(){this.cancelBubble=!0},r.prototype.preventDefault=function(){this.defaultPrevented=!0},r.prototype.init=function(e){l(this,e||{})}},{289:289,399:399,400:400,402:402,408:408}],106:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._elementRegistry=t}function r(e,t,n){t.insertBefore(e,n||t.firstChild)}var o=e(281),a=e(284),s=e(238),c=e(247).translate,u=e(251),l=e(445),p=e(447),h=e(448),d=e(451),f=e(454);i.$inject=["eventBus","elementRegistry"],t.exports=i,i.prototype._getChildren=function(e){var t,n=this._elementRegistry.getGraphics(e);return e.parent?(t=s.getChildren(n))||(t=d("g"),h(t).add("djs-children"),l(n.parentNode,t)):t=n,t},i.prototype._clear=function(e){var t=s.getVisual(e);return u(t),t},i.prototype._createContainer=function(e,t,n){var i=d("g");h(i).add("djs-group"),void 0!==n?r(i,t,t.childNodes[n]):l(t,i);var o=d("g");h(o).add("djs-element"),h(o).add("djs-"+e),l(i,o);var a=d("g");return h(a).add("djs-visual"),l(o,a),o},i.prototype.create=function(e,t,n){var i=this._getChildren(t.parent);return this._createContainer(e,i,n)},i.prototype.updateContainments=function(e){var t,n=this,i=this._elementRegistry;t=a(e,function(e,t){return t.parent&&(e[t.parent.id]=t.parent),e},{}),o(t,function(e){var t=e.children;if(t){var a=n._getChildren(e);o(t.slice().reverse(),function(e){r(i.getGraphics(e).parentNode,a)})}})},i.prototype.drawShape=function(e,t){return this._eventBus.fire("render.shape",{gfx:e,element:t})},i.prototype.getShapePath=function(e){return this._eventBus.fire("render.getShapePath",e)},i.prototype.drawConnection=function(e,t){return this._eventBus.fire("render.connection",{gfx:e,element:t})},i.prototype.getConnectionPath=function(e){return this._eventBus.fire("render.getConnectionPath",e)},i.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if("shape"===e)this.drawShape(i,t),c(n,t.x,t.y);else{if("connection"!==e)throw new Error("unknown type: "+e);this.drawConnection(i,t)}t.hidden?p(n,"display","none"):p(n,"display","block")}},i.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);f(t.parentNode)}},{238:238,247:247,251:251,281:281,284:284,445:445,447:447,448:448,451:451,454:454}],107:[function(e,t,n){t.exports={__depends__:[e(111)],__init__:["canvas"],canvas:["type",e(102)],elementRegistry:["type",e(104)],elementFactory:["type",e(103)],eventBus:["type",e(105)],graphicsFactory:["type",e(106)]}},{102:102,103:103,104:104,105:105,106:106,111:111}],108:[function(e,t,n){"use strict";function i(e,t){var n=this;t=t||r,e.on(["render.shape","render.connection"],t,function(e,t){var i=e.type,r=t.element,o=t.gfx;if(n.canRender(r))return"render.shape"===i?n.drawShape(o,r):n.drawConnection(o,r)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(e,t){if(n.canRender(t))return"render.getShapePath"===e.type?n.getShapePath(t):n.getConnectionPath(t)})}var r=1e3;i.prototype.canRender=function(){},i.prototype.drawShape=function(){},i.prototype.drawConnection=function(){},i.prototype.getShapePath=function(){},i.prototype.getConnectionPath=function(){},t.exports=i},{}],109:[function(e,t,n){"use strict";function i(e,t){o.call(this,e,h),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}var r=e(267),o=e(108),a=e(246),s=a.componentsToPath,c=a.createLine,u=e(445),l=e(447),p=e(451),h=1;r(i,o),i.prototype.canRender=function(){return!0},i.prototype.drawShape=function(e,t){var n=p("rect");return l(n,{x:0,y:0,width:t.width||0,height:t.height||0}),l(n,this.SHAPE_STYLE),u(e,n),n},i.prototype.drawConnection=function(e,t){var n=c(t.waypoints,this.CONNECTION_STYLE);return u(e,n),n},i.prototype.getShapePath=function(e){var t=e.x,n=e.y,i=e.width,r=e.height;return s([["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]])},i.prototype.getConnectionPath=function(e){var t,n,i=e.waypoints,r=[];for(t=0;n=i[t];t++)n=n.original||n,r.push([0===t?"M":"L",n.x,n.y]);return s(r)},i.$inject=["eventBus","styles"],t.exports=i},{108:108,246:246,267:267,445:445,447:447,451:451}],110:[function(e,t,n){"use strict";function i(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(e,t,n){var i=this.style(t,n);return o(i,{class:e})},this.style=function(t,n){r(t)||n||(n=t,t=[]);var i=a(t,function(t,n){return o(t,e[n]||{})},{});return n?o(i,n):i},this.computeStyle=function(e,n,i){return r(n)||(i=n,n=[]),t.style(n||[],o({},i,e||{}))}}var r=e(399),o=e(408),a=e(284);t.exports=i},{284:284,399:399,408:408}],111:[function(e,t,n){t.exports={__init__:["defaultRenderer"],defaultRenderer:["type",e(109)],styles:["type",e(110)]}},{109:109,110:110}],112:[function(e,t,n){"use strict";function i(e,t,n,i){x.call(this,t);var c=e.get("movePreview",!1);t.on("shape.move.start",v,function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=o(n),t.validatedShapes=a(i)}),c&&t.on("shape.move.start",y,function(e){var t=e.context,n=t.shapes,i=r(n);s(i,function(e){c.makeDraggable(t,e,!0),e.label&&c.makeDraggable(t,e.label,!0)})}),this.postExecuted("elements.move",function(e){var t=e.context,n=t.delta,o=t.newParent,a=t.closure,c=a.enclosedElements,u=r(c);s(u,function(e){c[e.id]||(i.moveShape(e,n,o),e.label&&i.moveShape(e.label,n,o))})}),this.postExecuted("elements.move",function(e){var t,n=e.context,r=n.shapes,o=n.newHost;r.length>1||(t=o?r:l(r,function(e){return!!e.host}),s(t,function(e){i.updateAttachment(e,o)}))}),this.postExecuted("elements.move",function(e){var t=e.context.shapes;s(t,function(e){s(e.attachers,function(e){s(e.outgoing.slice(),function(e){n.allowed("connection.reconnectStart",{connection:e,source:e.source,target:e.target})||i.removeConnection(e)}),s(e.incoming.slice(),function(e){n.allowed("connection.reconnectEnd",{connection:e,source:e.source,target:e.target})||i.removeConnection(e)})})})}),this.postExecute("shape.create",function(e){var t=e.context,n=t.shape,r=t.host;r&&i.updateAttachment(n,r)}),this.postExecute("shape.replace",function(e){var t=e.context,r=t.oldShape,o=t.newShape;d(r.attachers,function(e){"attach"===n.allowed("elements.move",{target:o,shapes:[e]})?i.updateAttachment(e,o):i.removeShape(e)}),o.attachers.length&&s(o.attachers,function(e){var t=m(e,r,o);i.moveShape(e,t,e.parent)})}),this.postExecute("shape.resize",function(e){var t=e.context,n=t.shape,r=t.oldBounds,o=t.newBounds,a=n.attachers;a.length&&s(a,function(e){var t=m(e,r,o);i.moveShape(e,t,e.parent),e.label&&i.moveShape(e.label,t,e.label.parent)})}),this.preExecute("shape.delete",function(e){var t=e.context.shape;d(t.attachers,function(e){i.removeShape(e)}),t.host&&i.updateAttachment(t,null)}),t.on("spaceTool.move",function(e){var t=e.context,n=t.initialized,i=t.attachSupportInitialized;if(n&&!i){var r=t.movingShapes,o=l(r,function(e){var t=e.host;return t&&-1===r.indexOf(t)});s(o,function(e){f.remove(r,e),e.label&&f.remove(r,e.label)}),t.attachSupportInitialized=!0}})}function r(e){return c(h(e,function(e){return e.attachers||[]}))}function o(e){var t=r(e);return u(e,t)}function a(e){var t=p(e,"id");return l(e,function(e){for(;e;){if(e.host&&t[e.host.id])return!1;e=e.parent}return!0})}var s=e(281),c=e(269),u=e(272),l=e(279),p=e(282),h=e(283),d=e(245).saveClear,f=e(232),m=e(230).getNewAttachShapeDelta,g=e(267),y=251,v=1401,x=e(99);g(i,x),i.$inject=["injector","eventBus","rules","modeling"],t.exports=i},{230:230,232:232,245:245,267:267,269:269,272:272,279:279,281:281,282:282,283:283,99:99}],113:[function(e,t,n){t.exports={__depends__:[e(204)],__init__:["attachSupport"],attachSupport:["type",e(112)]}},{112:112,204:204}],114:[function(e,t,n){"use strict";function i(e,t,n,i){f.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(e){var t=e.context,n=t.hints,i=t.shape,o=t.parent||t.newParent;n&&!1===n.root||r._expand([i],o)}),this.postExecuted(["elements.move"],function(e){var t=e.context,n=h(p(t.closure.topLevel)),i=t.hints;if(!i||!1!==i.autoResize){var o=d(n,function(e){return e.parent.id});l(o,function(e,t){r._expand(e,t)})}})}function r(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}var o=e(267),a=e(235).getBBox,s=e(222).asTRBL,c=e(222).asBounds,u=e(408),l=e(281),p=e(416),h=e(269),d=e(282),f=e(99);i.$inject=["eventBus","elementRegistry","modeling","rules"],o(i,f),t.exports=i,i.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=s(a(e)),o=s(t),l={};return r.top-o.top<i.top&&(l.top=r.top-n.top),r.left-o.left<i.left&&(l.left=r.left-n.left),o.right-r.right<i.right&&(l.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(l.bottom=r.bottom+n.bottom),c(u({},o,l))},i.prototype._expand=function(e,t){if("string"==typeof t&&(t=this._elementRegistry.get(t)),this._rules.allowed("element.autoResize",{elements:e,target:t})){var n=this._getOptimalBounds(e,t);if(r(n,t)){this.resize(t,n);var i=t.parent;i&&this._expand([t],i)}}},i.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},i.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},i.prototype.resize=function(e,t){this._modeling.resizeShape(e,t)}},{222:222,235:235,267:267,269:269,281:281,282:282,408:408,416:416,99:99}],115:[function(e,t,n){function i(e){r.call(this,e);var t=this;this.addRule("element.autoResize",function(e){return t.canResize(e.elements,e.target)})}var r=e(202),o=e(267);i.$inject=["eventBus"],o(i,r),t.exports=i,i.prototype.canResize=function(e,t){return!1}},{202:202,267:267}],116:[function(e,t,n){"use strict";t.exports={__init__:["autoResize"],autoResize:["type",e(114)]}},{114:114}],117:[function(e,t,n){"use strict";function i(e,t,n,i){this._canvas=n,this._mouseTracking=i,this._opts=o({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var r=this;t.on("drag.move",function(e){var t=r._toBorderPoint(e);r.startScroll(t)}),t.on(["drag.cleanup"],function(){r.stopScroll()})}function r(e,t,n){return t<e&&e<n}var o=e(408),a=e(236);i.$inject=["config.autoScroll","eventBus","canvas","mouseTracking"],t.exports=i,i.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,o=t.getContainer().getBoundingClientRect(),a=[e.x,e.y,o.width-e.x,o.height-e.y];this.stopScroll();for(var s=0,c=0,u=0;u<4;u++)r(a[u],n.scrollThresholdOut[u],n.scrollThresholdIn[u])&&(0===u?s=n.scrollStep:1==u?c=n.scrollStep:2==u?s=-n.scrollStep:3==u&&(c=-n.scrollStep));0===s&&0===c||(t.scroll({dx:s,dy:c}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))},i.prototype.stopScroll=function(){clearTimeout(this._scrolling)},i.prototype.setOptions=function(e){this._opts=o({},this._opts,e)},i.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=a.toPoint(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}}},{236:236,408:408}],118:[function(e,t,n){t.exports={__depends__:[e(139),e(180)],__init__:["autoScroll"],autoScroll:["type",e(117)]}},{117:117,139:139,180:180}],119:[function(e,t,n){"use strict";function i(e,t,n,i,y,v,x){function _(e){y.update("connection",e.connection,e.connectionGfx)}function b(e){e=e.slice();for(var t,n,i,o=0;e[o];)t=e[o],n=e[o-1],i=e[o+1],0===r.pointDistance(t,i)||r.pointsOnLine(n,i,t)?e.splice(o,1):o++;return e}var w=e.get("connectionDocking",!1);this.start=function(e,t,r,o){var a,s,c=t.waypoints,u=n.getGraphics(t);a=o||0!==r?o||r!==c.length-1?l:h:p,s={connection:t,bendpointIndex:r,insert:o,type:a},i.init(e,"bendpoint.move",{data:{connection:t,connectionGfx:u,context:s}})},t.on("bendpoint.move.start",function(e){var t=e.context,i=t.connection,r=i.waypoints,a=r.slice(),s=t.insert,c=t.bendpointIndex;t.originalWaypoints=r,s&&a.splice(c,0,null),i.waypoints=a,t.draggerGfx=o.addBendpoint(n.getLayer("overlays")),f(t.draggerGfx).add("djs-dragging"),n.addMarker(i,u)}),t.on("bendpoint.move.hover",function(e){var t=e.context;if(t.hover=e.hover,e.hover){n.addMarker(e.hover,c);var i=t.allowed=v.allowed(t.type,t);i?(n.removeMarker(t.hover,s),n.addMarker(t.hover,a),t.target=t.hover):!1===i&&(n.removeMarker(t.hover,a),n.addMarker(t.hover,s),t.target=null)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(e){var t=e.context.hover;t&&(n.removeMarker(t,c),n.removeMarker(t,e.context.target?a:s))}),t.on("bendpoint.move.move",function(e){var t,n,i=e.context,r=i.type,o=e.connection;o.waypoints[i.bendpointIndex]={x:e.x,y:e.y},w&&(i.hover&&(r===p&&(t=i.hover),r===h&&(n=i.hover)),o.waypoints=w.getCroppedWaypoints(o,t,n)),g(i.draggerGfx,e.x,e.y),_(e)}),t.on(["bendpoint.move.end","bendpoint.move.cancel"],function(e){var t=e.context,i=t.hover,r=t.connection;m(t.draggerGfx),t.newWaypoints=r.waypoints.slice(),r.waypoints=t.originalWaypoints,n.removeMarker(r,u),i&&(n.removeMarker(i,a),n.removeMarker(i,s))}),t.on("bendpoint.move.end",function(e){var t,n=e.context,i=n.newWaypoints,r=n.bendpointIndex,o=i[r],a=n.allowed;if(o.x=d(o.x),o.y=d(o.y),a&&n.type===p)x.reconnectStart(n.connection,n.target,o);else if(a&&n.type===h)x.reconnectEnd(n.connection,n.target,o);else{if(!1===a||n.type!==l)return _(e),!1;t={bendpointMove:{insert:e.context.insert,bendpointIndex:r}},x.updateWaypoints(n.connection,b(i),t)}}),t.on("bendpoint.move.cancel",function(e){_(e)})}var r=e(237),o=e(121),a="connect-ok",s="connect-not-ok",c="connect-hover",u="djs-updating",l="connection.updateWaypoints",p="connection.reconnectStart",h="connection.reconnectEnd",d=Math.round,f=e(448),m=e(454),g=e(247).translate;i.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=i},{121:121,237:237,247:247,448:448,454:454}],120:[function(e,t,n){"use strict";function i(e){function t(e,t){if(a(e)){for(var n=e.length;n--;)if(s(e[n]-t)<=u)return e[n]}else{e=+e;var i=t%e;if(i<u)return t-i;if(i>e-u)return t-i+e}return t}function n(e){if(e.width)return{x:c(e.width/2+e.x),y:c(e.height/2+e.y)}}function i(e){var t=e.snapPoints,i=e.connection,r=i.waypoints,a=e.segmentStart,s=e.segmentStartIndex,c=e.segmentEnd,u=e.segmentEndIndex,l=e.axis;if(t)return t;var p=[r[s-1],a,c,r[u+1]];return s<2&&p.unshift(n(i.source)),u>r.length-3&&p.unshift(n(i.target)),e.snapPoints=t={horizontal:[],vertical:[]},o(p,function(e){e&&(e=e.original||e,"y"===l&&t.horizontal.push(e.y),"x"===l&&t.vertical.push(e.x))}),t}function l(e){var t=e.snapPoints,n=e.connection.waypoints,i=e.bendpointIndex;if(t)return t;var r=[n[i-1],n[i+1]];return e.snapPoints=t={horizontal:[],vertical:[]},o(r,function(e){e&&(e=e.original||e,t.horizontal.push(e.y),t.vertical.push(e.x))}),t}e.on("connectionSegment.move.move",1500,function(e){var n,o,a=e.context,s=i(a),c=e.x,u=e.y;if(s){n=t(s.vertical,c),o=t(s.horizontal,u);var l=c-n,p=u-o;r(e,{dx:e.dx-l,dy:e.dy-p,x:n,y:o})}}),e.on("bendpoint.move.move",1500,function(e){var i,o,a=e.context,s=l(a),c=a.target,u=c&&n(c),p=e.x,h=e.y;if(s){i=t(u?s.vertical.concat([u.x]):s.vertical,p),o=t(u?s.horizontal.concat([u.y]):s.horizontal,h);var d=p-i,f=h-o;r(e,{dx:e.dx-d,dy:e.dy-f,x:e.x-d,y:e.y-f})}})}var r=e(408),o=e(281),a=e(399),s=Math.abs,c=Math.round,u=10;i.$inject=["eventBus"],t.exports=i},{281:281,399:399,408:408}],121:[function(e,t,n){"use strict";function i(e,t,n){var i=p("g");c(e,i);var r=p("rect");u(r,{x:-7,y:-1.5,width:14,height:3}),l(r).add("djs-visual"),c(i,r);var o=p("rect");return u(o,{x:-10,y:-4.5,width:20,height:9}),l(o).add("djs-hit"),c(i,o),h(i,"h"===n?90:0,0,0),i}var r=e(236),o=e(237),a=t.exports.BENDPOINT_CLS="djs-bendpoint",s=t.exports.SEGMENT_DRAGGER_CLS="djs-segment-dragger",c=e(445),u=e(447),l=e(448),p=e(451),h=e(247).rotate,d=e(247).translate;t.exports.toCanvasCoordinates=function(e,t){var n,i=r.toPoint(t),o=e._container.getBoundingClientRect();n={x:o.left,y:o.top};var a=e.viewbox();return{x:a.x+(i.x-n.x)/a.scale,y:a.y+(i.y-n.y)/a.scale}},t.exports.addBendpoint=function(e,t){var n=p("g");l(n).add(a),c(e,n);var i=p("circle");u(i,{cx:0,cy:0,r:4}),l(i).add("djs-visual"),c(n,i);var r=p("circle");return u(r,{cx:0,cy:0,r:10}),l(r).add("djs-hit"),c(n,r),t&&l(n).add(t),n},t.exports.addSegmentDragger=function(e,t,n){var r=p("g"),a=o.getMidPoint(t,n),u=o.pointsAligned(t,n);return c(e,r),i(r,a,u),l(r).add(s),l(r).add("h"===u?"vertical":"horizontal"),d(r,a.x,a.y),r}},{236:236,237:237,247:247,445:445,447:447,448:448,451:451}],122:[function(e,t,n){"use strict";function i(e,t,n,i,x){function _(e,n){var i=s.toCanvasCoordinates(t,n);return h(e,i)}function b(e,t,n){var i,r,o,a,s,l,p=e.index,h=e.point;return!(p<=0||e.bendpoint)&&(i=t[p-1],r=t[p],o=u(i,r),a=c(i,r),s=Math.abs(h.x-o.x),l=Math.abs(h.y-o.y),a&&s<=n&&l<=n)}function w(e,t){var n=t.waypoints,r=_(n,e);if(r)return b(r,n,10)?x.start(e,t,r.index):i.start(e,t,r.index,!r.bendpoint),!0}function E(e,t,i){o.bind(e,t,function(e){n.triggerMouseEvent(t,e,i),e.stopPropagation()})}function C(e,n){var i=t.getLayer("overlays"),r=a(".djs-bendpoints[data-element-id="+e.id+"]",i);return!r&&n&&(r=g("g"),f(r,{"data-element-id":e.id}),m(r).add("djs-bendpoints"),d(i,r),E(r,"mousedown",e),E(r,"click",e),E(r,"dblclick",e)),r}function S(e,t){t.waypoints.forEach(function(t,n){var i=s.addBendpoint(e);d(e,i),v(i,t.x,t.y)}),s.addBendpoint(e,"floating")}function M(e,t){for(var n,i,r=t.waypoints,o=1;o<r.length;o++)n=r[o-1],i=r[o],c(n,i)&&s.addSegmentDragger(e,n,i)}function P(e){r(a.all("."+l,e),function(e){y(e)})}function R(e){r(a.all("."+p,e),function(e){y(e)})}function T(e){var t=C(e);return t||(t=C(e,!0),S(t,e),M(t,e)),t}function k(e){var t=C(e);t&&(R(t),P(t),M(t,e),S(t,e))}e.on("connection.changed",function(e){k(e.element)}),e.on("connection.remove",function(e){var t=C(e.element);t&&y(t)}),e.on("element.marker.update",function(e){var t,n=e.element;n.waypoints&&(t=T(n),e.add?m(t).add(e.marker):m(t).remove(e.marker))}),e.on("element.mousemove",function(e){var t,n,i,r=e.element,o=r.waypoints;if(o){if(t=C(r,!0),!(n=a(".floating",t)))return;i=_(o,e.originalEvent),i&&v(n,i.point.x,i.point.y)}}),e.on("element.mousedown",function(e){var t=e.originalEvent,n=e.element,i=n.waypoints;if(i)return w(t,n)}),e.on("selection.changed",function(e){var t=e.newSelection,n=t[0];n&&n.waypoints&&T(n)}),e.on("element.hover",function(e){var t=e.element;t.waypoints&&(T(t),n.registerEvent(e.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(e){n.unregisterEvent(e.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(e){var t=e.element,n=e.newId;if(t.waypoints){var i=C(t);i&&f(i,{"data-element-id":n})}}),this.addHandles=T,this.updateHandles=k,this.getBendpointsContainer=C}var r=e(281),o=e(255),a=e(257),s=e(121),c=e(237).pointsAligned,u=e(237).getMidPoint,l=s.BENDPOINT_CLS,p=s.SEGMENT_DRAGGER_CLS,h=e(240).getApproxIntersection,d=e(445),f=e(447),m=e(448),g=e(451),y=e(454),v=e(247).translate;i.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"],t.exports=i},{121:121,237:237,240:240,247:247,255:255,257:257,281:281,445:445,447:447,448:448,451:451,454:454}],123:[function(e,t,n){"use strict";function i(e,t,n){return r(e,t,e[t]+n)}function r(e,t,n){return{x:"x"===t?n:e.x,y:"y"===t?n:e.y}}function o(e,t,n,i){var o=Math.max(t[i],n[i]),a=Math.min(t[i],n[i]);return r(t,i,Math.min(Math.max(a+20,e[i]),o-20))}function a(e){return"x"===e?"y":"x"}function s(e,t,n){var i,o;return e.original?e.original:(i=p.getMid(t),o=a(n),r(e,o,i[o]))}function c(e,t,n,r,c,y,v){function x(e,t){if(!E)return t;var n,i=e.waypoints;return e.waypoints=t,n=E.getCroppedWaypoints(e),e.waypoints=i,n}function _(e){c.update("connection",e.connection,e.connectionGfx)}function b(e,t,n){var i=e.newWaypoints,r=e.segmentStartIndex+t,s=i[r],c=e.segmentEndIndex+t,u=i[c],l=a(e.axis),p=o(n,s,u,l);g(e.draggerGfx,p.x,p.y)}function w(e,t){var n=0;return{waypoints:e.filter(function(i,r){return!u.pointsOnLine(e[r-1],e[r+1],i)||(n=r<=t?n-1:n,!1)}),segmentOffset:n}}var E=e.get("connectionDocking",!1);this.start=function(e,t,i){var o,a,c,l=n.getGraphics(t),p=i-1,h=i,d=t.waypoints,f=d[p],m=d[h];(a=u.pointsAligned(f,m))&&(c="v"===a?"y":"x",0===p&&(f=s(f,t.source,c)),h===d.length-1&&(m=s(m,t.target,c)),o={connection:t,segmentStartIndex:p,segmentEndIndex:h,segmentStart:f,segmentEnd:m,axis:c},r.init(e,{x:(f.x+m.x)/2,y:(f.y+m.y)/2},"connectionSegment.move",{cursor:"x"===c?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:l,context:o}}))},t.on("connectionSegment.move.start",function(e){var t=e.context,i=e.connection,r=n.getLayer("overlays");t.originalWaypoints=i.waypoints.slice(),t.draggerGfx=l.addSegmentDragger(r,t.segmentStart,t.segmentEnd),f(t.draggerGfx).add("djs-dragging"),n.addMarker(i,d)}),t.on("connectionSegment.move.move",function(e){var t=e.context,n=t.connection,r=t.segmentStartIndex,o=t.segmentEndIndex,a=t.segmentStart,s=t.segmentEnd,c=t.axis,u=t.originalWaypoints.slice(),l=i(a,c,e["d"+c]),h=i(s,c,e["d"+c]),d=u.length,f=0;u[r]=l,u[o]=h;var m,g;r<2&&(m=p.getOrientation(n.source,l),1===r?"intersect"===m&&(u.shift(),u[0]=l,f--):"intersect"!==m&&(u.unshift(a),f++)),o>d-3&&(g=p.getOrientation(n.target,h),o===d-2?"intersect"===g&&(u.pop(),u[u.length-1]=h):"intersect"!==g&&u.push(s)),t.newWaypoints=n.waypoints=x(n,u),b(t,f,e),t.newSegmentStartIndex=r+f,_(e)}),t.on("connectionSegment.move.hover",function(e){e.context.hover=e.hover,n.addMarker(e.hover,h)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(e){var t=e.context.hover;t&&n.removeMarker(t,h)}),t.on("connectionSegment.move.cleanup",function(e){var t=e.context,i=t.connection;t.draggerGfx&&m(t.draggerGfx),n.removeMarker(i,d)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(e){var t=e.context;t.connection.waypoints=t.originalWaypoints,_(e)}),t.on("connectionSegment.move.end",function(e){var t=e.context,n=t.connection,i=t.newWaypoints,r=t.newSegmentStartIndex;i=i.map(function(e){return{original:e.original,x:Math.round(e.x),y:Math.round(e.y)}});var o=w(i,r),a=o.waypoints,s=x(n,a),c=o.segmentOffset,u={segmentMove:{segmentStartIndex:t.segmentStartIndex,newSegmentStartIndex:r+c}};v.updateWaypoints(n,s,u)})}var u=e(237),l=e(121),p=e(222),h="connect-hover",d="djs-updating",f=e(448),m=e(454),g=e(247).translate;c.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"],t.exports=c},{121:121,222:222,237:237,247:247,448:448,454:454}],124:[function(e,t,n){t.exports={__depends__:[e(139),e(204)],__init__:["bendpoints","bendpointSnapping"],bendpoints:["type",e(122)],bendpointMove:["type",e(119)],connectionSegmentMove:["type",e(123)],bendpointSnapping:["type",e(120)]}},{119:119,120:120,122:122,123:123,139:139,204:204}],125:[function(e,t,n){"use strict";function i(e,t,n,i){e.on("element.changed",function(i){var o=i.element;(o.parent||o===t.getRootElement())&&(i.gfx=n.getGraphics(o)),i.gfx&&e.fire(r(o)+".changed",i)}),e.on("elements.changed",function(t){var n=t.elements;n.forEach(function(t){e.fire("element.changed",{element:t})}),i.updateContainments(n)}),e.on("shape.changed",function(e){i.update("shape",e.element,e.gfx)}),e.on("connection.changed",function(e){i.update("connection",e.element,e.gfx)})}var r=e(235).getType;i.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"],t.exports=i},{235:235}],126:[function(e,t,n){t.exports={__init__:["changeSupport"],changeSupport:["type",e(125)]}},{125:125}],127:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.get=function(){return this._data},i.prototype.set=function(e){this._data=e},i.prototype.clear=function(){var e=this._data;return delete this._data,e},i.prototype.isEmpty=function(){return!this._data}},{}],128:[function(e,t,n){t.exports={clipboard:["type",e(127)]}},{127:127}],129:[function(e,t,n){"use strict";function i(e,t,n,i,h,d){function f(e,t){return i.allowed("connection.create",{source:e,target:t})}function m(e,t,n,i){var o=d.getShapePath(n),a=i&&d.getShapePath(i),s=d.getConnectionPath({waypoints:[e,t]});return e=r(o,s,!0)||e,t=i&&r(a,s,!1)||t,[e,t]}e.on("connect.move",function(e){var t,n,i=e.context,r=i.source,o=i.target,a=i.visual,s=i.sourcePosition;t={x:e.x,y:e.y},n=m(s,t,r,o),u(a,{points:[n[0].x,n[0].y,n[1].x,n[1].y]})}),
e.on("connect.hover",function(e){var t,n=e.context,i=n.source,r=e.hover;null!==(t=n.canExecute=f(i,r))&&(n.target=r,h.addMarker(r,t?a:s))}),e.on(["connect.out","connect.cleanup"],function(e){var t=e.context;t.target&&h.removeMarker(t.target,t.canExecute?a:s),t.target=null,t.canExecute=!1}),e.on("connect.cleanup",function(e){var t=e.context;t.visual&&p(t.visual)}),e.on("connect.start",function(e){var t,n=e.context;t=l("polyline"),u(t,{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"}),c(h.getDefaultLayer(),t),n.visual=t}),e.on("connect.end",function(e){var t=e.context,i=t.source,r=t.sourcePosition,o=t.target,a={x:e.x,y:e.y},s=t.canExecute||f(i,o);if(!s)return!1;var c=null,u={connectionStart:r,connectionEnd:a};"object"==typeof s&&(c=s),n.connect(i,o,c,u)}),this.start=function(e,n,i,r){"object"!=typeof i&&(r=i,i=o(n)),t.init(e,"connect",{autoActivate:r,data:{shape:n,context:{source:n,sourcePosition:i}}})}}var r=e(222).getElementLineIntersection,o=e(222).getMid,a="connect-ok",s="connect-not-ok",c=e(445),u=e(447),l=e(451),p=e(454);i.$inject=["eventBus","dragging","modeling","rules","canvas","graphicsFactory"],t.exports=i},{222:222,445:445,447:447,451:451,454:454}],130:[function(e,t,n){t.exports={__depends__:[e(210),e(204),e(139)],connect:["type",e(129)]}},{129:129,139:139,204:204,210:210}],131:[function(e,t,n){"use strict";function i(e,t){this._providers=[],this._eventBus=e,this._overlays=t,this._current=null,this._init()}function r(e,t){var n=h(e);(a(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}var o=e(400),a=e(399),s=e(281),c=e(253),u=e(255),l=e(249),p=e(257),h=e(250),d=e(254);i.$inject=["eventBus","overlays"],t.exports=i,i.prototype._init=function(){var e=this._eventBus,t=this;e.on("selection.changed",function(e){var n=e.newSelection;1===n.length?t.open(n[0]):t.close()}),e.on("elements.delete",function(e){var n=e.elements;s(n,function(e){t.isOpen(e)&&t.close()})}),e.on("element.changed",function(e){var n=e.element,i=t._current;i&&i.element===n&&t.open(n,!0)})},i.prototype.registerProvider=function(e){this._providers.push(e)},i.prototype.getEntries=function(e){var t={};return s(this._providers,function(n){var i=n.getContextPadEntries(e);s(i,function(e,n){t[n]=e})}),t},i.prototype.trigger=function(e,t,n){var i,r,a,s=this._current.element,c=this._current.entries,u=t.delegateTarget||t.target;if(!u)return t.preventDefault();if(i=c[l(u,"data-action")],r=i.action,a=t.originalEvent||t,o(r)){if("click"===e)return r(a,s,n)}else if(r[e])return r[e](a,s,n);t.preventDefault()},i.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},i.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html;s(t,function(e,t){var n,o=e.group||"default",a=d(e.html||'<div class="entry" draggable="true"></div>');l(a,"data-action",t),n=p("[data-group="+o+"]",i),n||(n=d('<div class="group" data-group="'+o+'"></div>'),i.appendChild(n)),n.appendChild(a),e.className&&r(a,e.className),e.title&&l(a,"title",e.title),e.imageUrl&&a.appendChild(d('<img src="'+e.imageUrl+'">'))}),h(i).add("open"),this._current={element:e,pad:n,entries:t},this._eventBus.fire("contextPad.open",{current:this._current})},i.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=d('<div class="djs-context-pad"></div>');c.bind(i,".entry","click",function(e){t.trigger("click",e)}),c.bind(i,".entry","dragstart",function(e){t.trigger("dragstart",e)}),u.bind(i,"mousedown",function(e){e.stopPropagation()}),this._overlayId=n.add(e,"context-pad",{position:{right:-9,top:-6},html:i});var r=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{element:e,pad:r}),r},i.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},i.prototype.isOpen=function(e){return!(!this._current||e&&this._current.element!==e)}},{249:249,250:250,253:253,254:254,255:255,257:257,281:281,399:399,400:400}],132:[function(e,t,n){t.exports={__depends__:[e(147),e(188)],contextPad:["type",e(131)]}},{131:131,147:147,188:188}],133:[function(e,t,n){"use strict";function i(e,t,n,i,r,a){this._eventBus=e,this._modeling=t,this._elementFactory=n,this._rules=i,this._canvas=a,this._clipboard=r,this._descriptors=[],this.registerDescriptor(function(e,t){return t.priority=1,t.id=e.id,e.parent&&(t.parent=e.parent.id),e.labelTarget&&(t.priority=4,t.labelTarget=e.labelTarget.id),e.host&&(t.priority=2,t.host=e.host.id),"number"==typeof e.x&&(t.x=e.x,t.y=e.y),e.width&&(t.width=e.width,t.height=e.height),e.waypoints&&(t.priority=3,t.waypoints=[],o(e.waypoints,function(e){var n={x:e.x,y:e.y};e.original&&(n.original={x:e.original.x,y:e.original.y}),t.waypoints.push(n)})),e.source&&e.target&&(t.source=e.source.id,t.target=e.target.id),t})}var r=e(399),o=e(281),a=e(283),s=e(280),c=e(268),u=e(287),l=e(284),p=e(235).getBBox,h=e(244),d=e(233),f=e(235);i.$inject=["eventBus","modeling","elementFactory","rules","clipboard","canvas"],t.exports=i,i.prototype.copy=function(e){var t,n,i=this._clipboard;if(r(e)||(e=e?[e]:[]),e.length)return t=this.createTree(e),n=this._bbox=h.center(p(t.allShapes)),delete t.allShapes,o(t,function(e){o(e,function(t){var i,r;t.labelTarget?(r=s(e,{id:t.labelTarget}),i=r.waypoints?h.delta(t,r.waypoints[0]):h.delta(t,r)):3===t.priority?(i=[],o(t.waypoints,function(e){var t=h.delta(e,n);i.push(t)},this)):i=h.delta(t,n),t.delta=i})}),this._eventBus.fire("elements.copy",{context:{tree:t}}),0===Object.keys(t).length?i.clear():i.set(t),this._eventBus.fire("elements.copied",{context:{tree:t}}),t},i.prototype.paste=function(e){var t,n=this._clipboard,i=this._modeling,r=this._eventBus,o=this._rules,a=n.get(),s=e.element,c=e.point;if(!n.isEmpty()){if(t=l(a,function(e,t,n){var i=parseInt(n,10);return isNaN(i)?e:(e[i]=t,e)},{},this),!o.allowed("elements.paste",{tree:t,target:s}))return void r.fire("elements.paste.rejected",{context:{tree:t,position:c,target:s}});i.pasteElements(t,s,c)}},i.prototype._computeDelta=function(e,t){var n=this._bbox,i={};return t.labelTarget?h.delta(t,t.labelTarget):(3===t.priority?(i=[],o(t.waypoints,function(e){var t=h.delta(e,n);i.push(t)},this)):i=h.delta(t,n),i)},i.prototype.hasRelations=function(e,t){var n,i;return!(t.waypoints&&(n=s(e,{id:t.source.id}),i=s(e,{id:t.target.id}),!n||!i))&&!(t.labelTarget&&!s(e,{id:t.labelTarget.id}))},i.prototype.registerDescriptor=function(e){if("function"!=typeof e)throw new Error("the descriptor must be a function");if(-1!==this._descriptors.indexOf(e))throw new Error("this descriptor is already registered");this._descriptors.push(e)},i.prototype._executeDescriptors=function(e){return e.descriptor||(e.descriptor={}),o(this._descriptors,function(t){e.descriptor=t(e.element,e.descriptor)}),e},i.prototype.createTree=function(e){function t(e,t){return r.allowed("element.copy",{collection:e,element:t})}function n(e){var t,n=c(l,{element:e.element});if(-1===n)return l.push(e);t=l[n],t.depth<e.depth&&(l.splice(n,1),l.push(e))}var i,r=this._rules,s={},l=[],p=d.getTopLevel(e);return s.allShapes=[],f.eachElement(p,function(e,t,i){var r=e.children;if(!e.labelTarget)return e.label&&n({element:e.label,depth:i}),function(e){o(e,function(e){e&&e.length&&o(e,function(e){e.label&&n({element:e.label,depth:i}),n({element:e,depth:i})})})}([e.attachers,e.incoming,e.outgoing]),n({element:e,depth:i}),r||void 0}),l=a(l,function(e){return this._executeDescriptors(e)},this),l=u(l,function(e){return e.descriptor.priority}),i=a(l,function(e){return e.element}),o(l,function(e){var n=e.depth;this.hasRelations(s.allShapes,e.element)&&t(i,e.element)&&(s.allShapes.push(e.element),s[n]||(s[n]=[]),s[n].push(e.descriptor))},this),s}},{233:233,235:235,244:244,268:268,280:280,281:281,283:283,284:284,287:287,399:399}],134:[function(e,t,n){t.exports={__depends__:[e(128),e(204),e(180)],__init__:["copyPaste"],copyPaste:["type",e(133)]}},{128:128,133:133,180:180,204:204}],135:[function(e,t,n){"use strict";function i(e,t,n,i,m,g,y){function v(e,t,i,r){if(!t)return!1;var o,a,s,c={source:i,shape:e,target:t,position:r};return a=n.allowed("shape.attach",c),a||(o=n.allowed("shape.create",c)),(o||a)&&(s=i&&n.allowed("connection.create",{source:i,target:e,hints:{targetParent:t,targetAttach:a}})),!(!o&&!a)&&{attach:a,connect:s}}function x(e,t){[s,o,a,c].forEach(function(n){n===t?m.addMarker(e,n):m.removeMarker(e,n)})}function _(e){var t,n,i;t=h("g"),l(t,g.cls("djs-drag-group",["no-events"])),u(m.getDefaultLayer(),t),n=h("g"),p(n).add("djs-dragger"),u(t,n),f(n,e.width/-2,e.height/-2);var r=h("g");return p(r).add("djs-visual"),u(n,r),i=r,y.drawShape(i,e),t}e.on("create.move",function(e){var t,n=e.context,i=e.hover,r=n.shape,o=n.source,u={x:e.x,y:e.y};t=n.canExecute=i&&v(r,i,o,u),i&&null!==t&&(n.target=i,t&&t.attach?x(i,s):x(i,t?c:a))}),e.on("create.move",r,function(e){var t=e.context,n=t.shape,i=t.visual;i||(i=t.visual=_(n)),f(i,e.x,e.y)}),e.on(["create.end","create.out","create.cleanup"],function(e){var t=e.context,n=t.target;n&&x(n,null)}),e.on("create.end",function(e){var t=e.context,n=t.source,r=t.shape,o=t.target,a=t.canExecute,s=a&&a.attach,c=a&&a.connect,u={x:e.x,y:e.y};if(!a)return!1;r=c?i.appendShape(n,r,u,o,{attach:s,connection:!0===c?{}:c}):i.createShape(r,u,o,{attach:s}),t.shape=r}),e.on("create.cleanup",function(e){var t=e.context;t.visual&&d(t.visual)}),this.start=function(e,n,i){t.init(e,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:n,context:{shape:n,source:i}}})}}var r=750,o="drop-ok",a="drop-not-ok",s="attach-ok",c="new-parent",u=e(445),l=e(447),p=e(448),h=e(451),d=e(454),f=e(247).translate;i.$inject=["eventBus","dragging","rules","modeling","canvas","styles","graphicsFactory"],t.exports=i},{247:247,445:445,447:447,448:448,451:451,454:454}],136:[function(e,t,n){t.exports={__depends__:[e(139),e(210),e(204)],create:["type",e(135)]}},{135:135,139:139,204:204,210:210}],137:[function(e,t,n){"use strict";function i(e){e.preventDefault()}function r(e){h.stopPropagation(e)}function o(e){return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent}function a(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function s(e,t){return{x:e.x-t.x,y:e.y-t.y}}function c(e,t,n){function c(e){var n=t.viewbox(),i=t._container.getBoundingClientRect();return{x:n.x+u((e.x-i.left)/n.scale),y:n.y+u((e.y-i.top)/n.scale)}}function y(t,n){n=n||R;var i=l(new m,n.payload,n.data,{isTouch:n.isTouch});return!1!==e.fire("drag."+t,i)&&e.fire(n.prefix+"."+t,i)}function v(e,i){var o=R.payload,u=R.displacement,p=R.globalStart,f=h.toPoint(e),m=s(f,p),v=R.localStart,x=c(f),_=s(x,v);if(!R.active&&(i||a(m)>R.threshold)){if(l(o,{x:v.x+u.x,y:v.y+u.y,dx:0,dy:0},{originalEvent:e}),!1===y("start"))return S();R.active=!0,R.keepSelection||(o.previousSelection=n.get(),n.select(null)),R.cursor&&d.set(R.cursor),t.addMarker(t.getRootElement(),g)}r(e),R.active&&(l(o,{x:x.x+u.x,y:x.y+u.y,dx:_.x,dy:_.y},{originalEvent:e}),y("move"))}function x(e){var t,n=!0;R.active&&(e&&(R.payload.originalEvent=e,r(e)),n=y("end")),!1===n&&y("rejected"),t=M(!0!==n),y("ended",t)}function _(e){27===e.which&&(e.preventDefault(),S())}function b(t){var n;R.active&&(n=f.install(e),setTimeout(n,400)),x(t)}function w(e){v(e)}function E(e){var t=R.payload;t.hoverGfx=e.gfx,t.hover=e.element,y("hover")}function C(e){y("out");var t=R.payload;t.hoverGfx=null,t.hover=null}function S(e){var t;if(R){var n=R.active;n&&y("cancel"),t=M(e),n&&y("canceled",t)}}function M(r){var o,a;y("cleanup"),d.unset(),a=R.trapClick?b:x,p.unbind(document,"mousemove",v),p.unbind(document,"dragstart",i),p.unbind(document,"selectstart",i),p.unbind(document,"mousedown",a,!0),p.unbind(document,"mouseup",a,!0),p.unbind(document,"keyup",_),p.unbind(document,"touchstart",w,!0),p.unbind(document,"touchcancel",S,!0),p.unbind(document,"touchmove",v,!0),p.unbind(document,"touchend",x,!0),e.off("element.hover",E),e.off("element.out",C),t.removeMarker(t.getRootElement(),g);var s=R.payload.previousSelection;return!1!==r&&s&&!n.get().length&&n.select(s),o=R,R=null,o}function P(t,n,a,u){R&&S(!1),"string"==typeof n&&(u=a,a=n,n=null),u=l({},T,u||{});var d,f,m,g,M,P=u.data||{};g=u.trapClick?b:x,t?(d=h.getOriginal(t)||t,f=h.toPoint(t),r(t),"dragstart"===d.type&&i(d)):(d=null,f={x:0,y:0}),m=c(f),n||(n=m),M=o(d),R=l({prefix:a,data:P,payload:{},globalStart:f,displacement:s(n,m),localStart:m,isTouch:M},u),u.manual||(M?(p.bind(document,"touchstart",w,!0),p.bind(document,"touchcancel",S,!0),p.bind(document,"touchmove",v,!0),p.bind(document,"touchend",x,!0)):(p.bind(document,"mousemove",v),p.bind(document,"dragstart",i),p.bind(document,"selectstart",i),p.bind(document,"mousedown",g,!0),p.bind(document,"mouseup",g,!0)),p.bind(document,"keyup",_),e.on("element.hover",E),e.on("element.out",C)),y("init"),u.autoActivate&&v(t,!0)}var R,T={threshold:5,trapClick:!0};e.on("diagram.destroy",S),this.init=P,this.move=v,this.hover=E,this.out=C,this.end=x,this.cancel=S,this.context=function(){return R},this.setOptions=function(e){l(T,e)}}var u=Math.round,l=e(408),p=e(255),h=e(236),d=e(234),f=e(231),m=e(105).Event,g="djs-drag-active";c.$inject=["eventBus","canvas","selection"],t.exports=c},{105:105,231:231,234:234,236:236,255:255,408:408}],138:[function(e,t,n){"use strict";function i(e){return o(e,"svg, .djs-element",!0)}function r(e,t,n){var r=this;e.on("drag.start",function(t){e.once("drag.move",function(){e.once("drag.move",function(e){r.ensureHover(e)})})}),this.ensureHover=function(e){if(!e.hover){var r,o,s,c,u=e.originalEvent;u instanceof MouseEvent&&(r=a.toPoint(u),o=document.elementFromPoint(r.x,r.y),(c=i(o))&&(s=n.get(c),t.hover({element:s,gfx:c})))}}}var o=e(252),a=e(236);r.$inject=["eventBus","dragging","elementRegistry"],t.exports=r},{236:236,252:252}],139:[function(e,t,n){t.exports={__init__:["hoverFix"],__depends__:[e(210)],dragging:["type",e(137)],hoverFix:["type",e(138)]}},{137:137,138:138,210:210}],140:[function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,c,u){this._actions={undo:function(){t.undo()},redo:function(){t.redo()},copy:function(){var e=i.get();o.copy(e)},paste:function(){var e=u.getHoverContext();o.paste(e)},stepZoom:function(e){r.stepZoom(e.value)},zoom:function(e){s.zoom(e.value)},removeSelection:function(){var e=i.get();if(e.length){var t,r=c.allowed("elements.delete",{elements:e});if(!1===r)return;t=a(r)?r:e,t.length&&n.removeElements(t.slice())}},moveCanvas:function(e){var t=0,n=0,i=e.invertY,r=e.speed,o=r/Math.min(Math.sqrt(s.viewbox().scale),1);switch(e.direction){case"left":t=o;break;case"up":n=o;break;case"right":t=-o;break;case"down":n=-o}n&&i&&(n=-n),s.scroll({dx:t,dy:n})}}}function r(e,t){return new Error(e+" "+t)}var o=e(281),a=e(399);i.$inject=["eventBus","commandStack","modeling","selection","zoomScroll","copyPaste","canvas","rules","mouseTracking"],t.exports=i,i.prototype.trigger=function(e,t){if(!this._actions[e])throw r(e,"is not a registered action");return this._actions[e](t)},i.prototype.register=function(e,t){if("string"==typeof e)return this._registerAction(e,t);o(e,function(e,t){this._registerAction(t,e)},this)},i.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw r(e,"is already registered");this._actions[e]=t},i.prototype.unregister=function(e){if(!this.isRegistered(e))throw r(e,"is not a registered action");this._actions[e]=void 0},i.prototype.length=function(){return Object.keys(this._actions).length},i.prototype.isRegistered=function(e){return!!this._actions[e]}},{281:281,399:399}],141:[function(e,t,n){t.exports={__depends__:[e(210),e(134),e(229)],__init__:["editorActions"],editorActions:["type",e(140)]}},{134:134,140:140,210:210,229:229}],142:[function(e,t,n){"use strict";function i(e,t,n,i,a){var s=this;this._dragging=t,a.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(e){var t=e.context,n=e.hover,a=t.canStartConnect=s.canStartConnect(n);null!==a&&(t.startTarget=n,i.addMarker(n,a?r:o))}),e.on(["global-connect.out","global-connect.cleanup"],function(e){var t=e.context.startTarget,n=e.context.canStartConnect;t&&i.removeMarker(t,n?r:o)}),e.on(["global-connect.ended"],function(t){var i=t.context,r=i.startTarget,o={x:t.x,y:t.y};if(s.canStartConnect(r))return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,r,o)}),!1})}var r="connect-ok",o="connect-not-ok";i.$inject=["eventBus","dragging","connect","canvas","toolManager"],t.exports=i,i.prototype.start=function(e){this._dragging.init(e,"global-connect",{trapClick:!1,data:{context:{}}})},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},i.prototype.registerProvider=function(e){this._provider=e},i.prototype.canStartConnect=function(e){return this._provider.canStartConnect(e)}},{}],143:[function(e,t,n){t.exports={__depends__:[e(130),e(204),e(139),e(219)],globalConnect:["type",e(142)]}},{130:130,139:139,142:142,204:204,219:219}],144:[function(e,t,n){"use strict";function i(e,t,n,i){this._dragging=n,i.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",o,function(e){if(r(e))return this.activateMove(e.originalEvent),!1},this),e.on("hand.end",function(t){var n=t.originalEvent.target;if(!(t.hover||n instanceof SVGElement))return!1;e.once("hand.ended",function(){this.activateMove(t.originalEvent,{reactivate:!0})},this)},this),e.on("hand.move.move",function(e){var n=t.viewbox().scale;t.scroll({dx:e.dx*n,dy:e.dy*n})}),e.on("hand.move.end",function(t){var n=t.context,i=n.reactivate;return!r(t)&&i&&e.once("hand.move.ended",function(e){this.activateHand(e.originalEvent,!0,!0)},this),!1},this)}var r=e(242).hasPrimaryModifier,o=1500;i.$inject=["eventBus","canvas","dragging","toolManager"],t.exports=i,i.prototype.activateMove=function(e,t,n){"object"==typeof t&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:"grab",data:{context:n||{}}})},i.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:"grab",data:{context:{reactivate:n}}})},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^hand/.test(e.prefix)}},{242:242}],145:[function(e,t,n){"use strict";t.exports={__depends__:[e(219)],__init__:["handTool"],handTool:["type",e(144)]}},{144:144,219:219}],146:[function(e,t,n){"use strict";function i(e,t,n){function i(n,i,r){if(a(i)){var o,s;r?s=t.getGraphics(r):(o=i.delegateTarget||i.target)&&(s=o,r=t.get(s)),s&&r&&!1===e.fire(n,{element:r,gfx:s,originalEvent:i})&&(i.stopPropagation(),i.preventDefault())}}function p(e){var t=b[e];return t||(t=b[e]=function(t){i(e,t)}),t}function m(e,t,n){var r=w[e];if(!r)throw new Error("unmapped DOM event name <"+e+">");return i(r,t,n)}function g(e,t,n){var i=p(n);i.$delegate=o.bind(e,E,t,i)}function y(e,t,n){o.unbind(e,t,p(n).$delegate)}function v(e){r(w,function(t,n){g(e,n,t)})}function x(e){r(w,function(t,n){y(e,n,t)})}var _=n.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15}),b={},w={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup"},E="svg, .djs-element";e.on("canvas.destroy",function(e){x(e.svg)}),e.on("canvas.init",function(e){v(e.svg)}),e.on(["shape.added","connection.added"],function(e){var t,n=e.element,i=e.gfx;n.waypoints?t=h(n.waypoints):(t=u("rect"),c(t,{x:0,y:0,width:n.width,height:n.height})),c(t,_),s(i,t)}),e.on("shape.changed",f,function(e){var t=e.element,n=e.gfx,i=l(".djs-hit",n);c(i,{width:t.width,height:t.height})}),e.on("connection.changed",function(e){var t=e.element,n=e.gfx,i=l(".djs-hit",n);d(i,t.waypoints)}),this.fire=i,this.triggerMouseEvent=m,this.mouseHandler=p,this.registerEvent=g,this.unregisterEvent=y}var r=e(281),o=e(253),a=e(242).isPrimaryButton,s=e(445),c=e(447),u=e(451),l=e(257),p=e(246),h=p.createLine,d=p.updateLine,f=500;i.$inject=["eventBus","elementRegistry","styles"],t.exports=i},{242:242,246:246,253:253,257:257,281:281,445:445,447:447,451:451}],147:[function(e,t,n){t.exports={__init__:["interactionEvents"],interactionEvents:["type",e(146)]}},{146:146}],148:[function(e,t,n){"use strict";function i(e,t,n){var i=this;this._config=e||{},this._eventBus=t,this._editorActions=n,this._listeners=[],this._keyHandler=function(e){var t,n,r=e.target,o=i._listeners,a=e.keyCode||e.charCode||-1;if(!r||!c(r,"input, textarea")&&"true"!==r.contentEditable)for(t=0;n=o[t];t++)n(a,e)&&(e.preventDefault(),e.stopPropagation())},t.on("diagram.destroy",function(){i._fire("destroy"),i.unbind(),i._listeners=null}),t.on("diagram.init",function(){i._fire("init"),e&&e.bindTo&&i.bind(e.bindTo)}),this._init()}function r(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function o(e){return e.ctrlKey||e.metaKey}function a(e){return e.shiftKey}var s=e(255),c=e(256);i.$inject=["config.keyboard","eventBus","editorActions"],t.exports=i,i.prototype.bind=function(e){this.unbind(),this._node=e,s.bind(e,"keydown",this._keyHandler,!0),this._fire("bind")},i.prototype.getBinding=function(){return this._node},i.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),s.unbind(e,"keydown",this._keyHandler,!0)),this._node=null},i.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node,listeners:this._listeners})},i.prototype._init=function(){function e(e,t){if(o(t)&&!a(t)&&90===e)return h.trigger("undo"),!0}function t(e,t){if(o(t)&&(89===e||90===e&&a(t)))return h.trigger("redo"),!0}function n(e,t){if(o(t)&&67===e)return h.trigger("copy"),!0}function i(e,t){if(o(t)&&86===e)return h.trigger("paste"),!0}function r(e,t){if((107===e||187===e||171===e||61===e)&&o(t))return h.trigger("stepZoom",{value:1}),!0}function s(e,t){if((109===e||189===e||173===e)&&o(t))return h.trigger("stepZoom",{value:-1}),!0}function c(e,t){if((96===e||48===e)&&o(t))return h.trigger("zoom",{value:1}),!0}function u(e,t){if(46===e)return h.trigger("removeSelection"),!0}function l(e,t){if([37,38,39,40].indexOf(e)>=0){var n={invertY:d.invertY,speed:d.speed||50};switch(e){case 37:n.direction="left";break;case 38:n.direction="up";break;case 39:n.direction="right";break;case 40:n.direction="down"}return h.trigger("moveCanvas",n),!0}}var p=this._listeners,h=this._editorActions,d=this._config;p.push(e),p.push(t),p.push(n),p.push(i),p.push(u),p.push(r),p.push(s),p.push(c),p.push(l)},i.prototype.addListener=function(e){this._listeners.push(e)},i.prototype.hasModifier=r,i.prototype.isCmd=o,i.prototype.isShift=a},{255:255,256:256}],149:[function(e,t,n){t.exports={__init__:["keyboard"],keyboard:["type",e(148)]}},{148:148}],150:[function(e,t,n){"use strict";function i(e,t,n){h.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",l,function(e){var t=e.context,n=t.shapes,i=t.validatedShapes;t.shapes=r(n),t.validatedShapes=r(i)}),i&&t.on("shape.move.start",u,function(e){var t=e.context,n=t.shapes,r=[];o(n,function(e){var n=e.label;n&&!n.hidden&&-1===t.shapes.indexOf(n)&&r.push(n),e.labelTarget&&r.push(e)}),o(r,function(e){i.makeDraggable(t,e,!0)})}),this.postExecute("elements.move",l,function(e){var t=e.context,n=t.closure,i=n.enclosedElements;t.enclosedLabels=s(i,function(e){var t=e.label;return t&&!i[t.id]?[t,p(t)]:null}).filter(function(e){return e})}),this.postExecuted("elements.move",function(e){var t=e.context,i=t.enclosedLabels,r=t.delta;o(i,function(e){var t=e[0],i=e[1],o=p(t);o.x===i.x&&o.y===i.y&&n.moveShape(t,r,t.labelTarget.parent)})})}function r(e){return a(e,function(t){return-1===e.indexOf(t.labelTarget)})}var o=e(281),a=e(279),s=e(283),c=e(267),u=250,l=1400,p=e(222).getMid,h=e(99);c(i,h),i.$inject=["injector","eventBus","modeling"],t.exports=i},{222:222,267:267,279:279,281:281,283:283,99:99}],151:[function(e,t,n){t.exports={__init__:["labelSupport"],labelSupport:["type",e(150)]}},{150:150}],152:[function(e,t,n){"use strict";function i(e,t,n,i,o,a){this._selection=o,this._dragging=n;var h=this,d={create:function(e){var n,i=t.getDefaultLayer();n=e.frame=l("rect"),u(n,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),c(i,n)},update:function(e){var t=e.frame,n=e.bbox;u(t,{x:n.x,y:n.y,width:n.width,height:n.height})},remove:function(e){e.frame&&p(e.frame)}};a.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("lasso.selection.ended",function(){h.activateLasso(t.originalEvent,!0)})}),e.on("lasso.end",function(e){var t=r(e),n=i.filter(function(e){return e});h.select(n,t)}),e.on("lasso.start",function(e){var t=e.context;t.bbox=r(e),d.create(t)}),e.on("lasso.move",function(e){var t=e.context;t.bbox=r(e),d.update(t)}),e.on("lasso.cleanup",function(e){var t=e.context;d.remove(t)}),e.on("element.mousedown",1500,function(e){if(s(e))return h.activateLasso(e.originalEvent),!0})}function r(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y};return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?{x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?{x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?{x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?{x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:{x:n.x,y:n.y,width:0,height:0}}var o=e(416),a=e(235).getEnclosedElements,s=e(242).hasSecondaryModifier,c=e(445),u=e(447),l=e(451),p=e(454);i.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"],t.exports=i,i.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:"crosshair",data:{context:{}}})},i.prototype.activateSelection=function(e){this._dragging.init(e,"lasso.selection",{trapClick:!1,cursor:"crosshair",data:{context:{}}})},i.prototype.select=function(e,t){var n=a(e,t);this._selection.select(o(n))},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)}},{235:235,242:242,416:416,445:445,447:447,451:451,454:454}],153:[function(e,t,n){"use strict";t.exports={__depends__:[e(219)],__init__:["lassoTool"],lassoTool:["type",e(152)]}},{152:152,219:219}],154:[function(e,t,n){"use strict";function i(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}var r=e(281),o=e(224);i.$inject=["eventBus","elementFactory","commandStack"],t.exports=i,i.prototype.getHandlers=function(){return{"shape.append":e(156),"shape.create":e(159),"shape.delete":e(162),"shape.move":e(167),"shape.resize":e(172),"shape.replace":e(171),"shape.toggleCollapse":e(174),spaceTool:e(173),"label.create":e(158),"connection.create":e(157),"connection.delete":e(160),"connection.move":e(165),"connection.layout":e(164),"connection.updateWaypoints":e(176),"connection.reconnectStart":e(170),"connection.reconnectEnd":e(170),"elements.move":e(166),"elements.delete":e(161),"elements.distribute":e(163),"elements.align":e(155),"element.updateAttachment":e(175),"elements.paste":e(169)}},i.prototype.registerHandlers=function(e){r(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},i.prototype.moveShape=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},i.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},i.prototype.moveElements=function(e,t,n,i){i=i||{};var r,o=i.attach,a=n;!0===o?(r=n,a=n.parent):!1===o&&(r=null);var s={shapes:e,delta:t,newParent:a,newHost:r,hints:i};this._commandStack.execute("elements.move",s)},i.prototype.moveConnection=function(e,t,n,i,r){"object"==typeof i&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},i.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},i.prototype.createConnection=function(e,t,n,i,r,o){"object"==typeof n&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var a={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",a),a.connection},i.prototype.createShape=function(e,t,n,i,r){"number"!=typeof i&&(r=i,i=void 0),r=r||{};var o,a,s=r.attach;e=this._create("shape",e),s?(o=n.parent,a=n):o=n;var c={position:t,shape:e,parent:o,parentIndex:i,host:a,hints:r};return this._commandStack.execute("shape.create",c),c.shape},i.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},i.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,attach:r.attach};return this._commandStack.execute("shape.append",o),o.shape},i.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},i.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},i.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},i.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},i.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},i.prototype.pasteElements=function(e,t,n){var i={tree:e,topParent:t,position:n};this._commandStack.execute("elements.paste",i)},i.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},i.prototype.resizeShape=function(e,t,n){var i={shape:e,newBounds:t,minBounds:n};this._commandStack.execute("shape.resize",i)},i.prototype.createSpace=function(e,t,n,i){var r={movingShapes:e,resizingShapes:t,delta:n,direction:i};this._commandStack.execute("spaceTool",r)},i.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},i.prototype.reconnectStart=function(e,t,n){var i={connection:e,newSource:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectStart",i)},i.prototype.reconnectEnd=function(e,t,n){var i={connection:e,newTarget:t,dockingOrPoints:n};this._commandStack.execute("connection.reconnectEnd",i)},i.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},i.prototype._create=function(e,t){return t instanceof o.Base?t:this._elementFactory.create(e,t)},i.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)}},{155:155,156:156,157:157,158:158,159:159,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,224:224,281:281}],155:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._canvas=t}var r=e(281);i.$inject=["modeling","canvas"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;r(n,function(e){var n={x:0,y:0};i.left?n.x=i.left-e.x:i.right?n.x=i.right-e.width-e.x:i.center?n.x=i.center-Math.round(e.width/2)-e.x:i.top?n.y=i.top-e.y:i.bottom?n.y=i.bottom-e.height-e.y:i.middle&&(n.y=i.middle-Math.round(e.height/2)-e.y),t.moveElements([e],n,e.parent)})},i.prototype.postExecute=function(e){}},{281:281}],156:[function(e,t,n){"use strict";function i(e){
this._modeling=e}function r(e,t){return o(e.outgoing,function(e){return e.target===t})}var o=e(277);e(267)(i,e(168)),i.$inject=["modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape;i=e.shape=this._modeling.createShape(i,e.position,n,{attach:e.attach}),e.shape=i},i.prototype.postExecute=function(e){var t=e.connectionParent||e.shape.parent;r(e.source,e.shape)||this._modeling.connect(e.source,e.shape,e.connection,t)}},{168:168,267:267,277:277}],157:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._layouter=t}i.$inject=["canvas","layouter"],t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t},i.prototype.revert=function(e){var t=e.connection;this._canvas.removeConnection(t),t.source=null,t.target=null}},{}],158:[function(e,t,n){"use strict";function i(e){a.call(this,e)}function r(e){["width","height"].forEach(function(t){void 0===e[t]&&(e[t]=0)})}var o=e(267),a=e(159);o(i,a),i.$inject=["canvas"],t.exports=i;var s=a.prototype.execute;i.prototype.execute=function(e){var t=e.shape;return r(t),t.labelTarget=e.labelTarget,s.call(this,e)};var c=a.prototype.revert;i.prototype.revert=function(e){return e.shape.labelTarget=null,c.call(this,e)}},{159:159,267:267}],159:[function(e,t,n){"use strict";function i(e){this._canvas=e}var r=e(408),o=Math.round;i.$inject=["canvas"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,a=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return void 0!==n.width?r(t,n):r(t,{x:n.x-o(t.width/2),y:n.y-o(t.height/2)}),this._canvas.addShape(t,i,a),t},i.prototype.revert=function(e){this._canvas.removeShape(e.shape)}},{408:408}],160:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._modeling=t}var r=e(232);i.$inject=["canvas","modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=e.connection;t.label&&this._modeling.removeShape(t.label)},i.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=r.indexOf(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t.label=null,t},i.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,r.add(n.children,t,i),this._canvas.addConnection(t,n),t}},{232:232}],161:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._elementRegistry=t}var r=e(281);e(267)(i,e(168)),i.$inject=["modeling","elementRegistry"],t.exports=i,i.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;r(i,function(e){n.get(e.id)&&(e.waypoints?t.removeConnection(e):t.removeShape(e))})}},{168:168,267:267,281:281}],162:[function(e,t,n){"use strict";function i(e,t){this._canvas=e,this._modeling=t}function r(e){return e.waypoints}var o=e(232),a=e(245).saveClear;i.$inject=["canvas","modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=n.label;n.labelTarget&&(e.labelTarget=n.labelTarget,n.labelTarget=null),i&&this._modeling.removeShape(i,{nested:!0}),a(n.incoming,function(e){t.removeConnection(e,{nested:!0})}),a(n.outgoing,function(e){t.removeConnection(e,{nested:!0})}),a(n.children,function(e){r(e)?t.removeConnection(e,{nested:!0}):t.removeShape(e,{nested:!0})})},i.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=o.indexOf(i.children,n),n.label=null,t.removeShape(n),n},i.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex,a=e.labelTarget;return o.add(i.children,n,r),a&&(a.label=n),t.addShape(n,i),n}},{232:232,245:245}],163:[function(e,t,n){"use strict";function i(e){this._modeling=e}var r=e(281),o=e(287);i.$inject=["modeling"],t.exports=i;var a={x:"y",y:"x"};i.prototype.preExecute=function(e){function t(e,t){e.range.min=Math.min(t[d],e.range.min),e.range.max=Math.max(t[d]+t[f],e.range.max)}function n(e){return e[d]+e[f]/2}function i(e){return e.length-1}function s(e){return e.max-e.min}function c(e,t){var i={y:0};i[d]=e-n(t),i[d]&&(i[a[d]]=0,p.moveElements([t],i,t.parent))}var u,l,p=this._modeling,h=e.groups,d=e.axis,f=e.dimension,m=h[0],g=i(h),y=h[g],v=0;r(h,function(e,a){var u,l,p;if(e.elements.length<2)return void(a&&a!==h.length-1&&(t(e,e.elements[0]),v+=s(e.range)));u=o(e.elements,d),l=u[0],a===g&&(l=u[i(u)]),p=n(l),e.range=null,r(u,function(n){if(c(p,n),null===e.range)return void(e.range={min:n[d],max:n[d]+n[f]});t(e,n)}),a&&a!==h.length-1&&(v+=s(e.range))}),l=Math.abs(y.range.min-m.range.max),(u=Math.round((l-v)/(h.length-1)))<h.length-1||r(h,function(e,t){var n,i={};e!==m&&e!==y&&(n=h[t-1],e.range.max=0,r(e.elements,function(t,r){i[a[d]]=0,i[d]=n.range.max-t[d]+u,e.range.min!==t[d]&&(i[d]+=t[d]-e.range.min),i[d]&&p.moveElements([t],i,t.parent),e.range.max=Math.max(t[d]+t[f],r?e.range.max:0)}))})},i.prototype.postExecute=function(e){}},{281:281,287:287}],164:[function(e,t,n){"use strict";function i(e,t){this._layouter=e,this._canvas=t}var r=e(408);i.$inject=["layouter","canvas"],t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return r(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},i.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t}},{408:408}],165:[function(e,t,n){"use strict";function i(){}var r=e(281),o=e(232);t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,a=e.newParentIndex,s=t.parent;return e.oldParent=s,e.oldParentIndex=o.remove(s.children,t),o.add(i.children,t,a),t.parent=i,r(t.waypoints,function(e){e.x+=n.x,e.y+=n.y,e.original&&(e.original.x+=n.x,e.original.y+=n.y)}),t},i.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,a=e.oldParentIndex,s=e.delta;return o.remove(n.children,t),o.add(i.children,t,a),t.parent=i,r(t.waypoints,function(e){e.x-=s.x,e.y-=s.y,e.original&&(e.original.x-=s.x,e.original.y-=s.y)}),t}},{232:232,281:281}],166:[function(e,t,n){"use strict";function i(e){this._helper=new r(e)}var r=e(178);i.$inject=["modeling"],t.exports=i,i.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},i.prototype.postExecute=function(e){var t,n=e.hints;n&&n.primaryShape&&(t=n.primaryShape,n.oldParent=t.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,t)},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{178:178}],167:[function(e,t,n){"use strict";function i(e){this._modeling=e,this._helper=new s(e)}var r=e(408),o=e(281),a=e(414),s=e(178),c=e(232),u=e(177).getMovedSourceAnchor,l=e(177).getMovedTargetAnchor;i.$inject=["modeling"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,o=e.newParentIndex,s=t.parent;return e.oldBounds=a(t,["x","y","width","height"]),e.oldParent=s,e.oldParentIndex=c.remove(s.children,t),c.add(i.children,t,o),r(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},i.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;!1!==i.layout&&(o(t.incoming,function(e){r.layoutConnection(e,{connectionEnd:l(e,t,n)})}),o(t.outgoing,function(e){r.layoutConnection(e,{connectionStart:u(e,t,n)})})),!1!==i.recurse&&this.moveChildren(e)},i.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,o=e.delta;return c.add(n.children,t,i),r(t,{parent:n,x:t.x-o.x,y:t.y-o.y}),t},i.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},i.prototype.getNewParent=function(e){return e.newParent||e.shape.parent}},{177:177,178:178,232:232,281:281,408:408,414:414}],168:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(){},i.prototype.revert=function(){}},{}],169:[function(e,t,n){"use strict";function i(e,t){o(t,function(t){e[t]&&delete e[t]})}function r(e,t,n,i,r,o){this._eventBus=e,this._canvas=t,this._selection=n,this._elementFactory=i,this._modeling=r,this._rules=o}var o=e(281),a=e(283),s=e(287),c=e(397);e(267)(r,e(168)),r.$inject=["eventBus","canvas","selection","elementFactory","modeling","rules"],t.exports=r,r.prototype.preExecute=function(e){var t=this._eventBus,n=e.tree,r=e.topParent,u=e.position;n.createdElements={},n.labels=[],o(n,function(e,l){var p=parseInt(l,10);isNaN(p)||(p||(e=a(e,function(e){return e.parent=r,e})),e=s(e,"priority"),o(e,function(e){var o,a=e.id,s=e.parent,l={},h=c(e);if(p&&(h.parent=this._getCreatedElement(s,n)),s){if(t.fire("element.paste",{createdElements:n.createdElements,descriptor:h}),s=h.parent,h.waypoints)return void((h=this._createConnection(h,s,u,n))&&(n.createdElements[a]={element:h,descriptor:e}));if(h.parent!==r&&(l.root=!1),h.host&&(l.attach=!0,s=this._getCreatedElement(h.host,n)),h.labelTarget)return n.labels.push(h);o={x:Math.round(u.x+h.delta.x+h.width/2),y:Math.round(u.y+h.delta.y+h.height/2)},i(h,["id","parent","delta","host","priority"]),(h=this._createShape(h,s,o,l))&&(n.createdElements[a]={element:h,descriptor:e})}},this))},this)},r.prototype.postExecute=function(e){var t=this._modeling,n=this._selection,i=e.tree,r=i.labels,a=[];o(r,function(e){var n,r,o,a=this._getCreatedElement(e.labelTarget,i);a&&(n=a.label)&&(r={x:a.x,y:a.y},a.waypoints&&(r=a.waypoints[0]),o={x:Math.round(r.x-n.x+e.delta.x),y:Math.round(r.y-n.y+e.delta.y)},t.moveShape(n,o,a.parent))},this),o(i[0],function(e){var t=e.id,n=i.createdElements[t];n&&a.push(n.element)}),n.select(a)},r.prototype._createConnection=function(e,t,n,r){var o,s,c=this._modeling,u=this._rules;return e.waypoints=a(e.waypoints,function(t,i){return{x:Math.round(n.x+e.delta[i].x),y:Math.round(n.y+e.delta[i].y)}}),o=this._getCreatedElement(e.source,r),s=this._getCreatedElement(e.target,r),o&&s&&u.allowed("element.paste",{source:o,target:s})?(i(e,["id","parent","delta","source","target","width","height","priority"]),c.createConnection(o,s,e,t)):null},r.prototype._createShape=function(e,t,n,i,r){var o=this._modeling,a=this._elementFactory;if(!this._rules.allowed("element.paste",{element:e,position:n,parent:t}))return null;var s=a.createShape(e);return o.createShape(s,n,t,i,r),s},r.prototype._getCreatedElement=function(e,t){return t.createdElements[e]&&t.createdElements[e].element}},{168:168,267:267,281:281,283:283,287:287,397:397}],170:[function(e,t,n){"use strict";function i(){}var r=e(399);i.$inject=[],t.exports=i,i.prototype.execute=function(e){var t,n=e.newSource,i=e.newTarget,o=e.connection,a=e.dockingOrPoints,s=o.waypoints;if(!n&&!i)throw new Error("newSource or newTarget are required");if(n&&i)throw new Error("must specify either newSource or newTarget");return e.oldWaypoints=s,r(a)?t=a:(t=s.slice(),t.splice(n?0:-1,1,a)),n&&(e.oldSource=o.source,o.source=n),i&&(e.oldTarget=o.target,o.target=i),o.waypoints=t,o},i.prototype.revert=function(e){var t=e.newSource,n=e.newTarget,i=e.connection;return t&&(i.source=e.oldSource),n&&(i.target=e.oldTarget),i.waypoints=e.oldWaypoints,i}},{399:399}],171:[function(e,t,n){"use strict";function i(e,t){this._modeling=e,this._rules=t}var r=e(281);i.$inject=["modeling","rules"],t.exports=i,i.prototype.preExecute=function(e){function t(e,t,n,i){return a.allowed(e,{source:t,target:n,connection:i})}var n,i=this,o=this._modeling,a=this._rules,s=e.oldShape,c=e.newData,u=e.hints,l={x:c.x,y:c.y};n=e.newShape=e.newShape||i.createShape(c,l,s.parent),s.host&&o.updateAttachment(n,s.host);var p;!1!==u.moveChildren&&(p=s.children.slice(),o.moveElements(p,{x:0,y:0},n));var h=s.incoming.slice(),d=s.outgoing.slice();r(h,function(e){var r=e.waypoints,o=r[r.length-1];t("connection.reconnectEnd",e.source,n,e)&&i.reconnectEnd(e,n,o)}),r(d,function(e){var r=e.waypoints,o=r[0],a=e.target;t("connection.reconnectStart",n,a,e)&&i.reconnectStart(e,n,o)})},i.prototype.postExecute=function(e){var t=this._modeling,n=e.oldShape,i=e.newShape;r(i.incoming,function(e){t.layoutConnection(e,{endChanged:!0})}),r(i.outgoing,function(e){t.layoutConnection(e,{startChanged:!0})}),t.removeShape(n)},i.prototype.execute=function(e){},i.prototype.revert=function(e){},i.prototype.createShape=function(e,t,n){return this._modeling.createShape(e,t,n)},i.prototype.reconnectStart=function(e,t,n){this._modeling.reconnectStart(e,t,n)},i.prototype.reconnectEnd=function(e,t,n){this._modeling.reconnectEnd(e,t,n)}},{281:281}],172:[function(e,t,n){"use strict";function i(e){this._modeling=e}var r=e(408),o=e(281),a=e(177).getResizedSourceAnchor,s=e(177).getResizedTargetAnchor;i.$inject=["modeling"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(void 0===n.x||void 0===n.y||void 0===n.width||void 0===n.height)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},r(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},i.prototype.postExecute=function(e){var t=e.shape,n=e.oldBounds,i=this._modeling;o(t.incoming,function(e){i.layoutConnection(e,{connectionEnd:s(e,t,n)})}),o(t.outgoing,function(e){i.layoutConnection(e,{connectionStart:a(e,t,n)})})},i.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return r(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t}},{177:177,281:281,408:408}],173:[function(e,t,n){"use strict";function i(e){this._modeling=e}var r=e(281),o=e(216);i.$inject=["modeling"],t.exports=i,i.prototype.preExecute=function(e){var t=this._modeling,n=e.resizingShapes,i=e.delta,a=e.direction;r(n,function(e){var n=o.resizeBounds(e,a,i);t.resizeShape(e,n)})},i.prototype.postExecute=function(e){var t=this._modeling,n=e.movingShapes,i=e.delta;t.moveElements(n,i,void 0,{autoResize:!1,attach:!1})},i.prototype.execute=function(e){},i.prototype.revert=function(e){}},{216:216,281:281}],174:[function(e,t,n){"use strict";function i(e){this._modeling=e}function r(e){var t={};return e.forEach(function(e){t[e.id]=e.hidden}),t}function o(e,t){e.forEach(function(e){e.hidden=t})}function a(e,t){e.forEach(function(e){e.hidden=t[e.id]})}i.$inject=["modeling"],t.exports=i,i.prototype.execute=function(e){var t=e.shape,n=t.children;return e.oldChildrenVisibility=r(n),t.collapsed=!t.collapsed,o(n,t.collapsed),[t].concat(n)},i.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children;return a(i,n),t.collapsed=!t.collapsed,[t].concat(i)}},{}],175:[function(e,t,n){"use strict";function i(e){this._modeling=e}function r(e,t){return a.remove(e&&e.attachers,t)}function o(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),a.add(i,t,n)}}var a=e(232);t.exports=i,i.$inject=["modeling"],i.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=r(i,t),o(n,t),t.host=n,t},i.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,a=e.attacherIdx;return t.host=i,r(n,t),o(i,t,a),t}},{232:232}],176:[function(e,t,n){"use strict";function i(){}t.exports=i,i.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},i.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t}},{}],177:[function(e,t,n){"use strict";function i(e,t,n){var i=c(e),r=i[0];return u(r.original||r,n,t)}function r(e,t,n){var i=c(e),r=i[i.length-1];return u(r.original||r,n,t)}function o(e,t,n){return i(e,t,s(t,n))}function a(e,t,n){return r(e,t,s(t,n))}function s(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function c(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}var u=e(230).getNewAttachPoint;t.exports.getResizedSourceAnchor=i,t.exports.getResizedTargetAnchor=r,t.exports.getMovedSourceAnchor=o,t.exports.getMovedTargetAnchor=a},{230:230}],178:[function(e,t,n){"use strict";function i(e){this._modeling=e}var r=e(281),o=e(235),a=e(177).getMovedSourceAnchor,s=e(177).getMovedTargetAnchor;t.exports=i,i.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},i.prototype.moveClosure=function(e,t,n,i,o){var c=this._modeling,u=e.allShapes,l=e.allConnections,p=e.enclosedConnections,h=e.topLevel,d=!1;o&&o.parent===n&&(d=!0),r(u,function(e){c.moveShape(e,t,h[e.id]&&!d&&n,{recurse:!1,layout:!1})}),r(l,function(e){var i=!!u[e.source.id],r=!!u[e.target.id];p[e.id]&&i&&r?c.moveConnection(e,t,h[e.id]&&!d&&n):c.layoutConnection(e,{connectionStart:i&&a(e,e.source,t),connectionEnd:r&&s(e,e.target,t)})})},i.prototype.getClosure=function(e){return o.getClosure(e)}},{177:177,235:235,281:281}],179:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._canvas=t,this._init()}var r=e(289);i.$inject=["eventBus","canvas"],t.exports=i,i.prototype.getHoverContext=function(){var e=this._canvas.viewbox();return{element:this._hoverElement,point:{x:e.x+Math.round(this._mouseX/e.scale),y:e.y+Math.round(this._mouseY/e.scale)}}},i.prototype._init=function(){var e=this._eventBus,t=this._canvas,n=t.getContainer();this._setMousePosition=r(this._setMousePosition,this),n.addEventListener("mousemove",this._setMousePosition),e.on("diagram.destroy",function(){n.removeEventListener("mousemove",this._setMousePosition)},this),e.on("element.hover",this._setHoverElement,this)},i.prototype._setHoverElement=function(e){this._hoverElement=e.element},i.prototype._setMousePosition=function(e){this._mouseX=e.layerX,this._mouseY=e.layerY}},{289:289}],180:[function(e,t,n){"use strict";t.exports={__init__:["mouseTracking"],mouseTracking:["type",e(179)]}},{179:179}],181:[function(e,t,n){"use strict";function i(e){return{x:e.x+d(e.width/2),y:e.y+d(e.height/2)}}function r(e,t,n,r,s){function c(e,t,n,i){return s.allowed("elements.move",{shapes:e,delta:t,position:n,target:i})}function f(e,n,r){if(!n.waypoints&&n.parent){var o=i(n);return t.init(e,o,"shape.move",{cursor:"grabbing",autoActivate:r,data:{shape:n,context:{}}}),!0}}e.on("shape.move.start",p,function(e){var t=e.context,n=e.shape,i=r.get().slice();-1===i.indexOf(n)&&(i=[n]),i=o(i),a(t,{shapes:i,validatedShapes:i,shape:n})}),e.on("shape.move.start",l,function(e){var t=e.context,n=t.validatedShapes;if(!(t.canExecute=c(n)))return!1}),e.on("shape.move.move",u,function(e){var t,n=e.context,i=n.validatedShapes,r=e.hover,o={x:e.dx,y:e.dy},a={x:e.x,y:e.y};if(t=c(i,o,a,r),n.delta=o,n.canExecute=t,null===t)return void(n.target=null);n.target=r}),e.on("shape.move.end",function(e){var t=e.context,i=t.delta,r=t.canExecute,o="attach"===r,a=t.shapes;if(!r)return!1;i.x=d(i.x),i.y=d(i.y),n.moveElements(a,i,t.target,{primaryShape:t.shape,attach:o})}),e.on("element.mousedown",function(e){var t=h(e);if(!t)throw new Error("must supply DOM mousedown event");return f(t,e.element)}),this.start=f}function o(e){var t=c(e,"id");return s(e,function(e){for(;e=e.parent;)if(t[e.id])return!1;return!0})}var a=e(408),s=e(279),c=e(282),u=500,l=1250,p=1500,h=e(236).getOriginal,d=Math.round;r.$inject=["eventBus","dragging","modeling","selection","rules"],t.exports=r},{236:236,279:279,282:282,408:408}],182:[function(e,t,n){"use strict";function i(e,t,n,i,a){function u(e){return r(l(e))}function l(e){var t=f.selfAndAllChildren(e,!0),n=d(t,function(e){return(e.incoming||[]).concat(e.outgoing||[])});return s(t.concat(n),!0)}function p(e,t){[S,w,E,C].forEach(function(i){i===t?n.addMarker(e,i):n.removeMarker(e,i)})}function h(e,t,i){a.addDragger(t,e.dragGroup),i&&n.addMarker(t,b),e.allDraggedElements?e.allDraggedElements.push(t):e.allDraggedElements=[t]}e.on("shape.move.start",_,function(e){var t=e.context,r=t.shapes,p=t.allDraggedElements,h=u(r);if(!t.dragGroup){var d=v("g");g(d,i.cls("djs-drag-group",["no-events"]));var f=n.getDefaultLayer();m(f,d),t.dragGroup=d}h.forEach(function(e){a.addDragger(e,t.dragGroup)}),p=p?s(p,l(r)):l(r),c(p,function(e){n.addMarker(e,b)}),t.allDraggedElements=p,t.differentParents=o(r)}),e.on("shape.move.move",_,function(e){var t=e.context,n=t.dragGroup,i=t.target,r=t.shape.parent,o=t.canExecute;i&&("attach"===o?p(i,S):t.canExecute&&i&&i.id!==r.id?p(i,C):p(i,t.canExecute?w:E)),x(n,e.dx,e.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(e){var t=e.context,n=t.target;n&&p(n,null)}),e.on("shape.move.cleanup",function(e){var t=e.context,i=t.allDraggedElements,r=t.dragGroup;c(i,function(e){n.removeMarker(e,b)}),r&&y(r)}),this.makeDraggable=h}function r(e){return u(e,function(t){if(a(t)){var n=l(e,t.source),i=l(e,t.target);return n&&i}return!0})}function o(e){return 1!==p(h(e,function(e){return e.parent&&e.parent.id}))}function a(e){return e.waypoints}var s=e(269),c=e(281),u=e(279),l=e(280),p=e(285),h=e(282),d=e(283),f=e(235),m=e(445),g=e(447),y=e(449),v=e(451),x=e(247).translate,_=499,b="djs-dragging",w="drop-ok",E="drop-not-ok",C="new-parent",S="attach-ok";i.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],t.exports=i},{235:235,247:247,269:269,279:279,280:280,281:281,282:282,283:283,285:285,445:445,447:447,449:449,451:451}],183:[function(e,t,n){t.exports={__depends__:[e(147),e(210),e(186),e(204),e(139),e(194)],__init__:["move","movePreview"],move:["type",e(181)],movePreview:["type",e(182)]}},{139:139,147:147,181:181,182:182,186:186,194:194,204:204,210:210}],184:[function(e,t,n){"use strict";function i(e){o.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(e){var n=e.context,i=n.shape||n.connection,r=n.parent,o=t.getOrdering(i,r);o&&(void 0!==o.parent&&(n.parent=o.parent),n.parentIndex=o.index)}),this.preExecute(["shape.move","connection.move"],function(e){var n=e.context,i=n.shape||n.connection,r=n.newParent||i.parent,o=t.getOrdering(i,r);o&&(void 0!==o.parent&&(n.newParent=o.parent),n.newParentIndex=o.index)})}var r=e(267),o=e(99);i.prototype.getOrdering=function(e,t){return null},r(i,o),t.exports=i},{267:267,99:99}],185:[function(e,t,n){"use strict";function i(e,t,n){function i(e,t){var n=c("rect");return s(n,l({x:10,y:10,width:100,height:100},r)),a(e,n),n}this.offset=6;var r=t.cls("djs-outline",["no-fill"]),p=this;e.on(["shape.added","shape.changed"],o,function(e){var t=e.element,n=e.gfx,r=u(".djs-outline",n);r||(r=i(n,t)),p.updateShapeOutline(r,t)}),e.on(["connection.added","connection.changed"],function(e){var t=e.element,n=e.gfx,r=u(".djs-outline",n);r||(r=i(n,t)),p.updateConnectionOutline(r,t)})}var r=e(235).getBBox,o=500,a=e(445),s=e(447),c=e(451),u=e(257),l=e(408);i.prototype.updateShapeOutline=function(e,t){s(e,{x:-this.offset,y:-this.offset,width:t.width+2*this.offset,height:t.height+2*this.offset})},i.prototype.updateConnectionOutline=function(e,t){var n=r(t);s(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+2*this.offset,height:n.height+2*this.offset})},i.$inject=["eventBus","styles","elementRegistry"],t.exports=i},{235:235,257:257,408:408,445:445,447:447,451:451}],186:[function(e,t,n){"use strict";t.exports={__init__:["outline"],outline:["type",e(185)]}},{185:185}],187:[function(e,t,n){"use strict";function i(e){var t=g('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return e.insertBefore(t,e.firstChild),t}function r(e,t,n){h(e.style,{left:t+"px",top:n+"px"})}function o(e,t){e.style.display=!1===t?"none":""}function a(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}function s(e){return void 0!==e}function c(e,t,n,r){this._eventBus=t,this._canvas=n,this._elementRegistry=r,this._ids=w,this._overlayDefaults=h({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=i(n.getContainer()),this._init()}var u=e(399),l=e(405),p=e(403),h=e(408),d=e(281),f=e(280),m=e(279),g=e(254),y=e(250),v=e(249),x=e(258),_=e(251),b=e(235).getBBox,w=new(e(239))("ov");c.$inject=["config.overlays","eventBus","canvas","elementRegistry"],t.exports=c,c.prototype.get=function(e){if(l(e)&&(e={id:e}),l(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?m(t.overlays,{type:e.type}):t.overlays.slice():[]}return e.type?m(this._overlays,{type:e.type}):e.id?this._overlays[e.id]:null},c.prototype.add=function(e,t,n){if(p(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=h({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},c.prototype.remove=function(e){var t=this.get(e)||[];u(t)||(t=[t]);var n=this;d(t,function(e){var t=n._getOverlayContainer(e.element,!0);if(e&&(x(e.html),x(e.htmlContainer),delete e.htmlContainer,delete e.element,delete n._overlays[e.id]),t){var i=t.overlays.indexOf(e);-1!==i&&t.overlays.splice(i,1)}})},c.prototype.show=function(){o(this._overlayRoot)},c.prototype.hide=function(){o(this._overlayRoot,!1)},c.prototype.clear=function(){this._overlays={},this._overlayContainers=[],_(this._overlayRoot)},c.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,o=t.y;if(t.waypoints){var a=b(t);i=a.x,o=a.y}r(n,i,o),v(e.html,"data-container-id",t.id)},c.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,o=t.left,a=t.top;if(void 0!==t.right){var s;s=i.waypoints?b(i).width:i.width,o=-1*t.right+s}if(void 0!==t.bottom){var c;c=i.waypoints?b(i).height:i.height,a=-1*t.bottom+c}r(n,o||0,a||0)},c.prototype._createOverlayContainer=function(e){var t=g('<div class="djs-overlays" style="position: absolute" />');this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},c.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";a(this._overlayRoot,n)},c.prototype._getOverlayContainer=function(e,t){var n=f(this._overlayContainers,function(t){return t.element===e});return n||t?n:this._createOverlayContainer(e)},c.prototype._addOverlay=function(e){var t,n,i=e.id,r=e.element,o=e.html;o.get&&o.constructor.prototype.jquery&&(o=o.get(0)),l(o)&&(o=g(o)),n=this._getOverlayContainer(r),t=g('<div class="djs-overlay" data-overlay-id="'+i+'" style="position: absolute">'),t.appendChild(o),e.type&&y(t).add("djs-overlay-"+e.type),e.htmlContainer=t,n.overlays.push(e),n.html.appendChild(t),this._overlays[i]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},c.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=n&&n.minZoom,r=n&&n.maxZoom,a=e.htmlContainer,c=!0;n&&((s(i)&&i>t.scale||s(r)&&r<t.scale)&&(c=!1),o(a,c)),this._updateOverlayScale(e,t)},c.prototype._updateOverlayScale=function(e,t){var n,i,r,o=e.scale,c=e.htmlContainer,u="";!0!==o&&(!1===o?(n=1,i=1):(n=o.min,i=o.max),s(n)&&t.scale<n&&(r=(1/t.scale||1)*n),s(i)&&t.scale>i&&(r=(1/t.scale||1)*i)),s(r)&&(u="scale("+r+","+r+")"),a(c,u)},c.prototype._updateOverlaysVisibilty=function(e){var t=this;d(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},c.prototype._init=function(){function e(e){n._updateRoot(e),n._updateOverlaysVisibilty(e),n.show()}var t=this._eventBus,n=this;t.on("canvas.viewbox.changing",function(e){n.hide()}),t.on("canvas.viewbox.changed",function(t){e(t.viewbox)}),t.on(["shape.remove","connection.remove"],function(e){var t=e.element,i=n.get({element:t});d(i,function(e){n.remove(e.id)});var r=n._getOverlayContainer(t);if(r){x(r.html);var o=n._overlayContainers.indexOf(r);-1!==o&&n._overlayContainers.splice(o,1)}}),t.on("element.changed",500,function(e){var t=e.element,i=n._getOverlayContainer(t,!0);i&&(d(i.overlays,function(e){n._updateOverlay(e)}),n._updateOverlayContainer(i))}),t.on("element.marker.update",function(e){var t=n._getOverlayContainer(e.element,!0);t&&y(t.html)[e.add?"add":"remove"](e.marker)}),t.on("diagram.clear",this.clear,this)}},{235:235,239:239,249:249,250:250,251:251,254:254,258:258,279:279,280:280,281:281,399:399,403:403,405:405,408:408}],188:[function(e,t,n){t.exports={__init__:["overlays"],overlays:["type",e(187)]}},{187:187}],189:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._canvas=t,this._providers=[];var n=this;e.on("tool-manager.update",function(e){var t=e.tool;n.updateToolHighlight(t)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._providers.length&&(n._init(),n._update())})}function r(e,t){var n=h(e);(a(t)?t:t.split(/\s+/g)).forEach(function(e){n.add(e)})}var o=e(400),a=e(399),s=e(281),c=e(254),u=e(257),l=e(249),p=e(251),h=e(250),d=e(256),f=e(253),m=e(255);i.$inject=["eventBus","canvas"],t.exports=i,i.prototype.registerProvider=function(e){this._providers.push(e),this._diagramInitialized&&(this._container||this._init(),this._update())},i.prototype.getEntries=function(){var e={};return s(this._providers,function(t){var n=t.getPaletteEntries();s(n,function(t,n){e[n]=t})}),e},i.prototype._init=function(){var e=this._canvas,t=this._eventBus,n=e.getContainer(),r=this._container=c(i.HTML_MARKUP),o=this;n.appendChild(r),f.bind(r,".djs-palette-toggle, .entry","click",function(e){var t=e.delegateTarget;if(d(t,".djs-palette-toggle"))return o.toggle();o.trigger("click",e)}),m.bind(r,"mousedown",function(e){e.stopPropagation()}),f.bind(r,".entry","dragstart",function(e){o.trigger("dragstart",e)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:r})},i.prototype._toggleState=function(e){e=e||{};var t,n=this._getParentContainer(),i=this._container,r=this._eventBus,o=h(i);t="twoColumn"in e?e.twoColumn:this._needsCollapse(n.clientHeight,this._entries||{}),o.toggle("two-column",t),"open"in e&&o.toggle("open",e.open),r.fire("palette.changed",{twoColumn:t,open:this.isOpen()})},i.prototype._update=function(){var e=u(".djs-palette-entries",this._container),t=this._entries=this.getEntries();p(e),s(t,function(t,n){var i=t.group||"default",o=u("[data-group="+i+"]",e);o||(o=c('<div class="group" data-group="'+i+'"></div>'),e.appendChild(o));var a=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=c(a);o.appendChild(s),t.separator||(l(s,"data-action",n),t.title&&l(s,"title",t.title),t.className&&r(s,t.className),t.imageUrl&&s.appendChild(c('<img src="'+t.imageUrl+'">')))}),this.open()},i.prototype.trigger=function(e,t,n){var i,r,a,s=this._entries,c=t.delegateTarget||t.target;if(!c)return t.preventDefault();(i=s[l(c,"data-action")])&&(r=i.action,a=t.originalEvent||t,o(r)?"click"===e&&r(a,n):r[e]&&r[e](a,n),t.preventDefault())},i.prototype._layoutChanged=function(){this._toggleState({})},i.prototype._needsCollapse=function(e,t){return e<46*Object.keys(t).length+50},i.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},i.prototype.open=function(){this._toggleState({open:!0})},i.prototype.toggle=function(e){this.isOpen()?this.close():this.open()},i.prototype.isActiveTool=function(e){return e&&this._activeTool===e},i.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=u(".djs-palette-entries",this._container),this._toolsContainer=u("[data-group=tools]",t)),n=this._toolsContainer,s(n.children,function(t){var n=t.getAttribute("data-action");n&&(n=n.replace("-tool",""),t.classList.contains("entry")&&n===e?h(t).add("highlighted-entry"):h(t).remove("highlighted-entry"))})},i.prototype.isOpen=function(){return h(this._container).has("open")},i.prototype._getParentContainer=function(){return this._canvas.getContainer()},
i.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>'},{249:249,250:250,251:251,253:253,254:254,255:255,256:256,257:257,281:281,399:399,400:400}],190:[function(e,t,n){"use strict";t.exports={__init__:["palette"],palette:["type",e(189)]}},{189:189}],191:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._canvas=t,this._providers={}}var r=e(281),o=e(408),a=e(280),s=e(253),c=e(254),u=e(250),l=e(249),p=e(258);i.$inject=["eventBus","canvas"],i.prototype.registerProvider=function(e,t){this._providers[e]=t},i.prototype.create=function(e,t){var n=this._providers[e];if(!n)throw new Error("Provider is not registered: "+e);if(!t)throw new Error("Element is missing");var i=this._current={provider:n,className:e,element:t};return n.getHeaderEntries&&(i.headerEntries=n.getHeaderEntries(t)),i.entries=n.getEntries(t),this},i.prototype.isEmpty=function(){var e=this._current;return 0===e.entries.length&&e.headerEntries&&0===e.headerEntries.length},i.prototype.open=function(e){if(!e)throw new Error("the position argument is missing");this.isOpen()&&this.close();var t=this._current,n=this._canvas,i=n.getContainer();t.position=e,t.container=this._createContainer();var r=t.headerEntries||[],o=t.entries||[];return r.length&&t.container.appendChild(this._createEntries(t.headerEntries,"djs-popup-header")),o.length&&t.container.appendChild(this._createEntries(t.entries,"djs-popup-body")),this._attachContainer(t.container,i,e.cursor),this},i.prototype.close=function(){this.isOpen()&&(this._unbindHandlers(),p(this._current.container),this._current.container=null)},i.prototype.isOpen=function(){return!!this._current.container},i.prototype.trigger=function(e){e.preventDefault();var t=e.delegateTarget||e.target,n=l(t,"data-id"),i=this._getEntry(n);if(i.action)return i.action.call(null,e,i)},i.prototype._getEntry=function(e){var t={id:e},n=a(this._current.entries,t)||a(this._current.headerEntries,t);if(!n)throw new Error("entry not found");return n},i.prototype._createContainer=function(){var e=c('<div class="djs-popup">'),t=this._current.position,n=this._current.className;return o(e.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),u(e).add(n),e},i.prototype._attachContainer=function(e,t,n){var i=this;s.bind(e,".entry","click",function(e){i.trigger(e)});var r=this._canvas.zoom();e.style.transformOrigin="top left",e.style.transform="scale("+r+")",t.appendChild(e),n&&this._assureIsInbounds(e,n),this._bindHandlers()},i.prototype._assureIsInbounds=function(e,t){var n,i,r=this._canvas,a=r._container.getBoundingClientRect(),s=e.offsetLeft,c=e.offsetTop,u=e.scrollWidth,l=e.scrollHeight,p={},h={x:t.x-a.left,y:t.y-a.top};s+u>a.width&&(p.x=!0),c+l>a.height&&(p.y=!0),p.x&&p.y?(n=h.x-u+"px",i=h.y-l+"px"):p.x?(n=h.x-u+"px",i=h.y+"px"):p.y&&h.y<l?(n=h.x+"px",i="10px"):p.y&&(n=h.x+"px",i=h.y-l+"px"),o(e.style,{left:n,top:i},{visibility:"visible","z-index":1e3})},i.prototype._createEntries=function(e,t){var n=c("<div>"),i=this;return u(n).add(t),r(e,function(e){var t=i._createEntry(e,n);n.appendChild(t)}),n},i.prototype._createEntry=function(e){if(!e.id)throw new Error("every entry must have the id property set");var t=c("<div>"),n=u(t);if(n.add("entry"),e.className&&n.add(e.className),l(t,"data-id",e.id),e.label){var i=c("<span>");i.textContent=e.label,t.appendChild(i)}return e.imageUrl&&t.appendChild(c('<img src="'+e.imageUrl+'" />')),!0===e.active&&n.add("active"),!0===e.disabled&&n.add("disabled"),e.title&&(t.title=e.title),t},i.prototype._bindHandlers=function(){function e(){n.close()}var t=this._eventBus,n=this;t.once("contextPad.close",e),t.once("canvas.viewbox.changing",e),t.once("commandStack.changed",e)},i.prototype._unbindHandlers=function(){function e(){n.close()}var t=this._eventBus,n=this;t.off("contextPad.close",e),t.off("canvas.viewbox.changed",e),t.off("commandStack.changed",e)},t.exports=i},{249:249,250:250,253:253,254:254,258:258,280:280,281:281,408:408}],192:[function(e,t,n){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",e(191)]}},{191:191}],193:[function(e,t,n){"use strict";function i(e,t,n){this._elementRegistry=e,this._canvas=t,this._styles=n}function r(e){e.children&&a(e.children,function(e){r(e)}),e.style.markerStart="",e.style.markerEnd=""}function o(e){return e.waypoints}var a=e(281),s=e(445),c=e(447),u=e(450),l=e(451);t.exports=i,i.$inject=["elementRegistry","canvas","styles"],i.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},i.prototype.addDragger=function(e,t){var n=this.getGfx(e),i=u(n),a=n.getBoundingClientRect();return o(e)&&r(i),c(i,this._styles.cls("djs-dragger",[],{x:a.top,y:a.left})),s(t,i),i},i.prototype.addFrame=function(e,t){var n=l("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return s(t,n),n}},{281:281,445:445,447:447,450:450,451:451}],194:[function(e,t,n){"use strict";t.exports={__init__:["previewSupport"],previewSupport:["type",e(193)]}},{193:193}],195:[function(e,t,n){"use strict";function i(e){this._modeling=e}t.exports=i,i.$inject=["modeling"],i.prototype.replaceElement=function(e,t,n){var i=this._modeling,r=null;return e.waypoints||(t.x=Math.ceil(e.x+(t.width||e.width)/2),t.y=Math.ceil(e.y+(t.height||e.height)/2),r=i.replaceShape(e,t,n)),r}},{}],196:[function(e,t,n){"use strict";t.exports={__init__:["replace"],replace:["type",e(195)]}},{195:195}],197:[function(e,t,n){"use strict";function i(e,t,n,i){function r(e,t){var n,i=e.shape,r=e.direction,o=e.resizeConstraints;e.delta=t,n=a.resizeBounds(i,r,t),e.newBounds=a.ensureConstraints(n,o),e.canExecute=l.canResize(e)}function o(e){var t=e.resizeConstraints,n=e.minBounds;void 0===t&&(void 0===n&&(n=l.computeMinResizeBox(e)),e.resizeConstraints={min:s(n)})}function u(e){var t=e.shape,i=e.canExecute,r=e.newBounds;i&&(r=c(r),n.resizeShape(t,r))}this._dragging=i,this._rules=t;var l=this;e.on("resize.start",function(e){o(e.context)}),e.on("resize.move",function(e){var t={x:e.dx,y:e.dy};r(e.context,t)}),e.on("resize.end",function(e){u(e.context)})}var r=e(414),o=e(408),a=e(200),s=e(222).asTRBL,c=e(222).roundBounds;i.prototype.canResize=function(e){var t=this._rules,n=r(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},i.prototype.activate=function(e,t,n){var i,r,a=this._dragging;if("string"==typeof n&&(n={direction:n}),i=o({shape:t},n),!(r=i.direction))throw new Error("must provide a direction (nw|se|ne|sw)");a.init(e,"resize",{autoActivate:!0,cursor:"resize-"+(/nw|se/.test(r)?"nwse":"nesw"),data:{shape:t,context:i}})},i.prototype.computeMinResizeBox=function(e){var t,n,i=e.shape,r=e.direction;return t=e.minDimensions||{width:10,height:10},n=a.computeChildrenBBox(i,e.childrenBoxPadding),a.getMinResizeBounds(r,i,t,n)},i.$inject=["eventBus","rules","modeling","dragging"],t.exports=i},{200:200,222:222,408:408,414:414}],198:[function(e,t,n){"use strict";function i(e,t,n,i){this._resize=i,this._canvas=t;var o=this;e.on("selection.changed",function(e){var t=e.newSelection;o.removeResizers(),1===t.length&&r(t,o.addResizer,o)}),e.on("shape.changed",function(e){var t=e.element;n.isSelected(t)&&(o.removeResizers(),o.addResizer(t))})}var r=e(281),o=e(445),a=e(447),s=e(448),c=e(449),u=e(451),l=e(255),p=e(242).isPrimaryButton,h=e(222).asTRBL,d=e(247).transform;i.prototype.makeDraggable=function(e,t,n){function i(t){p(t)&&r.activate(t,e,n)}var r=this._resize;l.bind(t,"mousedown",i),l.bind(t,"touchstart",i)},i.prototype._createResizer=function(e,t,n,i,r){var c=this._getResizersParent(),l=u("g");s(l).add("djs-resizer"),s(l).add("djs-resizer-"+e.id),s(l).add("djs-resizer-"+r),o(c,l);var p=u("rect");a(p,{x:-7,y:-7,width:5,height:5}),s(p).add("djs-resizer-visual"),o(l,p);var h=u("rect");return a(h,{x:-7,y:-7,width:20,height:20}),s(h).add("djs-resizer-hit"),o(l,h),d(l,t,n,i),l},i.prototype.createResizer=function(e,t){var n,i=h(e);n="nw"===t?this._createResizer(e,i.left,i.top,0,t):"ne"===t?this._createResizer(e,i.right,i.top,90,t):"se"===t?this._createResizer(e,i.right,i.bottom,180,t):this._createResizer(e,i.left,i.bottom,270,t),this.makeDraggable(e,n,t)},i.prototype.addResizer=function(e){this._resize.canResize({shape:e})&&(this.createResizer(e,"nw"),this.createResizer(e,"ne"),this.createResizer(e,"se"),this.createResizer(e,"sw"))},i.prototype.removeResizers=function(){var e=this._getResizersParent();c(e)},i.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},i.$inject=["eventBus","canvas","selection","resize"],t.exports=i},{222:222,242:242,247:247,255:255,281:281,445:445,447:447,448:448,449:449,451:451}],199:[function(e,t,n){"use strict";function i(e,t,n){function i(e){var i=e.shape,a=e.newBounds,c=e.frame;c||(c=e.frame=n.addFrame(i,t.getDefaultLayer()),t.addMarker(i,r)),a.width>5&&s(c,{x:a.x,width:a.width}),a.height>5&&s(c,{y:a.y,height:a.height}),e.canExecute?u(c).remove(o):u(c).add(o)}function l(e){var n=e.shape;e.frame&&c(e.frame),t.removeMarker(n,r)}e.on("resize.move",a,function(e){i(e.context)}),e.on("resize.cleanup",function(e){l(e.context)})}var r="djs-resizing",o="resize-not-ok",a=500,s=e(447),c=e(454),u=e(448);i.$inject=["eventBus","canvas","previewSupport"],t.exports=i},{447:447,448:448,454:454}],200:[function(e,t,n){"use strict";function i(e){return"number"==typeof e}function r(e,t,n){var r=t[e],o=n.min&&n.min[e],a=n.max&&n.max[e];return i(o)&&(r=(/top|left/.test(e)?p:l)(r,o)),i(a)&&(r=(/top|left/.test(e)?l:p)(r,a)),r}function o(e,t){return void 0!==e?e:h}function a(e,t){var n,i,r,a;return"object"==typeof t?(n=o(t.left),i=o(t.right),r=o(t.top),a=o(t.bottom)):n=i=r=a=o(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+a}}function s(e){return!e.waypoints&&"label"!==e.type}function c(e,t){var n;if(n=void 0===e.length?u(e.children,s):e,n.length)return a(d(n),t)}var u=e(279),l=Math.max,p=Math.min,h=20,d=e(235).getBBox,f=e(222).asTRBL,m=e(222).asBounds;t.exports.substractTRBL=function(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}},t.exports.resizeBounds=function(e,t,n){var i=n.x,r=n.y;switch(t){case"nw":return{x:e.x+i,y:e.y+r,width:e.width-i,height:e.height-r};case"sw":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height+r};case"ne":return{x:e.x,y:e.y+r,width:e.width+i,height:e.height-r};case"se":return{x:e.x,y:e.y,width:e.width+i,height:e.height+r};default:throw new Error("unrecognized direction: "+t)}},t.exports.resizeTRBL=function(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}},t.exports.reattachPoint=function(e,t,n){var i=e.width/t.width,r=e.height/t.height;return{x:Math.round(t.x+t.width/2)-Math.floor((e.x+e.width/2-n.x)/i),y:Math.round(t.y+t.height/2)-Math.floor((e.y+e.height/2-n.y)/r)}},t.exports.ensureConstraints=function(e,t){if(!t)return e;var n=f(e);return m({top:r("top",n,t),right:r("right",n,t),bottom:r("bottom",n,t),left:r("left",n,t)})},t.exports.getMinResizeBounds=function(e,t,n,i){var r=f(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},a=i?f(i):o,s={top:p(o.top,a.top),left:p(o.left,a.left),bottom:l(o.bottom,a.bottom),right:l(o.right,a.right)};return m(s)},t.exports.addPadding=a,t.exports.computeChildrenBBox=c},{222:222,235:235,279:279}],201:[function(e,t,n){t.exports={__depends__:[e(204),e(139),e(194)],__init__:["resize","resizePreview","resizeHandles"],resize:["type",e(197)],resizePreview:["type",e(199)],resizeHandles:["type",e(198)]}},{139:139,194:194,197:197,198:198,199:199,204:204}],202:[function(e,t,n){"use strict";function i(e){o.call(this,e),this.init()}var r=e(267),o=e(99);i.$inject=["eventBus"],r(i,o),t.exports=i,i.prototype.addRule=function(e,t,n){var i=this;"string"==typeof e&&(e=[e]),e.forEach(function(e){i.canExecute(e,t,function(e,t,i){return n(e)},!0)})},i.prototype.init=function(){}},{267:267,99:99}],203:[function(e,t,n){"use strict";function i(e){this._commandStack=e.get("commandStack",!1)}i.$inject=["injector"],t.exports=i,i.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),void 0===n||n}},{}],204:[function(e,t,n){t.exports={__init__:["rules"],rules:["type",e(203)]}},{203:203}],205:[function(e,t,n){"use strict";function i(e,t,n,r){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=r,this._container=h(i.BOX_HTML),this._searchInput=u(i.INPUT_SELECTOR,this._container),this._resultsContainer=u(i.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}function r(e){var t=e.width+12,n=e.height+12;return{position:{bottom:n-6,right:t-6},show:!0,html:'<div style="'+["width: "+t+"px","height: "+n+"px"].join("; ")+'" class="'+i.OVERLAY_CLASS+'"></div>'}}function o(e,t,n){var i=a(t),r=h(n);r.innerHTML=i,e.appendChild(r)}function a(e){var t="";return e.forEach(function(e){e.matched?t+='<strong class="'+i.RESULT_HIGHLIGHT_CLASS+'">'+e.matched+"</strong>":t+=e.normal}),""!==t?t:null}var s=e(251),c=e(253),u=e(257),l=e(250),p=e(249),h=e(254),d=e(235).getBBox;i.$inject=["canvas","eventBus","overlays","selection"],i.prototype._bindEvents=function(){function e(e,n,i,r){t._eventMaps.push({el:e,type:i,listener:c.bind(e,n,i,r)})}var t=this;e(document,"html","click",function(e){t.close()}),e(this._container,i.INPUT_SELECTOR,"click",function(e){e.stopPropagation(),e.delegateTarget.focus()}),e(this._container,i.RESULT_SELECTOR,"mouseover",function(e){e.stopPropagation(),t._scrollToNode(e.delegateTarget),t._preselect(e.delegateTarget)}),e(this._container,i.RESULT_SELECTOR,"click",function(e){e.stopPropagation(),t._select(e.delegateTarget)}),e(this._container,i.INPUT_SELECTOR,"keydown",function(e){38===e.keyCode&&e.preventDefault(),40===e.keyCode&&e.preventDefault()}),e(this._container,i.INPUT_SELECTOR,"keyup",function(e){if(27===e.keyCode)return t.close();if(13===e.keyCode){var n=t._getCurrentResult();return n?t._select(n):t.close()}return 38===e.keyCode?t._scrollToDirection(!0):40===e.keyCode?t._scrollToDirection():void(37!==e.keyCode&&39!==e.keyCode&&t._search(e.delegateTarget.value))})},i.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){c.unbind(e.el,e.type,e.listener)})},i.prototype._search=function(e){var t=this;if(this._clearResults(),e&&""!==e){var n=this._searchProvider.find(e);if(n.length){n.forEach(function(e){var n=e.element.id,i=t._createResultNode(e,n);t._results[n]={element:e.element,node:i}});var r=u(i.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(r),this._preselect(r)}}},i.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},i.prototype._scrollToNode=function(e){if(e&&e!==this._getCurrentResult()){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},i.prototype._clearResults=function(){s(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")},i.prototype._getCurrentResult=function(){return u(i.RESULT_SELECTED_SELECTOR,this._resultsContainer)},i.prototype._createResultNode=function(e,t){var n=h(i.RESULT_HTML);return e.primaryTokens.length>0&&o(n,e.primaryTokens,i.RESULT_PRIMARY_HTML),o(n,e.secondaryTokens,i.RESULT_SECONDARY_HTML),p(n,i.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},i.prototype.registerProvider=function(e){this._searchProvider=e},i.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,l(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},i.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,l(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))},i.prototype.toggle=function(){this.isOpen()?this.close():this.open()},i.prototype.isOpen=function(){return this._open},i.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&l(t).remove(i.RESULT_SELECTED_CLASS);var n=p(e,i.RESULT_ID_ATTRIBUTE),r=this._results[n].element;l(e).add(i.RESULT_SELECTED_CLASS),this._resetOverlay(r),this._centerViewbox(r),this._selection.select(r),this._eventBus.fire("searchPad.preselected",r)}},i.prototype._select=function(e){var t=p(e,i.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._centerViewbox(n),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},i.prototype._centerViewbox=function(e){var t=this._canvas.viewbox(),n=d(e),i={x:n.x+n.width/2-t.outer.width/2,y:n.y+n.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(i),this._canvas.zoom(t.scale)},i.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=d(e),n=r(t);this._overlayId=this._overlays.add(e,n)}},t.exports=i,i.CONTAINER_SELECTOR=".djs-search-container",i.INPUT_SELECTOR=".djs-search-input input",i.RESULTS_CONTAINER_SELECTOR=".djs-search-results",i.RESULT_SELECTOR=".djs-search-result",i.RESULT_SELECTED_CLASS="djs-search-result-selected",i.RESULT_SELECTED_SELECTOR="."+i.RESULT_SELECTED_CLASS,i.RESULT_ID_ATTRIBUTE="data-result-id",i.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",i.OVERLAY_CLASS="djs-search-overlay",i.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>',i.RESULT_HTML='<div class="djs-search-result"></div>',i.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',i.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>'},{235:235,249:249,250:250,251:251,253:253,254:254,257:257}],206:[function(e,t,n){t.exports={__depends__:[e(188),e(210)],searchPad:["type",e(205)]}},{188:188,205:205,210:210}],207:[function(e,t,n){"use strict";function i(e){this._eventBus=e,this._selectedElements=[];var t=this;e.on(["shape.remove","connection.remove"],function(e){var n=e.element;t.deselect(n)}),e.on(["diagram.clear"],function(e){t.select(null)})}var r=e(399),o=e(281);i.$inject=["eventBus"],t.exports=i,i.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(-1!==n){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},i.prototype.get=function(){return this._selectedElements},i.prototype.isSelected=function(e){return-1!==this._selectedElements.indexOf(e)},i.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();r(e)||(e=e?[e]:[]),t?o(e,function(e){-1===n.indexOf(e)&&n.push(e)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})}},{281:281,399:399}],208:[function(e,t,n){"use strict";function i(e,t,n,i){e.on("create.end",500,function(e){e.context.canExecute&&t.select(e.context.shape)}),e.on("connect.end",500,function(e){e.context.canExecute&&e.context.target&&t.select(e.context.target)}),e.on("shape.move.end",500,function(e){var n=e.previousSelection||[],r=i.get(e.context.shape.id);o(n,function(e){return r.id===e.id})||t.select(r)}),e.on("element.click",function(e){var i=e.element;i===n.getRootElement()&&(i=null);var o=t.isSelected(i),a=t.get().length>1,s=r(e);if(o&&a)return s?t.deselect(i):t.select(i);o?t.deselect(i):t.select(i,s)})}var r=e(242).hasPrimaryModifier,o=e(280);i.$inject=["eventBus","selection","canvas","elementRegistry"],t.exports=i},{242:242,280:280}],209:[function(e,t,n){"use strict";function i(e,t,n,i){function s(e,n){t.addMarker(e,n)}function c(e,n){t.removeMarker(e,n)}this._multiSelectionBox=null,e.on("element.hover",function(e){s(e.element,o)}),e.on("element.out",function(e){c(e.element,o)}),e.on("selection.changed",function(e){function t(e){c(e,a)}function n(e){s(e,a)}var i=e.oldSelection,o=e.newSelection;r(i,function(e){-1===o.indexOf(e)&&t(e)}),r(o,function(e){-1===i.indexOf(e)&&n(e)})})}var r=e(281),o="hover",a="selected";i.$inject=["eventBus","canvas","selection","styles"],t.exports=i},{281:281}],210:[function(e,t,n){t.exports={__init__:["selectionVisuals","selectionBehavior"],__depends__:[e(147),e(186)],selection:["type",e(207)],selectionVisuals:["type",e(209)],selectionBehavior:["type",e(208)]}},{147:147,186:186,207:207,208:208,209:209}],211:[function(e,t,n){"use strict";function i(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}function r(e){this._snapValues={}}var o=e(281),a=e(212).snapTo;i.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},i.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,-1===this._snapLocations.indexOf(e)&&this._snapLocations.push(e)},i.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},i.prototype.getSnapLocations=function(){return this._snapLocations},i.prototype.setSnapLocations=function(e){this._snapLocations=e},i.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new r,n.initDefaults(this._defaultSnaps)),n},t.exports=i,r.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),-1===n.x.indexOf(t.x)&&n.x.push(t.x),-1===n.y.indexOf(t.y)&&n.y.push(t.y)},r.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&a(e[n],r[n],i)},r.prototype.initDefaults=function(e){var t=this;o(e||{},function(e,n){o(e,function(e){t.add(n,e)})})}},{212:212,281:281}],212:[function(e,t,n){"use strict";function i(e,t,n){n=void 0===n?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],s(r-e)<=n)return r}function r(e){return{x:e.x,y:e.y}}function o(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:c(e.x+e.width/2),y:c(e.y+e.height/2)}}function a(e){return{x:e.x+e.width,y:e.y+e.height}}var s=Math.abs,c=Math.round;t.exports.snapTo=i,t.exports.topLeft=r,t.exports.mid=o,t.exports.bottomRight=a,t.exports.isSnapped=function(e,t){var n=e.snapped;return!!n&&("string"==typeof t?n[t]:n.x&&n.y)},t.exports.setSnapped=function(e,t,n){if("string"!=typeof t)throw new Error("axis must be in [x, y]");if("number"!=typeof n&&!1!==n)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return!1===n?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}},{}],213:[function(e,t,n){"use strict";function i(e,t){this._canvas=t;var n=this;e.on(["shape.move.start","create.start"],function(e){n.initSnap(e)}),e.on(["shape.move.move","shape.move.end","create.move","create.end"],l,function(e){e.originalEvent&&e.originalEvent.ctrlKey||p(e)||n.snap(e)}),e.on(["shape.move.cleanup","create.cleanup"],function(e){n.hide()}),this._asyncHide=a(this.hide,1e3)}var r=e(279),o=e(281),a=e(290),s=e(212).mid,c=e(211),u=e(212),l=1250,p=u.isSnapped,h=u.setSnapped,d=e(445),f=e(447),m=e(448),g=e(451);i.$inject=["eventBus","canvas"],t.exports=i,i.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.snapContext;i||(i=t.snapContext=new c);var r=s(n,e);return i.setSnapOrigin("mid",{x:r.x-e.x,y:r.y-e.y}),i},i.prototype.snap=function(e){var t=e.context,n=t.snapContext,i=t.shape,r=t.target,a=n.getSnapLocations();if(r){var s=n.pointsForTarget(r);s.initialized||(this.addTargetSnaps(s,i,r),s.initialized=!0);var c={x:p(e,"x"),y:p(e,"y")};o(a,function(t){var i=n.getSnapOrigin(t),r={x:e.x+i.x,y:e.y+i.y};if(o(["x","y"],function(e){var n;c[e]||void 0!==(n=s.snap(r,t,e,7))&&(c[e]={value:n,originValue:n-i[e]})}),c.x&&c.y)return!1}),this.showSnapLine("vertical",c.x&&c.x.value),this.showSnapLine("horizontal",c.y&&c.y.value),o(["x","y"],function(t){var n=c[t];"object"==typeof n&&h(e,t,n.originValue)})}},i.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=g("path");return f(n,{d:"M0,0 L0,0"}),m(n).add("djs-snap-line"),d(t,n),{update:function(t){"number"!=typeof t?f(n,{display:"none"}):"horizontal"===e?f(n,{d:"M-100000,"+t+" L+100000,"+t,display:""}):f(n,{d:"M "+t+",-100000 L "+t+", +100000",display:""})}}},i.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},i.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},i.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},i.prototype.hide=function(){o(this._snapLines,function(e){e.update()})},i.prototype.addTargetSnaps=function(e,t,n){var i=this.getSiblings(t,n);o(i,function(t){e.add("mid",s(t))})},i.prototype.getSiblings=function(e,t){return t&&r(t.children,function(t){return!t.hidden&&!t.labelTarget&&t.host!==e&&t!==e})}},{211:211,212:212,279:279,281:281,290:290,445:445,447:447,448:448,451:451}],214:[function(e,t,n){"use strict";function i(e,t,n,i,r,o){this._canvas=n,this._dragging=t,this._modeling=i,this._rules=r,this._toolManager=o;var a=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),e.on("spaceTool.selection.end",function(t){var n=t.originalEvent.target;(t.hover||n instanceof SVGElement)&&e.once("spaceTool.selection.ended",function(){a.activateMakeSpace(t.originalEvent)})}),e.on("spaceTool.move",u,function(e){var t=e.context;t.initialized||(t.initialized=a.initializeMakeSpace(e,t))}),e.on("spaceTool.end",function(t){var n=t.context,i=n.axis,r=n.direction,o=n.movingShapes,s=n.resizingShapes;if(n.initialized){var u={x:c(t.dx),y:c(t.dy)};u[p[i]]=0;var l=!0;f(s,function(e){if("w"===r&&t.x>e.x+e.width||"e"===r&&t.x<e.x||"n"===r&&t.y>e.y+e.height||"s"===r&&t.y<e.y)return void(l=!1)}),l&&a.makeSpace(o,s,u,r),e.once("spaceTool.ended",function(e){a.activateSelection(e.originalEvent,!0,!0)})}})}var r=e(216),o=e(234),a=e(242).hasPrimaryModifier,s=Math.abs,c=Math.round,u=1500,l={x:"width",y:"height"},p={x:"y",y:"x"},h=e(235).selfAndAllChildren,d=e(408),f=e(281);i.$inject=["eventBus","dragging","canvas","modeling","rules","toolManager"],t.exports=i,i.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{trapClick:!1,cursor:"crosshair",autoActivate:t,data:{context:{reactivate:n}}})},i.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:"crosshair",data:{context:{}}})},i.prototype.makeSpace=function(e,t,n,i){return this._modeling.createSpace(e,t,n,i)},i.prototype.initializeMakeSpace=function(e,t){var n=s(e.dx)>s(e.dy)?"x":"y",i=e["d"+n],c=e[n]-i;if(s(i)<5)return!1;i<0&&(i*=-1),a(e)&&(i*=-1);var u=this._canvas.getRootElement(),l=h(u,!0),p=this.calculateAdjustments(l,n,i,c);return d(t,p,{axis:n,direction:r.getDirection(n,i)}),o.set("resize-"+("x"===n?"ew":"ns")),!0},i.prototype.calculateAdjustments=function(e,t,n,i){var r=[],o=[],a=this._rules;return e.forEach(function(e){var s=e[t],c=s+e[l[t]];if(e.parent&&!e.waypoints)return n>0&&s>i?r.push(e):n<0&&c<i?r.push(e):s<i&&c>i&&a.allowed("shape.resize",{shape:e})?o.push(e):void 0}),{movingShapes:r,resizingShapes:o}},i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()},i.prototype.isActive=function(){var e=this._dragging.context();return e&&/^spaceTool/.test(e.prefix)}},{216:216,234:234,235:235,242:242,281:281,408:408}],215:[function(e,t,n){"use strict";function i(e,t,n,i,m){function g(e,t){o(e,function(e){m.addDragger(e,t),n.addMarker(e,a)})}e.on("spaceTool.selection.start",function(e){var t=n.getLayer("space"),r=e.context,o={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},a=h("g");l(a,i.cls("djs-crosshair-group",["no-events"])),u(t,a);var s=h("path");l(s,"d",o.x),p(s).add("djs-crosshair"),u(a,s);var c=h("path");l(c,"d",o.y),p(c).add("djs-crosshair"),u(a,c),r.crosshairGroup=a}),e.on("spaceTool.selection.move",function(e){var t=e.context.crosshairGroup;f(t,e.x,e.y)}),e.on("spaceTool.selection.cleanup",function(e){var t=e.context,n=t.crosshairGroup;n&&d(n)}),e.on("spaceTool.move",c,function(e){var a=e.context,c=a.line,d=a.axis,y=a.movingShapes,v=a.resizingShapes;if(a.initialized){if(!a.dragGroup){var x=n.getLayer("space");c=h("path"),l(c,"d","M0,0 L0,0"),p(c).add("djs-crosshair"),u(x,c),a.line=c;var _=h("g");l(_,i.cls("djs-drag-group",["no-events"])),u(n.getDefaultLayer(),_),g(y,_);g(a.movingConnections=t.filter(function(e){var t=!1;o(y,function(n){o(n.outgoing,function(n){e===n&&(t=!0)})});var n=!1;o(y,function(t){o(t.incoming,function(t){e===t&&(n=!0)})});var i=!1;o(v,function(t){o(t.outgoing,function(t){e===t&&(i=!0)})});var a=!1;return o(v,function(t){o(t.incoming,function(t){e===t&&(a=!0)})}),r(e)&&(t||i)&&(n||a)}),_),a.dragGroup=_}if(!a.frameGroup){var b=h("g");l(b,i.cls("djs-frame-group",["no-events"])),u(n.getDefaultLayer(),b);var w=[];o(v,function(e){var t=m.addFrame(e,b);w.push({element:t,initialWidth:t.getBBox().width,initialHeight:t.getBBox().height}),n.addMarker(e,s)}),a.frameGroup=b,a.frames=w}var E={x:"M"+e.x+", -10000 L"+e.x+", 10000",y:"M -10000, "+e.y+" L 10000, "+e.y};l(c,{path:E[d],display:""});var C={x:"y",y:"x"},S={x:e.dx,y:e.dy};S[C[a.axis]]=0,f(a.dragGroup,S.x,S.y),o(a.frames,function(e){e.initialWidth+S.x>5&&l(e.element,{width:e.initialWidth+S.x}),e.initialHeight+S.y>5&&l(e.element,{height:e.initialHeight+S.y})})}}),e.on("spaceTool.cleanup",function(e){var t=e.context,i=t.movingShapes,r=t.movingConnections,c=t.resizingShapes,u=t.line,l=t.dragGroup,p=t.frameGroup;o(i,function(e){n.removeMarker(e,a)}),o(r,function(e){n.removeMarker(e,a)}),l&&(d(u),d(l)),o(c,function(e){n.removeMarker(e,s)}),p&&d(p)})}function r(e){return e.waypoints}var o=e(281),a="djs-dragging",s="djs-resizing",c=250,u=e(445),l=e(447),p=e(448),h=e(451),d=e(454),f=e(247).translate;i.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"],t.exports=i},{247:247,281:281,445:445,447:447,448:448,451:451,454:454}],216:[function(e,t,n){"use strict";function i(e,t){if("x"===e){if(t>0)return"e";if(t<0)return"w"}if("y"===e){if(t>0)return"s";if(t<0)return"n"}return null}t.exports.getDirection=i,t.exports.resizeBounds=function(e,t,n){var i=n.x,r=n.y;switch(t){case"n":return{x:e.x,y:e.y+r,width:e.width,height:e.height-r};case"s":return{x:e.x,y:e.y,width:e.width,height:e.height+r};case"w":return{x:e.x+i,y:e.y,width:e.width-i,height:e.height};case"e":return{x:e.x,y:e.y,width:e.width+i,height:e.height};default:throw new Error("unrecognized direction: "+t)}}},{}],217:[function(e,t,n){"use strict";t.exports={__init__:["spaceToolPreview"],__depends__:[e(139),e(204),e(219),e(194)],spaceTool:["type",e(214)],spaceToolPreview:["type",e(215)]}},{139:139,194:194,204:204,214:214,215:215,219:219}],218:[function(e,t,n){"use strict";function i(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}var r=e(281);i.$inject=["eventBus","dragging"],t.exports=i,i.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');n.push(e),this.bindEvents(e,t)},i.prototype.isActive=function(e){return e&&this._active===e},i.prototype.length=function(e){return this._tools.length},i.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},i.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,o=[];n.on(t.tool+".init",function(t){if(!t.context.reactivate&&this.isActive(e))return this.setActive(null),void i.cancel();this.setActive(e)},this),r(t,function(e){o.push(e+".ended"),o.push(e+".canceled")}),n.on(o,250,function(e){var t=e.originalEvent;!this._active||t&&"tools"===t.target.parentNode.getAttribute("data-group")||this.setActive(null)},this)}},{281:281}],219:[function(e,t,n){"use strict";t.exports={__depends__:[e(139)],
__init__:["toolManager"],toolManager:["type",e(218)]}},{139:139,218:218}],220:[function(e,t,n){"use strict";function i(){}var r=e(222).getMid;t.exports=i,i.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||r(e.source),t.connectionEnd||r(e.target)]}},{222:222}],221:[function(e,t,n){"use strict";function i(e){return o({original:e.point.original||e.point},e.actual)}function r(e,t){this._elementRegistry=e,this._graphicsFactory=t}var o=e(408),a=e(222).getElementLineIntersection;r.$inject=["elementRegistry","graphicsFactory"],t.exports=r,r.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var r=this.getDockingPoint(e,t,!0),o=this.getDockingPoint(e,n),a=e.waypoints.slice(r.idx+1,o.idx);return a.unshift(i(r)),a.push(i(o)),a},r.prototype.getDockingPoint=function(e,t,n){var i,r,o,a=e.waypoints;return i=n?0:a.length-1,r=a[i],o=this._getIntersection(t,e,n),{point:r,actual:o||r,idx:i}},r.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return a(i,r,n)},r.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},r.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},r.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)}},{222:222,408:408}],222:[function(e,t,n){"use strict";function i(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function r(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function o(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function a(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function s(e){return r({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function c(e,t,n){n=n||0,p(n)||(n={x:n,y:n});var i=o(e),r=o(t),a=i.bottom+n.y<=r.top,s=i.left-n.x>=r.right,c=i.top-n.y>=r.bottom,u=i.right+n.x<=r.left,l=a?"top":c?"bottom":null,h=u?"left":s?"right":null;return h&&l?l+"-"+h:h||l||"intersect"}function u(e,t,n){var i=l(e,t);return 1===i.length?r(i[0]):2===i.length&&d(i[0],i[1])<1?r(i[0]):i.length>1?(i=h(i,function(e){var t=Math.floor(100*e.t2)||1;return t=100-t,t=(t<10?"0":"")+t,e.segment2+"#"+t}),r(i[n?0:i.length-1])):null}function l(e,t){return f(e,t)}var p=e(403),h=e(287),d=e(237).pointDistance,f=e(441);t.exports.roundBounds=i,t.exports.roundPoint=r,t.exports.asTRBL=o,t.exports.asBounds=a,t.exports.getMid=s,t.exports.getOrientation=c,t.exports.getElementLineIntersection=u,t.exports.getIntersections=l},{237:237,287:287,403:403,441:441}],223:[function(e,t,n){"use strict";function i(e,t,n){n=n||"h:h";var i,r;if("h:v"===n)return[{x:t.x,y:e.y}];if("v:h"===n)return[{x:e.x,y:t.y}];if("h:h"===n)return i=Math.round((t.x-e.x)/2+e.x),[{x:i,y:e.y},{x:i,y:t.y}];if("v:v"===n)return r=Math.round((t.y-e.y)/2+e.y),[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("unknown directions: <"+n+">: directions must be specified as {a direction}:{b direction} (direction in h|v)")}function r(e,t,n){var r=[];return _(e,t)||(r=i(e,t,n)),r.unshift(e),r.push(t),r}function o(e,t,n,i,o){var a=o&&o.preferredLayouts||[],s=f(a,"straight")[0]||"h:h",c=C[s]||0,u=v(e,t,c),l=p(u,s);if(n=n||x(e),i=i||x(t),l){if("h:h"===l)switch(u){case"top-right":case"right":case"bottom-right":n={original:n,x:e.x,y:n.y},i={original:i,x:t.x+t.width,y:i.y};break;case"top-left":case"left":case"bottom-left":n={original:n,x:e.x+e.width,y:n.y},i={original:i,x:t.x,y:i.y}}if("v:v"===l)switch(u){case"top-left":case"top":case"top-right":n={original:n,x:n.x,y:e.y+e.height},i={original:i,x:i.x,y:t.y};break;case"bottom-left":case"bottom":case"bottom-right":n={original:n,x:n.x,y:e.y},i={original:i,x:i.x,y:t.y+t.height}}return r(n,i,l)}}function a(e,t,n,i,r,a){h(n)&&(r=n,a=i,n=x(e),i=x(t)),a=m({preferredLayouts:[]},a),r=r||[];var s,c=a.preferredLayouts,p=-1!==c.indexOf("straight");return p&&(s=u(e,t,n,i,a)),s||(a.connectionEnd?(s=l(t,e,i,r.slice().reverse()),s=s&&s.reverse()):a.connectionStart?s=l(e,t,n,r):r&&r.length&&(s=r)),s||(s=o(e,t,n,i,a)),s}function s(e,t,n){return e>=t&&e<=n}function c(e,t,n){var i={x:"width",y:"height"};return s(t[e],n[e],n[e]+n[i[e]])}function u(e,t,n,i,r){var o,a,s={};return a=v(e,t),/^(top|bottom|left|right)$/.test(a)?(/top|bottom/.test(a)&&(o="x"),/left|right/.test(a)&&(o="y"),"target"===r.preserveDocking?c(o,i,e)?(s[o]=i[o],[{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y,original:{x:void 0!==s.x?s.x:n.x,y:void 0!==s.y?s.y:n.y}},{x:i.x,y:i.y}]):null:c(o,n,t)?(s[o]=n[o],[{x:n.x,y:n.y},{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y,original:{x:void 0!==s.x?s.x:i.x,y:void 0!==s.y?s.y:i.y}}]):null):null}function l(e,t,n,i){if(function(e,t,n){return n.length<3||!(n.length>4)&&!!d(n,function(e,t){var i=n[t-1];return i&&w(e,i)<3})}(e,t,i))return null;var r,o=i[0],a=i.slice();return a[0]=n,a[1]=function(e,t,n){switch(_(t,e)){case"v":return{x:e.x,y:n.y};case"h":return{x:n.x,y:e.y}}return{x:e.x,y:e.y}}(a[1],o,n),r=function(e,t,n){var i;for(i=e.length-2;0!==i;i--)if(b(e[i],t,E)||b(e[i],n,E))return e.slice(i);return e}(a,e,t),r!==a?l(e,t,n,r):a}function p(e,t){switch(e){case"intersect":return null;case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}var h=e(399),d=e(280),f=e(275),m=e(408),g=e(222),y=e(237),v=g.getOrientation,x=g.getMid,_=y.pointsAligned,b=y.pointInRect,w=y.pointDistance,E=20,C={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};t.exports.getBendpoints=i,t.exports.connectPoints=r,t.exports.connectRectangles=o,t.exports.repairConnection=a,t.exports.layoutStraight=u,t.exports._repairConnectionSide=l},{222:222,237:237,275:275,280:280,399:399,408:408}],224:[function(e,t,n){"use strict";function i(){Object.defineProperty(this,"businessObject",{writable:!0}),p.bind(this,"parent"),h.bind(this,"label"),f.bind(this,"outgoing"),m.bind(this,"incoming")}function r(){i.call(this),p.bind(this,"children"),d.bind(this,"host"),d.bind(this,"attachers")}function o(){r.call(this)}function a(){r.call(this),h.bind(this,"labelTarget")}function s(){i.call(this),f.bind(this,"source"),m.bind(this,"target")}var c=e(408),u=e(267),l=e(438),p=new l({name:"children",enumerable:!0,collection:!0},{name:"parent"}),h=new l({name:"label",enumerable:!0},{name:"labelTarget"}),d=new l({name:"attachers",collection:!0},{name:"host"}),f=new l({name:"outgoing",collection:!0},{name:"source"}),m=new l({name:"incoming",collection:!0},{name:"target"});u(r,i),u(o,r),u(a,r),u(s,i);var g={connection:s,shape:r,label:a,root:o};t.exports.create=function(e,t){var n=g[e];if(!n)throw new Error("unknown type: <"+e+">");return c(new n,t)},t.exports.Base=i,t.exports.Root=o,t.exports.Shape=r,t.exports.Connection=s,t.exports.Label=a},{267:267,408:408,438:438}],225:[function(e,t,n){"use strict";function i(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function r(e,t){function n(n){var r=d.start,c=l.toPoint(n),u=s(c,r);if(!d.dragging&&i(u)>p&&(d.dragging=!0,a.install(e),o.set("grab")),d.dragging){var h=d.last||d.start;u=s(c,h),t.scroll({dx:u.x,dy:u.y}),d.last=c}n.preventDefault()}function r(e){c.unbind(document,"mousemove",n),c.unbind(document,"mouseup",r),d=null,o.unset()}function h(e){if(!u(e.target,".djs-draggable")&&!(e.button||e.ctrlKey||e.shiftKey||e.altKey))return d={start:l.toPoint(e)},c.bind(document,"mousemove",n),c.bind(document,"mouseup",r),!0}var d;e.on("element.mousedown",500,function(e){return h(e.originalEvent)})}var o=e(234),a=e(231),s=e(241).substract,c=e(255),u=e(252),l=e(236),p=15;r.$inject=["eventBus","canvas"],t.exports=r},{231:231,234:234,236:236,241:241,252:252,255:255}],226:[function(e,t,n){t.exports={__init__:["moveCanvas"],moveCanvas:["type",e(225)]}},{225:225}],227:[function(e,t,n){"use strict";function i(e,t,n){this._enabled=!1,this._canvas=t,this._container=t._container,this._handleWheel=u(this._handleWheel,this);var i=!n||!1!==n.enabled;this.totalDelta=0;var r=this;e.on("canvas.init",function(e){r._init(i)})}var r=e(255),o=e(252),a=e(228).getStepSize,s=e(228).cap,c=e(241).log10,u=e(289),l=Math.sign||function(e){return e>=0?1:-1},p={min:.2,max:4};i.$inject=["eventBus","canvas","config.zoomScroll"],t.exports=i,i.prototype.scroll=function(e){this._canvas.scroll(e)},i.prototype.reset=function(){this._canvas.zoom("fit-viewport")},i.prototype.zoom=function(e,t){var n=a(p,20);this.totalDelta+=e,Math.abs(this.totalDelta)>.1&&(this._zoom(e,t,n),this.totalDelta=0)},i.prototype._handleWheel=function(e){if(!o(e.target,".djs-scrollable",!0)){var t=this._container;e.preventDefault();var n,i,r=e.ctrlKey,a=e.shiftKey;if(n=r?0===e.deltaMode?.025:.25:0===e.deltaMode?1.25:18,r){var s=t.getBoundingClientRect(),c={x:e.clientX-s.left,y:e.clientY-s.top};i=-Math.sqrt(Math.pow(e.deltaY,2)+Math.pow(e.deltaX,2))*l(e.deltaY)*n,this.zoom(i,c)}else i=a?{dx:n*e.deltaY,dy:0}:{dx:-n*e.deltaX,dy:-n*e.deltaY},this.scroll(i)}},i.prototype.stepZoom=function(e,t){var n=a(p,10);this._zoom(e,t,n)},i.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=c(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var u=Math.pow(10,a);i.zoom(s(p,u),t)},i.prototype.toggle=function(e){var t=this._container,n=this._handleWheel,i=this._enabled;return void 0===e&&(e=!i),i!==e&&r[e?"bind":"unbind"](t,"wheel",n,!1),this._enabled=e,e},i.prototype._init=function(e){this.toggle(e)}},{228:228,241:241,252:252,255:255,289:289}],228:[function(e,t,n){"use strict";var i=e(241).log10;t.exports.getStepSize=function(e,t){var n=i(e.min),r=i(e.max);return(Math.abs(n)+Math.abs(r))/t},t.exports.cap=function(e,t){return Math.max(e.min,Math.min(e.max,t))}},{241:241}],229:[function(e,t,n){t.exports={__init__:["zoomScroll"],zoomScroll:["type",e(227)]}},{227:227}],230:[function(e,t,n){"use strict";function i(e,t,n){var i=a(t),r=a(n),c=s(e,i),u={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)};return o({x:r.x+u.x,y:r.y+u.y})}function r(e,t,n){var i=a(e),r=a(t),c=a(n),u=s(e,i),l=s(i,r),p={x:l.x*(n.width/t.width),y:l.y*(n.height/t.height)},h={x:c.x+p.x,y:c.y+p.y};return o({x:h.x+u.x-e.x,y:h.y+u.y-e.y})}var o=e(222).roundPoint,a=e(244).center,s=e(244).delta;t.exports.getNewAttachPoint=i,t.exports.getNewAttachShapeDelta=r},{222:222,244:244}],231:[function(e,t,n){"use strict";function i(e,t){function n(){return!1}return t=t||"element.click",e.once(t,r,n),function(){e.off(t,n)}}var r=5e3;t.exports.install=i},{}],232:[function(e,t,n){"use strict";t.exports.remove=function(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return-1!==n&&e.splice(n,1),n},t.exports.add=function(e,t,n){if(e&&t){"number"!=typeof n&&(n=-1);var i=e.indexOf(t);if(-1!==i){if(i===n)return;if(-1===n)return;e.splice(i,1)}-1!==n?e.splice(n,0,t):e.push(t)}},t.exports.indexOf=function(e,t){return e&&t?e.indexOf(t):-1}},{}],233:[function(e,t,n){"use strict";function i(e){var t={},n=[],i=[],o=[];return r(e,function(e){var i=e.parent;t[i.id]||(t[i.id]=[]),-1===n.indexOf(i.id)&&n.push(i.id),t[i.id].push(e)}),r(n,function(e){r(t[e],function(e){t[e.id]&&o.push(e.id)})}),r(n,function(e){-1===o.indexOf(e)&&(i=i.concat(t[e]))}),i}var r=e(281);t.exports.getTopLevel=i},{281:281}],234:[function(e,t,n){"use strict";var i=e(250),r=/^djs-cursor-.*$/;t.exports.set=function(e){var t=i(document.body);t.removeMatching(r),e&&t.add("djs-cursor-"+e)},t.exports.unset=function(){this.set(null)},t.exports.has=function(e){return i(document.body).has("djs-cursor-"+e)}},{250:250}],235:[function(e,t,n){"use strict";function i(e,t,n){var i=!n||-1===e.indexOf(t);return i&&e.push(t),i}function r(e,t,n){n=n||0,h(e)||(e=[e]),m(e,function(e,i){var o=t(e,i,n);h(o)&&o.length&&r(o,t,n+1)})}function o(e,t,n){var o=[],a=[];return r(e,function(e,r,s){i(o,e,t);var c=e.children;if((-1===n||s<n)&&c&&i(a,c,t))return c}),o}function a(e,t){return o(e,!t,1)}function s(e,t){return o(e,!t,-1)}function c(e){function t(e){i[e.source.id]&&i[e.target.id]&&(i[e.id]=[e]),o[e.source.id]&&o[e.target.id]&&(c[e.id]=s[e.id]=e),a[e.id]=e}function n(e){if(s[e.id]=e,!e.waypoints)return o[e.id]=e,m(e.incoming,t),m(e.outgoing,t),e.children;c[e.id]=a[e.id]=e}var i=f(e,function(e){return e.id}),o={},a={},s={},c={};return r(e,n),{allShapes:o,allConnections:a,topLevel:i,enclosedConnections:c,enclosedElements:s}}function u(e,t){t=!!t,h(e)||(e=[e]);var n,i,r,o;return m(e,function(e){var a=e;e.waypoints&&!t&&(a=u(e.waypoints,!0));var s=a.x,c=a.y,l=a.height||0,p=a.width||0;(s<n||void 0===n)&&(n=s),(c<i||void 0===i)&&(i=c),(s+p>r||void 0===r)&&(r=s+p),(c+l>o||void 0===o)&&(o=c+l)}),{x:n,y:i,height:o-i,width:r-n}}function l(e,t){var n={};return m(e,function(e){var i=e;i.waypoints&&(i=u(i)),!d(t.y)&&i.x>t.x&&(n[e.id]=e),!d(t.x)&&i.y>t.y&&(n[e.id]=e),i.x>t.x&&i.y>t.y&&(d(t.width)&&d(t.height)&&i.width+i.x<t.width+t.x&&i.height+i.y<t.height+t.y?n[e.id]=e:d(t.width)&&d(t.height)||(n[e.id]=e))}),n}function p(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}var h=e(399),d=e(402),f=e(282),m=e(281);t.exports.add=i,t.exports.eachElement=r,t.exports.selfAndDirectChildren=a,t.exports.selfAndAllChildren=s,t.exports.getBBox=u,t.exports.getEnclosedElements=l,t.exports.getClosure=c,t.exports.getType=p},{281:281,282:282,399:399,402:402}],236:[function(e,t,n){"use strict";function i(e){e&&"function"==typeof e.stopPropagation&&e.stopPropagation()}function r(e){return e.originalEvent||e.srcEvent}function o(e,t){i(e,t),i(r(e),t)}function a(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}t.exports.getOriginal=r,t.exports.stopPropagation=o,t.exports.toPoint=a},{}],237:[function(e,t,n){"use strict";function i(e,t){return e&&t?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):-1}function r(e,t){return Math.abs(e.x-t.x)<=o?"h":Math.abs(e.y-t.y)<=o&&"v"}t.exports.pointDistance=i,t.exports.pointsOnLine=function(e,t,n,r){if(void 0===r&&(r=5),!e||!t||!n)return!1;var o=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),a=i(e,t);return Math.abs(o/a)<=r};var o=2;t.exports.pointsAligned=r,t.exports.pointInRect=function(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n},t.exports.getMidPoint=function(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}},{}],238:[function(e,t,n){"use strict";function i(e){return o(".djs-visual",e)}function r(e){return e.parentNode.childNodes[1]}var o=e(257);t.exports.getVisual=i,t.exports.getChildren=r},{257:257}],239:[function(e,t,n){"use strict";function i(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(1e9*Math.random())+"-"}t.exports=i,i.prototype.next=function(){return this._prefix+ ++this._counter}},{}],240:[function(e,t,n){"use strict";function i(e,t){return[["M",e.x,e.y],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function r(e){var t=[];return e.forEach(function(e,n){t.push([0===n?"M":"L",e.x,e.y])}),t}function o(e,t){var n,i;for(n=0;i=e[n];n++)if(s(i,t)<=p)return{point:e[n],bendpoint:!0,index:n};return null}function a(e,t){var n,o=c(i(t,p),r(e)),a=o[0],s=o[o.length-1];return a?a!==s?a.segment2!==s.segment2?(n=l(a.segment2,s.segment2)-1,{point:e[n],bendpoint:!0,index:n}):{point:{x:u(a.x+s.x)/2,y:u(a.y+s.y)/2},index:a.segment2}:{point:{x:u(a.x),y:u(a.y)},index:a.segment2}:null}var s=e(237).pointDistance,c=e(441),u=Math.round,l=Math.max,p=10;t.exports.getApproxIntersection=function(e,t){return o(e,t)||a(e,t)}},{237:237,441:441}],241:[function(e,t,n){"use strict";function i(e){return Math.log(e)/Math.log(10)}function r(e,t){return{x:e.x-t.x,y:e.y-t.y}}t.exports.log10=i,t.exports.substract=r},{}],242:[function(e,t,n){"use strict";function i(e){return!(r(e)||e).button}var r=e(236).getOriginal,o=e(243).isMac;t.exports.isPrimaryButton=i,t.exports.isMac=o,t.exports.hasPrimaryModifier=function(e){var t=r(e)||e;return!!i(e)&&(o()?t.metaKey:t.ctrlKey)},t.exports.hasSecondaryModifier=function(e){var t=r(e)||e;return i(e)&&t.shiftKey}},{236:236,243:243}],243:[function(e,t,n){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],244:[function(e,t,n){"use strict";function i(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function r(e,t){return{x:e.x-t.x,y:e.y-t.y}}t.exports.center=i,t.exports.delta=r},{}],245:[function(e,t,n){"use strict";t.exports.saveClear=function(e,t){if("function"!=typeof t)throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}},{}],246:[function(e,t,n){"use strict";function i(e){for(var t,n="",i=0;t=e[i];i++)n+=t.x+","+t.y+" ";return n}var r=e(447),o=e(451);t.exports.componentsToPath=function(e){return e.join(",").replace(/,?([A-z]),?/g,"$1")},t.exports.toSVGPoints=i,t.exports.createLine=function(e,t){var n=o("polyline");return r(n,{points:i(e)}),t&&r(n,t),n},t.exports.updateLine=function(e,t){return r(e,{points:i(t)}),e}},{447:447,451:451}],247:[function(e,t,n){"use strict";var i=e(455),r=e(452).createTransform;t.exports.transform=function(e,t,n,o,a){var s=r();s.setTranslate(t,n);var c=r();c.setRotate(o,0,0);var u=r();u.setScale(a||1,a||1),i(e,[s,c,u])},t.exports.translate=function(e,t,n){var o=r();o.setTranslate(t,n),i(e,o)},t.exports.rotate=function(e,t){var n=r();n.setRotate(t,0,0),i(e,n)},t.exports.scale=function(e,t){var n=r();n.setScale(t,t),i(e,n)}},{452:452,455:455}],248:[function(e,t,n){"use strict";function i(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function r(e){return h(e)?d({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function o(e,t){t.textContent=e;try{var n,i=""===e;return t.textContent=i?"dummy":e,n=f(t.getBBox(),["width","height"]),i&&(n.width=0),n}catch(e){return{width:0,height:0}}}function a(e,t,n){for(var i,r=e.shift(),a=r;;){if(i=o(a,n),i.width=a?i.width:0," "===a||""===a||i.width<Math.round(t)||a.length<2)return s(e,a,r,i);a=u(a,i.width,t)}}function s(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}function c(e,t){var n,i=e.split(/(\s|-)/g),r=[],o=0;if(i.length>1)for(;n=i.shift();){if(!(n.length+o<t)){"-"===n&&r.pop();break}r.push(n),o+=n.length}return r.join("")}function u(e,t,n){var i=Math.max(e.length*(n/t),1),r=c(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function l(){var e=document.getElementById("helper-svg");return e||(e=_("svg"),x(e,{id:"helper-svg",width:0,height:0,style:"visibility: hidden; position: fixed"}),document.body.appendChild(e)),e}function p(e){this._config=d({},{size:E,padding:w,style:{},align:"center-top"},e||{})}var h=e(403),d=e(408),f=e(414),m=e(281),g=e(284),y=e(411),v=e(445),x=e(447),_=e(451),b=e(454),w=0,E={width:150,height:50};p.prototype.createText=function(e,t){return this.layoutText(e,t).element},p.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},p.prototype.layoutText=function(e,t){var n=y({},this._config.size,t.box||{}),o=y({},this._config.style,t.style||{}),s=i(t.align||this._config.align),c=r(void 0!==t.padding?t.padding:this._config.padding),u=t.fitBox||!1,p=e.split(/\r?\n/g),h=[],d=n.width-c.left-c.right,f=_("text");x(f,{x:0,y:0}),x(f,o);var w=l();for(v(w,f);p.length;)h.push(a(p,d,f));var E,C,S=g(h,function(e,t,n){return e+t.height},0),M=g(h,function(e,t,n){return t.width>e?t.width:e},0);switch(s.vertical){case"middle":E=(n.height-S)/2-h[0].height/4;break;default:E=c.top}var P=_("text");return x(P,o),m(h,function(e){switch(E+=e.height,s.horizontal){case"left":C=c.left;break;case"right":C=(u?M:d)-c.right-e.width;break;default:C=Math.max(((u?M:d)-e.width)/2+c.left,0)}var t=_("tspan");x(t,{x:C,y:E}),t.textContent=e.text,v(P,t)}),b(f),{dimensions:{width:M,height:S},element:P}},t.exports=p},{281:281,284:284,403:403,408:408,411:411,414:414,445:445,447:447,451:451,454:454}],249:[function(e,t,n){arguments[4][93][0].apply(n,arguments)},{93:93}],250:[function(e,t,n){function i(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}var r=e(266),o=/\s+/,a=Object.prototype.toString;t.exports=function(e){return new i(e)},i.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},i.prototype.remove=function(e){if("[object RegExp]"==a.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},i.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},i.prototype.toggle=function(e,t){return this.list?(void 0!==t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(void 0!==t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},i.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(o);return""===n[0]&&n.shift(),n},i.prototype.has=i.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},{266:266}],251:[function(e,t,n){t.exports=function(e){for(var t;e.childNodes.length;)t=e.childNodes[0],e.removeChild(t);return e}},{}],252:[function(e,t,n){t.exports=e(76)},{76:76}],253:[function(e,t,n){t.exports=e(89)},{89:89}],254:[function(e,t,n){t.exports=e(263)},{263:263}],255:[function(e,t,n){arguments[4][95][0].apply(n,arguments)},{86:86,95:95}],256:[function(e,t,n){t.exports=e(420)},{420:420}],257:[function(e,t,n){t.exports=function(e,t){return t=t||document,t.querySelector(e)},t.exports.all=function(e,t){return t=t||document,t.querySelectorAll(e)}},{}],258:[function(e,t,n){arguments[4][96][0].apply(n,arguments)},{96:96}],259:[function(e,t,n){var i=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=function(){var e=Array.prototype.slice.call(arguments);1===e.length&&i(e[0])&&(e=e[0]);var t=e.pop();return t.$inject=e,t},o=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,a=/\/\*([^\*]*)\*\//m,s=function(e){if("function"!=typeof e)throw new Error('Cannot annotate "'+e+'". Expected a function!');var t=e.toString().match(o);return t[1]&&t[1].split(",").map(function(e){return t=e.match(a),t?t[1].trim():e.trim()})||[]};n.annotate=r,n.parse=s,n.isArray=i},{}],260:[function(e,t,n){t.exports={annotate:e(259).annotate,Module:e(262),Injector:e(261)}},{259:259,261:261,262:262}],261:[function(e,t,n){var i=e(262),r=e(259).parse,o=e(259).annotate,a=e(259).isArray,s=function(e,t){t=t||{get:function(e,t){if(n.push(e),!1===t)return null;throw p('No provider for "'+e+'"!')}};var n=[],c=this._providers=Object.create(t._providers||null),u=this._instances=Object.create(null),l=u.injector=this,p=function(e){var t=n.join(" -> ");return n.length=0,new Error(t?e+" (Resolving: "+t+")":e)},h=function(e,i){if(!c[e]&&-1!==e.indexOf(".")){for(var r=e.split("."),o=h(r.shift());r.length;)o=o[r.shift()];return o}if(Object.hasOwnProperty.call(u,e))return u[e];if(Object.hasOwnProperty.call(c,e)){if(-1!==n.indexOf(e))throw n.push(e),p("Cannot resolve circular dependency!");return n.push(e),u[e]=c[e][0](c[e][1]),n.pop(),u[e]}return t.get(e,i)},d=function(e){var t=Object.create(e.prototype),n=f(e,t);return"object"==typeof n?n:t},f=function(e,t){if("function"!=typeof e){if(!a(e))throw new Error('Cannot invoke "'+e+'". Expected a function!');e=o(e.slice())}var n=e.$inject&&e.$inject||r(e),i=n.map(function(e){return h(e)});return e.apply(t,i)},m=function(e){return o(function(t){return e.get(t)})},g=function(e,t){if(t&&t.length){var n,i,r,o,a=Object.create(null),u=Object.create(null),p=[],h=[],d=[];for(var f in c)n=c[f],-1!==t.indexOf(f)&&("private"===n[2]?(i=p.indexOf(n[3]),-1===i?(r=n[3].createChild([],t),o=m(r),p.push(n[3]),h.push(r),d.push(o),a[f]=[o,f,"private",r]):a[f]=[d[i],f,"private",h[i]]):a[f]=[n[2],n[1]],u[f]=!0),"factory"!==n[2]&&"type"!==n[2]||!n[1].$scope||t.forEach(function(e){-1!==n[1].$scope.indexOf(e)&&(a[f]=[n[2],n[1]],u[e]=!0)});t.forEach(function(e){if(!u[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')}),e.unshift(a)}return new s(e,l)},y={factory:f,type:d,value:function(e){return e}};e.forEach(function(e){function t(e,t){return"value"!==e&&a(t)&&(t=o(t.slice())),t}if(e instanceof i)e.forEach(function(e){var n=e[0],i=e[1],r=e[2];c[n]=[y[i],t(i,r),i]});else if("object"==typeof e)if(e.__exports__){var n=Object.keys(e).reduce(function(t,n){return"__"!==n.substring(0,2)&&(t[n]=e[n]),t},Object.create(null)),r=new s((e.__modules__||[]).concat([n]),l),u=o(function(e){return r.get(e)});e.__exports__.forEach(function(e){c[e]=[u,e,"private",r]})}else Object.keys(e).forEach(function(n){if("private"===e[n][2])return void(c[n]=e[n]);var i=e[n][0],r=e[n][1];c[n]=[y[i],t(i,r),i]})}),this.get=h,this.invoke=f,this.instantiate=d,this.createChild=g};t.exports=s},{259:259,262:262}],262:[function(e,t,n){var i=function(){var e=[];this.factory=function(t,n){return e.push([t,"factory",n]),this},this.value=function(t,n){return e.push([t,"value",n]),this},this.type=function(t,n){return e.push([t,"type",n]),this},this.forEach=function(t){e.forEach(t)}};t.exports=i},{}],263:[function(e,t,n){function i(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=t.createElement("html");return r.innerHTML=e,r.removeChild(r.lastChild)}var o=a[i]||a._default,s=o[0],c=o[1],u=o[2],r=t.createElement("div");for(r.innerHTML=c+e+u;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var l=t.createDocumentFragment();r.firstChild;)l.appendChild(r.removeChild(r.firstChild));return l}t.exports=i;var r,o=!1;"undefined"!=typeof document&&(r=document.createElement("div"),r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!r.getElementsByTagName("link").length,r=void 0);var a={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};a.td=a.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],a.option=a.optgroup=[1,'<select multiple="multiple">',"</select>"],a.thead=a.tbody=a.colgroup=a.caption=a.tfoot=[1,"<table>","</table>"],a.polyline=a.ellipse=a.polygon=a.circle=a.text=a.line=a.path=a.rect=a.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],264:[function(e,t,n){var i=t.exports=function(e,t){if(t||(t=16),void 0===e&&(e=128),e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,e/r))/Math.log(t)*r;for(var o=n-Math.floor(n),a="",r=0;r<Math.floor(n);r++){var s=Math.floor(Math.random()*t).toString(t);a=s+a}if(o){var c=Math.pow(t,o),s=Math.floor(Math.random()*c).toString(t);a=s+a}var u=parseInt(a,t);return u!==1/0&&u>=Math.pow(2,e)?i(e,t):a};i.rack=function(e,t,n){var r=function(r){var a=0;do{if(a++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}var s=i(e,t)}while(Object.hasOwnProperty.call(o,s));return o[s]=r,s},o=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=t||16,r}},{}],265:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);e=e||[128,36,1],this._seed=e.length?r.rack(e[0],e[1],e[2]):e}var r=e(264);t.exports=i,i.prototype.next=function(e){return this._seed(e||!0)},i.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},i.prototype.claim=function(e,t){this._seed.set(e,t||!0)},i.prototype.assigned=function(e){return this._seed.get(e)||!1},i.prototype.unclaim=function(e){delete this._seed.hats[e]},i.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)}},{264:264}],266:[function(e,t,n){var i=[].indexOf;t.exports=function(e,t){if(i)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],267:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],268:[function(e,t,n){var i=e(358),r=i();t.exports=r},{358:358}],269:[function(e,t,n){function i(e,t,n){var i=e?e.length:0;return n&&o(e,t,n)&&(t=!1),i?r(e,t):[]}var r=e(318),o=e(378);t.exports=i},{318:318,378:378}],270:[function(e,t,n){var i=e(323),r=e(345),o=e(355),a=e(376),s=e(292),c=s(function(e){for(var t=e.length,n=t,s=Array(d),c=i,u=[];n--;){var l=e[n]=a(l=e[n])?l:[];s[n]=l.length>=120?o(n&&l):null}var p=e[0],h=-1,d=p?p.length:0,f=s[0];e:for(;++h<d;)if(l=p[h],(f?r(f,l):c(u,l,0))<0){for(var n=t;--n;){var m=s[n];if((m?r(m,l):c(e[n],l,0))<0)continue e}f&&f.push(l),u.push(l)}return u});t.exports=c},{292:292,323:323,345:345,355:355,376:376}],271:[function(e,t,n){function i(e){var t=e?e.length:0;return t?e[t-1]:void 0}t.exports=i},{}],272:[function(e,t,n){var i=e(318),r=e(341),o=e(292),a=o(function(e){return r(i(e,!1,!0))});t.exports=a},{292:292,318:318,341:341}],273:[function(e,t,n){function i(e,t,n,i){return(e?e.length:0)?(null!=t&&"boolean"!=typeof t&&(i=n,n=a(e,t,i)?void 0:t,t=!1),n=null==n?n:r(n,i,3),t?s(e,n):o(e,n)):[]}var r=e(306),o=e(341),a=e(378),s=e(393);t.exports=i},{306:306,341:341,378:378,393:393}],274:[function(e,t,n){t.exports=e(273)},{273:273}],275:[function(e,t,n){var i=e(312),r=e(376),o=e(292),a=o(function(e,t){return r(e)?i(e,t):[]});t.exports=a},{292:292,312:312,376:376}],276:[function(e,t,n){function i(e){if(c(e)&&!s(e)&&!(e instanceof r)){if(e instanceof o)return e;if(p.call(e,"__chain__")&&p.call(e,"__wrapped__"))return u(e)}return new o(e)}var r=e(293),o=e(294),a=e(327),s=e(399),c=e(382),u=e(396),l=Object.prototype,p=l.hasOwnProperty;i.prototype=a.prototype,t.exports=i},{293:293,294:294,327:327,382:382,396:396,399:399}],277:[function(e,t,n){t.exports=e(286)},{286:286}],278:[function(e,t,n){function i(e,t,n){var i=s(e)?r:a;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=o(t,n,3)),i(e,t)}var r=e(298),o=e(306),a=e(314),s=e(399),c=e(378);t.exports=i},{298:298,306:306,314:314,378:378,399:399}],279:[function(e,t,n){function i(e,t,n){var i=s(e)?r:a;return t=o(t,n,3),i(e,t)}var r=e(299),o=e(306),a=e(315),s=e(399);t.exports=i},{299:299,306:306,315:315,399:399}],280:[function(e,t,n){var i=e(313),r=e(357),o=r(i);t.exports=o},{313:313,357:357}],281:[function(e,t,n){var i=e(297),r=e(313),o=e(359),a=o(i,r);t.exports=a},{297:297,313:313,359:359}],282:[function(e,t,n){var i=e(350),r=Object.prototype,o=r.hasOwnProperty,a=i(function(e,t,n){o.call(e,n)?e[n].push(t):e[n]=[t]});t.exports=a},{350:350}],283:[function(e,t,n){function i(e,t,n){var i=s(e)?r:a;return t=o(t,n,3),i(e,t)}var r=e(300),o=e(306),a=e(328),s=e(399);t.exports=i},{300:300,306:306,328:328,399:399}],284:[function(e,t,n){var i=e(302),r=e(313),o=e(362),a=o(i,r);t.exports=a},{302:302,313:313,362:362}],285:[function(e,t,n){function i(e){var t=e?r(e):0;return o(t)?t:a(e).length}var r=e(369),o=e(381),a=e(409);t.exports=i},{369:369,381:381,409:409}],286:[function(e,t,n){function i(e,t,n){var i=s(e)?r:a;return n&&c(e,t,n)&&(t=void 0),"function"==typeof t&&void 0===n||(t=o(t,n,3)),i(e,t)}var r=e(303),o=e(306),a=e(338),s=e(399),c=e(378);t.exports=i},{303:303,306:306,338:338,378:378,399:399}],287:[function(e,t,n){function i(e,t,n){if(null==e)return[];n&&c(e,t,n)&&(t=void 0);var i=-1;t=r(t,n,3);var u=o(e,function(e,n,r){return{criteria:t(e,n,r),index:++i,value:e}});return a(u,s)}var r=e(306),o=e(328),a=e(339),s=e(347),c=e(378);t.exports=i},{306:306,328:328,339:339,347:347,378:378}],288:[function(e,t,n){var i=e(371),r=i(Date,"now"),o=r||function(){return(new Date).getTime()};t.exports=o},{371:371}],289:[function(e,t,n){var i=e(363),r=e(390),o=e(292),a=o(function(e,t,n){var o=1;if(n.length){var s=r(n,a.placeholder);o|=32}return i(e,o,t,n,s)});a.placeholder={},t.exports=a},{292:292,363:363,390:390}],290:[function(e,t,n){function i(e,t,n){function i(){y&&clearTimeout(y),d&&clearTimeout(d),x=0,d=y=v=void 0}function c(t,n){n&&clearTimeout(n),d=y=v=void 0,
t&&(x=o(),f=e.apply(g,h),y||d||(h=g=void 0))}function u(){var e=t-(o()-m);e<=0||e>t?c(v,d):y=setTimeout(u,e)}function l(){c(b,y)}function p(){if(h=arguments,m=o(),g=this,v=b&&(y||!w),!1===_)var n=w&&!y;else{d||w||(x=m);var i=_-(m-x),r=i<=0||i>_;r?(d&&(d=clearTimeout(d)),x=m,f=e.apply(g,h)):d||(d=setTimeout(l,i))}return r&&y?y=clearTimeout(y):y||t===_||(y=setTimeout(u,t)),n&&(r=!0,f=e.apply(g,h)),!r||y||d||(h=g=void 0),f}var h,d,f,m,g,y,v,x=0,_=!1,b=!0;if("function"!=typeof e)throw new TypeError(a);if(t=t<0?0:+t||0,!0===n){var w=!0;b=!1}else r(n)&&(w=!!n.leading,_="maxWait"in n&&s(+n.maxWait||0,t),b="trailing"in n?!!n.trailing:b);return p.cancel=i,p}var r=e(403),o=e(288),a="Expected a function",s=Math.max;t.exports=i},{288:288,403:403}],291:[function(e,t,n){var i=e(311),r=e(292),o=r(function(e,t){return i(e,1,t)});t.exports=o},{292:292,311:311}],292:[function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(r);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,i=-1,r=o(n.length-t,0),a=Array(r);++i<r;)a[i]=n[t+i];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=n[i];return s[t]=a,e.apply(this,s)}}var r="Expected a function",o=Math.max;t.exports=i},{}],293:[function(e,t,n){function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}var r=e(310),o=e(327),a=Number.POSITIVE_INFINITY;i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},{310:310,327:327}],294:[function(e,t,n){function i(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}var r=e(310),o=e(327);i.prototype=r(o.prototype),i.prototype.constructor=i,t.exports=i},{310:310,327:327}],295:[function(e,t,n){(function(n){function i(e){var t=e?e.length:0;for(this.data={hash:s(null),set:new a};t--;)this.push(e[t])}var r=e(346),o=e(371),a=o(n,"Set"),s=o(Object,"create");i.prototype.push=r,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{346:346,371:371}],296:[function(e,t,n){function i(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}t.exports=i},{}],297:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i&&!1!==t(e[n],n,e););return e}t.exports=i},{}],298:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}t.exports=i},{}],299:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,r=-1,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[++r]=a)}return o}t.exports=i},{}],300:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}t.exports=i},{}],301:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}t.exports=i},{}],302:[function(e,t,n){function i(e,t,n,i){var r=-1,o=e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}t.exports=i},{}],303:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}t.exports=i},{}],304:[function(e,t,n){function i(e,t,n){for(var i=-1,o=r(t),a=o.length;++i<a;){var s=o[i],c=e[s],u=n(c,t[s],s,e,t);(u===u?u===c:c!==c)&&(void 0!==c||s in e)||(e[s]=u)}return e}var r=e(409);t.exports=i},{409:409}],305:[function(e,t,n){function i(e,t){return null==t?e:r(t,o(t),e)}var r=e(309),o=e(409);t.exports=i},{309:309,409:409}],306:[function(e,t,n){function i(e,t,n){var i=typeof e;return"function"==i?void 0===t?e:a(e,t,n):null==e?s:"object"==i?r(e):void 0===t?c(e):o(e,t)}var r=e(329),o=e(330),a=e(343),s=e(417),c=e(419);t.exports=i},{329:329,330:330,343:343,417:417,419:419}],307:[function(e,t,n){function i(e,t,n,y,x,_,b){var w;if(n&&(w=x?n(e,y,x):n(e)),void 0!==w)return w;if(!h(e))return e;var E=p(e);if(E){if(w=c(e),!t)return r(e,w)}else{var C=v.call(e),S=C==f;if(C!=m&&C!=d&&(!S||x))return g[C]?u(e,C,t):x?e:{};if(w=l(S?{}:e),!t)return a(w,e)}_||(_=[]),b||(b=[]);for(var M=_.length;M--;)if(_[M]==e)return b[M];return _.push(e),b.push(w),(E?o:s)(e,function(r,o){w[o]=i(r,t,n,o,e,_,b)}),w}var r=e(296),o=e(297),a=e(305),s=e(321),c=e(373),u=e(374),l=e(375),p=e(399),h=e(403),d="[object Arguments]",f="[object Function]",m="[object Object]",g={};g[d]=g["[object Array]"]=g["[object ArrayBuffer]"]=g["[object Boolean]"]=g["[object Date]"]=g["[object Float32Array]"]=g["[object Float64Array]"]=g["[object Int8Array]"]=g["[object Int16Array]"]=g["[object Int32Array]"]=g["[object Number]"]=g[m]=g["[object RegExp]"]=g["[object String]"]=g["[object Uint8Array]"]=g["[object Uint8ClampedArray]"]=g["[object Uint16Array]"]=g["[object Uint32Array]"]=!0,g["[object Error]"]=g[f]=g["[object Map]"]=g["[object Set]"]=g["[object WeakMap]"]=!1;var y=Object.prototype,v=y.toString;t.exports=i},{296:296,297:297,305:305,321:321,373:373,374:374,375:375,399:399,403:403}],308:[function(e,t,n){function i(e,t){if(e!==t){var n=null===e,i=void 0===e,r=e===e,o=null===t,a=void 0===t,s=t===t;if(e>t&&!o||!r||n&&!a&&s||i&&s)return 1;if(e<t&&!n||!s||o&&!i&&r||a&&r)return-1}return 0}t.exports=i},{}],309:[function(e,t,n){function i(e,t,n){n||(n={});for(var i=-1,r=t.length;++i<r;){var o=t[i];n[o]=e[o]}return n}t.exports=i},{}],310:[function(e,t,n){var i=e(403),r=function(){function e(){}return function(t){if(i(t)){e.prototype=t;var n=new e;e.prototype=void 0}return n||{}}}();t.exports=r},{403:403}],311:[function(e,t,n){function i(e,t,n){if("function"!=typeof e)throw new TypeError(r);return setTimeout(function(){e.apply(void 0,n)},t)}var r="Expected a function";t.exports=i},{}],312:[function(e,t,n){function i(e,t){var n=e?e.length:0,i=[];if(!n)return i;var c=-1,u=r,l=!0,p=l&&t.length>=s?a(t):null,h=t.length;p&&(u=o,l=!1,t=p);e:for(;++c<n;){var d=e[c];if(l&&d===d){for(var f=h;f--;)if(t[f]===d)continue e;i.push(d)}else u(t,d,0)<0&&i.push(d)}return i}var r=e(323),o=e(345),a=e(355),s=200;t.exports=i},{323:323,345:345,355:355}],313:[function(e,t,n){var i=e(321),r=e(352),o=r(i);t.exports=o},{321:321,352:352}],314:[function(e,t,n){function i(e,t){var n=!0;return r(e,function(e,i,r){return n=!!t(e,i,r)}),n}var r=e(313);t.exports=i},{313:313}],315:[function(e,t,n){function i(e,t){var n=[];return r(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}var r=e(313);t.exports=i},{313:313}],316:[function(e,t,n){function i(e,t,n,i){var r;return n(e,function(e,n,o){if(t(e,n,o))return r=i?n:e,!1}),r}t.exports=i},{}],317:[function(e,t,n){function i(e,t,n){for(var i=e.length,r=n?i:-1;n?r--:++r<i;)if(t(e[r],r,e))return r;return-1}t.exports=i},{}],318:[function(e,t,n){function i(e,t,n,u){u||(u=[]);for(var l=-1,p=e.length;++l<p;){var h=e[l];c(h)&&s(h)&&(n||a(h)||o(h))?t?i(h,t,n,u):r(u,h):n||(u[u.length]=h)}return u}var r=e(301),o=e(398),a=e(399),s=e(376),c=e(382);t.exports=i},{301:301,376:376,382:382,398:398,399:399}],319:[function(e,t,n){var i=e(353),r=i();t.exports=r},{353:353}],320:[function(e,t,n){function i(e,t){return r(e,t,o)}var r=e(319),o=e(410);t.exports=i},{319:319,410:410}],321:[function(e,t,n){function i(e,t){return r(e,t,o)}var r=e(319),o=e(409);t.exports=i},{319:319,409:409}],322:[function(e,t,n){function i(e,t,n){if(null!=e){void 0!==n&&n in r(e)&&(t=[n]);for(var i=0,o=t.length;null!=e&&i<o;)e=e[t[i++]];return i&&i==o?e:void 0}}var r=e(394);t.exports=i},{394:394}],323:[function(e,t,n){function i(e,t,n){if(t!==t)return r(e,n);for(var i=n-1,o=e.length;++i<o;)if(e[i]===t)return i;return-1}var r=e(372);t.exports=i},{372:372}],324:[function(e,t,n){function i(e,t,n,s,c,u){return e===t||(null==e||null==t||!o(e)&&!a(t)?e!==e&&t!==t:r(e,t,i,n,s,c,u))}var r=e(325),o=e(403),a=e(382);t.exports=i},{325:325,382:382,403:403}],325:[function(e,t,n){function i(e,t,n,i,h,m,g){var y=s(e),v=s(t),x=l,_=l;y||(x=f.call(e),x==u?x=p:x!=p&&(y=c(e))),v||(_=f.call(t),_==u?_=p:_!=p&&(v=c(t)));var b=x==p,w=_==p,E=x==_;if(E&&!y&&!b)return o(e,t,x);if(!h){var C=b&&d.call(e,"__wrapped__"),S=w&&d.call(t,"__wrapped__");if(C||S)return n(C?e.value():e,S?t.value():t,i,h,m,g)}if(!E)return!1;m||(m=[]),g||(g=[]);for(var M=m.length;M--;)if(m[M]==e)return g[M]==t;m.push(e),g.push(t);var P=(y?r:a)(e,t,n,i,h,m,g);return m.pop(),g.pop(),P}var r=e(364),o=e(365),a=e(366),s=e(399),c=e(406),u="[object Arguments]",l="[object Array]",p="[object Object]",h=Object.prototype,d=h.hasOwnProperty,f=h.toString;t.exports=i},{364:364,365:365,366:366,399:399,406:406}],326:[function(e,t,n){function i(e,t,n){var i=t.length,a=i,s=!n;if(null==e)return!a;for(e=o(e);i--;){var c=t[i];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++i<a;){c=t[i];var u=c[0],l=e[u],p=c[1];if(s&&c[2]){if(void 0===l&&!(u in e))return!1}else{var h=n?n(l,p,u):void 0;if(!(void 0===h?r(p,l,n,!0):h))return!1}}return!0}var r=e(324),o=e(394);t.exports=i},{324:324,394:394}],327:[function(e,t,n){function i(){}t.exports=i},{}],328:[function(e,t,n){function i(e,t){var n=-1,i=o(e)?Array(e.length):[];return r(e,function(e,r,o){i[++n]=t(e,r,o)}),i}var r=e(313),o=e(376);t.exports=i},{313:313,376:376}],329:[function(e,t,n){function i(e){var t=o(e);if(1==t.length&&t[0][2]){var n=t[0][0],i=t[0][1];return function(e){return null!=e&&(e[n]===i&&(void 0!==i||n in a(e)))}}return function(e){return r(e,t)}}var r=e(326),o=e(370),a=e(394);t.exports=i},{326:326,370:370,394:394}],330:[function(e,t,n){function i(e,t){var n=s(e),i=c(e)&&u(t),d=e+"";return e=h(e),function(s){if(null==s)return!1;var c=d;if(s=p(s),(n||!i)&&!(c in s)){if(null==(s=1==e.length?s:r(s,a(e,0,-1))))return!1;c=l(e),s=p(s)}return s[c]===t?void 0!==t||c in s:o(t,s[c],void 0,!0)}}var r=e(322),o=e(324),a=e(337),s=e(399),c=e(379),u=e(383),l=e(271),p=e(394),h=e(395);t.exports=i},{271:271,322:322,324:324,337:337,379:379,383:383,394:394,395:395,399:399}],331:[function(e,t,n){function i(e,t,n,h,d){if(!c(e))return e;var f=s(t)&&(a(t)||l(t)),m=f?void 0:p(t);return r(m||t,function(r,a){if(m&&(a=r,r=t[a]),u(r))h||(h=[]),d||(d=[]),o(e,t,a,i,n,h,d);else{var s=e[a],c=n?n(s,r,a,e,t):void 0,l=void 0===c;l&&(c=r),void 0===c&&(!f||a in e)||!l&&(c===c?c===s:s!==s)||(e[a]=c)}}),e}var r=e(297),o=e(332),a=e(399),s=e(376),c=e(403),u=e(382),l=e(406),p=e(409);t.exports=i},{297:297,332:332,376:376,382:382,399:399,403:403,406:406,409:409}],332:[function(e,t,n){function i(e,t,n,i,p,h,d){for(var f=h.length,m=t[n];f--;)if(h[f]==m)return void(e[n]=d[f]);var g=e[n],y=p?p(g,m,n,e,t):void 0,v=void 0===y;v&&(y=m,s(m)&&(a(m)||u(m))?y=a(g)?g:s(g)?r(g):[]:c(m)||o(m)?y=o(g)?l(g):c(g)?g:{}:v=!1),h.push(m),d.push(y),v?e[n]=i(y,m,p,h,d):(y===y?y!==g:g===g)&&(e[n]=y)}var r=e(296),o=e(398),a=e(399),s=e(376),c=e(404),u=e(406),l=e(407);t.exports=i},{296:296,376:376,398:398,399:399,404:404,406:406,407:407}],333:[function(e,t,n){function i(e){return function(t){return null==t?void 0:t[e]}}t.exports=i},{}],334:[function(e,t,n){function i(e){var t=e+"";return e=o(e),function(n){return r(n,e,t)}}var r=e(322),o=e(395);t.exports=i},{322:322,395:395}],335:[function(e,t,n){function i(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}t.exports=i},{}],336:[function(e,t,n){var i=e(417),r=e(385),o=r?function(e,t){return r.set(e,t),e}:i;t.exports=o},{385:385,417:417}],337:[function(e,t,n){function i(e,t,n){var i=-1,r=e.length;t=null==t?0:+t||0,t<0&&(t=-t>r?0:r+t),n=void 0===n||n>r?r:+n||0,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(r);++i<r;)o[i]=e[i+t];return o}t.exports=i},{}],338:[function(e,t,n){function i(e,t){var n;return r(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}var r=e(313);t.exports=i},{313:313}],339:[function(e,t,n){function i(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}t.exports=i},{}],340:[function(e,t,n){function i(e){return null==e?"":e+""}t.exports=i},{}],341:[function(e,t,n){function i(e,t){var n=-1,i=r,c=e.length,u=!0,l=u&&c>=s,p=l?a():null,h=[];p?(i=o,u=!1):(l=!1,p=t?[]:h);e:for(;++n<c;){var d=e[n],f=t?t(d,n,e):d;if(u&&d===d){for(var m=p.length;m--;)if(p[m]===f)continue e;t&&p.push(f),h.push(d)}else i(p,f,0)<0&&((t||l)&&p.push(f),h.push(d))}return h}var r=e(323),o=e(345),a=e(355),s=200;t.exports=i},{323:323,345:345,355:355}],342:[function(e,t,n){function i(e,t){for(var n=-1,i=t.length,r=Array(i);++n<i;)r[n]=e[t[n]];return r}t.exports=i},{}],343:[function(e,t,n){function i(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)};case 5:return function(n,i,r,o,a){return e.call(t,n,i,r,o,a)}}return function(){return e.apply(t,arguments)}}var r=e(417);t.exports=i},{417:417}],344:[function(e,t,n){(function(e){function n(e){var t=new i(e.byteLength);return new r(t).set(new r(e)),t}var i=e.ArrayBuffer,r=e.Uint8Array;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],345:[function(e,t,n){function i(e,t){var n=e.data;return("string"==typeof t||r(t)?n.set.has(t):n.hash[t])?0:-1}var r=e(403);t.exports=i},{403:403}],346:[function(e,t,n){function i(e){var t=this.data;"string"==typeof e||r(e)?t.set.add(e):t.hash[e]=!0}var r=e(403);t.exports=i},{403:403}],347:[function(e,t,n){function i(e,t){return r(e.criteria,t.criteria)||e.index-t.index}var r=e(308);t.exports=i},{308:308}],348:[function(e,t,n){function i(e,t,n){for(var i=n.length,o=-1,a=r(e.length-i,0),s=-1,c=t.length,u=Array(c+a);++s<c;)u[s]=t[s];for(;++o<i;)u[n[o]]=e[o];for(;a--;)u[s++]=e[o++];return u}var r=Math.max;t.exports=i},{}],349:[function(e,t,n){function i(e,t,n){for(var i=-1,o=n.length,a=-1,s=r(e.length-o,0),c=-1,u=t.length,l=Array(s+u);++a<s;)l[a]=e[a];for(var p=a;++c<u;)l[p+c]=t[c];for(;++i<o;)l[p+n[i]]=e[a++];return l}var r=Math.max;t.exports=i},{}],350:[function(e,t,n){function i(e,t){return function(n,i,s){var c=t?t():{};if(i=r(i,s,3),a(n))for(var u=-1,l=n.length;++u<l;){var p=n[u];e(c,p,i(p,u,n),n)}else o(n,function(t,n,r){e(c,t,i(t,n,r),r)});return c}}var r=e(306),o=e(313),a=e(399);t.exports=i},{306:306,313:313,399:399}],351:[function(e,t,n){function i(e){return a(function(t,n){var i=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,c=a>2?n[2]:void 0,u=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),c&&o(n[0],n[1],c)&&(s=a<3?void 0:s,a=1);++i<a;){var l=n[i];l&&e(t,l,s)}return t})}var r=e(343),o=e(378),a=e(292);t.exports=i},{292:292,343:343,378:378}],352:[function(e,t,n){function i(e,t){return function(n,i){var s=n?r(n):0;if(!o(s))return e(n,i);for(var c=t?s:-1,u=a(n);(t?c--:++c<s)&&!1!==i(u[c],c,u););return n}}var r=e(369),o=e(381),a=e(394);t.exports=i},{369:369,381:381,394:394}],353:[function(e,t,n){function i(e){return function(t,n,i){for(var o=r(t),a=i(t),s=a.length,c=e?s:-1;e?c--:++c<s;){var u=a[c];if(!1===n(o[u],u,o))break}return t}}var r=e(394);t.exports=i},{394:394}],354:[function(e,t,n){(function(n){function i(e,t){function i(){return(this&&this!==n&&this instanceof i?o:e).apply(t,arguments)}var o=r(e);return i}var r=e(356);t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{356:356}],355:[function(e,t,n){(function(n){function i(e){return s&&a?new r(e):null}var r=e(295),o=e(371),a=o(n,"Set"),s=o(Object,"create");t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{295:295,371:371}],356:[function(e,t,n){function i(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),i=e.apply(n,t);return o(i)?i:n}}var r=e(310),o=e(403);t.exports=i},{310:310,403:403}],357:[function(e,t,n){function i(e,t){return function(n,i,c){if(i=r(i,c,3),s(n)){var u=a(n,i,t);return u>-1?n[u]:void 0}return o(n,i,e)}}var r=e(306),o=e(316),a=e(317),s=e(399);t.exports=i},{306:306,316:316,317:317,399:399}],358:[function(e,t,n){function i(e){return function(t,n,i){return t&&t.length?(n=r(n,i,3),o(t,n,e)):-1}}var r=e(306),o=e(317);t.exports=i},{306:306,317:317}],359:[function(e,t,n){function i(e,t){return function(n,i,a){return"function"==typeof i&&void 0===a&&o(n)?e(n,i):t(n,r(i,a,3))}}var r=e(343),o=e(399);t.exports=i},{343:343,399:399}],360:[function(e,t,n){(function(n){function i(e,t,b,w,E,C,S,M,P,R){function T(){for(var f=arguments.length,m=f,g=Array(f);m--;)g[m]=arguments[m];if(w&&(g=o(g,w,E)),C&&(g=a(g,C,S)),j||O){var x=T.placeholder,B=l(g,x);if((f-=B.length)<R){var L=M?r(M):void 0,z=_(R-f,0),F=j?B:void 0,$=j?void 0:B,H=j?g:void 0,U=j?void 0:g;t|=j?y:v,t&=~(j?v:y),N||(t&=~(h|d));var W=[e,t,b,H,F,U,$,L,P,z],V=i.apply(void 0,W);return c(e)&&p(V,W),V.placeholder=x,V}}var G=A?b:this,q=I?G[e]:e;return M&&(g=u(g,M)),k&&P<g.length&&(g.length=P),this&&this!==n&&this instanceof T&&(q=D||s(e)),q.apply(G,g)}var k=t&x,A=t&h,I=t&d,j=t&m,N=t&f,O=t&g,D=I?void 0:s(e);return T}var r=e(296),o=e(348),a=e(349),s=e(356),c=e(380),u=e(389),l=e(390),p=e(391),h=1,d=2,f=4,m=8,g=16,y=32,v=64,x=128,_=Math.max;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{296:296,348:348,349:349,356:356,380:380,389:389,390:390,391:391}],361:[function(e,t,n){(function(n){function i(e,t,i,a){function s(){for(var t=-1,r=arguments.length,o=-1,l=a.length,p=Array(l+r);++o<l;)p[o]=a[o];for(;r--;)p[o++]=arguments[++t];return(this&&this!==n&&this instanceof s?u:e).apply(c?i:this,p)}var c=t&o,u=r(e);return s}var r=e(356),o=1;t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{356:356}],362:[function(e,t,n){function i(e,t){return function(n,i,s,c){var u=arguments.length<3;return"function"==typeof i&&void 0===c&&a(n)?e(n,i,s,u):o(n,r(i,c,4),s,u,t)}}var r=e(306),o=e(335),a=e(399);t.exports=i},{306:306,335:335,399:399}],363:[function(e,t,n){function i(e,t,n,i,y,v,x,_){var b=t&h;if(!b&&"function"!=typeof e)throw new TypeError(m);var w=i?i.length:0;if(w||(t&=~(d|f),i=y=void 0),w-=y?y.length:0,t&f){var E=i,C=y;i=y=void 0}var S=b?void 0:c(e),M=[e,t,n,i,y,E,C,v,x,_];if(S&&(u(M,S),t=M[1],_=M[9]),M[9]=null==_?b?0:e.length:g(_-w,0)||0,t==p)var P=o(M[0],M[2]);else P=t!=d&&t!=(p|d)||M[4].length?a.apply(void 0,M):s.apply(void 0,M);return(S?r:l)(P,M)}var r=e(336),o=e(354),a=e(360),s=e(361),c=e(367),u=e(384),l=e(391),p=1,h=2,d=32,f=64,m="Expected a function",g=Math.max;t.exports=i},{336:336,354:354,360:360,361:361,367:367,384:384,391:391}],364:[function(e,t,n){function i(e,t,n,i,o,a,s){var c=-1,u=e.length,l=t.length;if(u!=l&&!(o&&l>u))return!1;for(;++c<u;){var p=e[c],h=t[c],d=i?i(o?h:p,o?p:h,c):void 0;if(void 0!==d){if(d)continue;return!1}if(o){if(!r(t,function(e){return p===e||n(p,e,i,o,a,s)}))return!1}else if(p!==h&&!n(p,h,i,o,a,s))return!1}return!0}var r=e(303);t.exports=i},{303:303}],365:[function(e,t,n){function i(e,t,n){switch(n){case r:case o:return+e==+t;case a:return e.name==t.name&&e.message==t.message;case s:return e!=+e?t!=+t:e==+t;case c:case u:return e==t+""}return!1}var r="[object Boolean]",o="[object Date]",a="[object Error]",s="[object Number]",c="[object RegExp]",u="[object String]";t.exports=i},{}],366:[function(e,t,n){function i(e,t,n,i,o,s,c){var u=r(e),l=u.length;if(l!=r(t).length&&!o)return!1;for(var p=l;p--;){var h=u[p];if(!(o?h in t:a.call(t,h)))return!1}for(var d=o;++p<l;){h=u[p];var f=e[h],m=t[h],g=i?i(o?m:f,o?f:m,h):void 0;if(!(void 0===g?n(f,m,i,o,s,c):g))return!1;d||(d="constructor"==h)}if(!d){var y=e.constructor,v=t.constructor;if(y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}var r=e(409),o=Object.prototype,a=o.hasOwnProperty;t.exports=i},{409:409}],367:[function(e,t,n){var i=e(385),r=e(418),o=i?function(e){return i.get(e)}:r;t.exports=o},{385:385,418:418}],368:[function(e,t,n){function i(e){for(var t=e.name+"",n=r[t],i=n?n.length:0;i--;){var o=n[i],a=o.func;if(null==a||a==e)return o.name}return t}var r=e(388);t.exports=i},{388:388}],369:[function(e,t,n){var i=e(333),r=i("length");t.exports=r},{333:333}],370:[function(e,t,n){function i(e){for(var t=o(e),n=t.length;n--;)t[n][2]=r(t[n][1]);return t}var r=e(383),o=e(413);t.exports=i},{383:383,413:413}],371:[function(e,t,n){function i(e,t){var n=null==e?void 0:e[t];return r(n)?n:void 0}var r=e(401);t.exports=i},{401:401}],372:[function(e,t,n){function i(e,t,n){for(var i=e.length,r=t+(n?0:-1);n?r--:++r<i;){var o=e[r];if(o!==o)return r}return-1}t.exports=i},{}],373:[function(e,t,n){function i(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&o.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var r=Object.prototype,o=r.hasOwnProperty;t.exports=i},{}],374:[function(e,t,n){function i(e,t,n){var i=e.constructor;switch(t){case l:return r(e);case o:case a:return new i(+e);case p:case h:case d:case f:case m:case g:case y:case v:case x:var b=e.buffer;return new i(n?r(b):b,e.byteOffset,e.length);case s:case u:return new i(e);case c:var w=new i(e.source,_.exec(e));w.lastIndex=e.lastIndex}return w}var r=e(344),o="[object Boolean]",a="[object Date]",s="[object Number]",c="[object RegExp]",u="[object String]",l="[object ArrayBuffer]",p="[object Float32Array]",h="[object Float64Array]",d="[object Int8Array]",f="[object Int16Array]",m="[object Int32Array]",g="[object Uint8Array]",y="[object Uint8ClampedArray]",v="[object Uint16Array]",x="[object Uint32Array]",_=/\w*$/;t.exports=i},{344:344}],375:[function(e,t,n){function i(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}t.exports=i},{}],376:[function(e,t,n){function i(e){return null!=e&&o(r(e))}var r=e(369),o=e(381);t.exports=i},{369:369,381:381}],377:[function(e,t,n){function i(e,t){return e="number"==typeof e||r.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&e<t}var r=/^\d+$/,o=9007199254740991;t.exports=i},{}],378:[function(e,t,n){function i(e,t,n){if(!a(n))return!1;var i=typeof t;if("number"==i?r(n)&&o(t,n.length):"string"==i&&t in n){var s=n[t];return e===e?e===s:s!==s}return!1}var r=e(376),o=e(377),a=e(403);t.exports=i},{376:376,377:377,403:403}],379:[function(e,t,n){function i(e,t){var n=typeof e;return!!("string"==n&&s.test(e)||"number"==n)||!r(e)&&(!a.test(e)||null!=t&&e in o(t))}var r=e(399),o=e(394),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=i},{394:394,399:399}],380:[function(e,t,n){function i(e){var t=a(e),n=s[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var i=o(n);return!!i&&e===i[0]}var r=e(293),o=e(367),a=e(368),s=e(276);t.exports=i},{276:276,293:293,367:367,368:368}],381:[function(e,t,n){function i(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;t.exports=i},{}],382:[function(e,t,n){function i(e){return!!e&&"object"==typeof e}t.exports=i},{}],383:[function(e,t,n){function i(e){return e===e&&!r(e)}var r=e(403);t.exports=i},{403:403}],384:[function(e,t,n){function i(e,t){var n=e[1],i=t[1],m=n|i,g=m<p,y=i==p&&n==l||i==p&&n==h&&e[7].length<=t[8]||i==(p|h)&&n==l;if(!g&&!y)return e;i&c&&(e[2]=t[2],m|=n&c?0:u);var v=t[3];if(v){var x=e[3];e[3]=x?o(x,v,t[4]):r(v),e[4]=x?s(e[3],d):r(t[4])}return v=t[5],v&&(x=e[5],e[5]=x?a(x,v,t[6]):r(v),e[6]=x?s(e[5],d):r(t[6])),v=t[7],v&&(e[7]=r(v)),i&p&&(e[8]=null==e[8]?t[8]:f(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=m,e}var r=e(296),o=e(348),a=e(349),s=e(390),c=1,u=4,l=8,p=128,h=256,d="__lodash_placeholder__",f=Math.min;t.exports=i},{296:296,348:348,349:349,390:390}],385:[function(e,t,n){(function(n){var i=e(371),r=i(n,"WeakMap"),o=r&&new r;t.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{371:371}],386:[function(e,t,n){function i(e,t){e=r(e);for(var n=-1,i=t.length,o={};++n<i;){var a=t[n];a in e&&(o[a]=e[a])}return o}var r=e(394);t.exports=i},{394:394}],387:[function(e,t,n){function i(e,t){var n={};return r(e,function(e,i,r){t(e,i,r)&&(n[i]=e)}),n}var r=e(320);t.exports=i},{320:320}],388:[function(e,t,n){var i={};t.exports=i},{}],389:[function(e,t,n){function i(e,t){for(var n=e.length,i=a(t.length,n),s=r(e);i--;){var c=t[i];e[i]=o(c,n)?s[c]:void 0}return e}var r=e(296),o=e(377),a=Math.min;t.exports=i},{296:296,377:377}],390:[function(e,t,n){function i(e,t){for(var n=-1,i=e.length,o=-1,a=[];++n<i;)e[n]===t&&(e[n]=r,a[++o]=n);return a}var r="__lodash_placeholder__";t.exports=i},{}],391:[function(e,t,n){var i=e(336),r=e(288),o=function(){var e=0,t=0;return function(n,o){var a=r(),s=16-(a-t);if(t=a,s>0){if(++e>=150)return n}else e=0;return i(n,o)}}();t.exports=o},{288:288,336:336}],392:[function(e,t,n){function i(e){for(var t=c(e),n=t.length,i=n&&e.length,u=!!i&&s(i)&&(o(e)||r(e)),p=-1,h=[];++p<n;){var d=t[p];(u&&a(d,i)||l.call(e,d))&&h.push(d)}return h}var r=e(398),o=e(399),a=e(377),s=e(381),c=e(410),u=Object.prototype,l=u.hasOwnProperty;t.exports=i},{377:377,381:381,398:398,399:399,410:410}],393:[function(e,t,n){function i(e,t){for(var n,i=-1,r=e.length,o=-1,a=[];++i<r;){var s=e[i],c=t?t(s,i,e):s;i&&n===c||(n=c,a[++o]=s)}return a}t.exports=i},{}],394:[function(e,t,n){function i(e){return r(e)?e:Object(e)}var r=e(403);t.exports=i},{403:403}],395:[function(e,t,n){function i(e){if(o(e))return e;var t=[];return r(e).replace(a,function(e,n,i,r){t.push(i?r.replace(s,"$1"):n||e)}),t}var r=e(340),o=e(399),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,s=/\\(\\)?/g;t.exports=i},{340:340,399:399}],396:[function(e,t,n){function i(e){return e instanceof r?e.clone():new o(e.__wrapped__,e.__chain__,a(e.__actions__))}var r=e(293),o=e(294),a=e(296);t.exports=i},{293:293,294:294,296:296}],397:[function(e,t,n){function i(e,t,n,i){return t&&"boolean"!=typeof t&&a(e,t,n)?t=!1:"function"==typeof t&&(i=n,n=t,t=!1),"function"==typeof n?r(e,t,o(n,i,3)):r(e,t)}var r=e(307),o=e(343),a=e(378);t.exports=i},{307:307,343:343,378:378}],398:[function(e,t,n){function i(e){return o(e)&&r(e)&&s.call(e,"callee")&&!c.call(e,"callee")}var r=e(376),o=e(382),a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable;t.exports=i},{376:376,382:382}],399:[function(e,t,n){var i=e(371),r=e(381),o=e(382),a=Object.prototype,s=a.toString,c=i(Array,"isArray"),u=c||function(e){return o(e)&&r(e.length)&&"[object Array]"==s.call(e)};t.exports=u},{371:371,381:381,382:382}],400:[function(e,t,n){function i(e){return r(e)&&s.call(e)==o}var r=e(403),o="[object Function]",a=Object.prototype,s=a.toString;t.exports=i},{403:403}],401:[function(e,t,n){function i(e){return null!=e&&(r(e)?l.test(c.call(e)):o(e)&&a.test(e))}var r=e(400),o=e(382),a=/^\[object .+?Constructor\]$/,s=Object.prototype,c=Function.prototype.toString,u=s.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=i},{382:382,400:400}],402:[function(e,t,n){function i(e){return"number"==typeof e||r(e)&&s.call(e)==o}var r=e(382),o="[object Number]",a=Object.prototype,s=a.toString;t.exports=i},{382:382}],403:[function(e,t,n){function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=i},{}],404:[function(e,t,n){function i(e){var t;if(!a(e)||l.call(e)!=s||o(e)||!u.call(e,"constructor")&&"function"==typeof(t=e.constructor)&&!(t instanceof t))return!1;var n;return r(e,function(e,t){n=t}),void 0===n||u.call(e,n)}var r=e(320),o=e(398),a=e(382),s="[object Object]",c=Object.prototype,u=c.hasOwnProperty,l=c.toString;t.exports=i},{320:320,382:382,398:398}],405:[function(e,t,n){function i(e){return"string"==typeof e||r(e)&&s.call(e)==o}var r=e(382),o="[object String]",a=Object.prototype,s=a.toString;t.exports=i},{382:382}],406:[function(e,t,n){function i(e){return o(e)&&r(e.length)&&!!a[c.call(e)]}var r=e(381),o=e(382),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=Object.prototype,c=s.toString;t.exports=i},{381:381,382:382}],407:[function(e,t,n){function i(e){return r(e,o(e))}var r=e(309),o=e(410);t.exports=i},{309:309,410:410}],408:[function(e,t,n){var i=e(304),r=e(305),o=e(351),a=o(function(e,t,n){return n?i(e,t,n):r(e,t)});t.exports=a},{304:304,305:305,351:351}],409:[function(e,t,n){var i=e(371),r=e(376),o=e(403),a=e(392),s=i(Object,"keys"),c=s?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):o(e)?s(e):[]}:a;t.exports=c},{371:371,376:376,392:392,403:403}],410:[function(e,t,n){function i(e){if(null==e)return[];c(e)||(e=Object(e));var t=e.length;t=t&&s(t)&&(o(e)||r(e))&&t||0;for(var n=e.constructor,i=-1,u="function"==typeof n&&n.prototype===e,p=Array(t),h=t>0;++i<t;)p[i]=i+"";for(var d in e)h&&a(d,t)||"constructor"==d&&(u||!l.call(e,d))||p.push(d);return p}var r=e(398),o=e(399),a=e(377),s=e(381),c=e(403),u=Object.prototype,l=u.hasOwnProperty;t.exports=i},{377:377,381:381,398:398,399:399,403:403}],411:[function(e,t,n){var i=e(331),r=e(351),o=r(i);t.exports=o},{331:331,351:351}],412:[function(e,t,n){var i=e(300),r=e(312),o=e(318),a=e(343),s=e(410),c=e(386),u=e(387),l=e(292),p=l(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=i(o(t),String);return c(e,r(s(e),t))}var n=a(t[0],t[1],3);return u(e,function(e,t,i){return!n(e,t,i)})});t.exports=p},{292:292,300:300,312:312,318:318,343:343,386:386,387:387,410:410}],413:[function(e,t,n){function i(e){e=o(e);for(var t=-1,n=r(e),i=n.length,a=Array(i);++t<i;){var s=n[t];a[t]=[s,e[s]]}return a}var r=e(409),o=e(394);t.exports=i},{394:394,409:409}],414:[function(e,t,n){var i=e(318),r=e(343),o=e(386),a=e(387),s=e(292),c=s(function(e,t){return null==e?{}:"function"==typeof t[0]?a(e,r(t[0],t[1],3)):o(e,i(t))});t.exports=c},{292:292,318:318,343:343,386:386,387:387}],415:[function(e,t,n){function i(e,t,n,i){var h=c(e)||p(e);if(t=o(t,i,4),null==n)if(h||l(e)){var d=e.constructor;n=h?c(e)?new d:[]:a(u(d)?d.prototype:void 0)}else n={};return(h?r:s)(e,function(e,i,r){return t(n,e,i,r)}),n}var r=e(297),o=e(306),a=e(310),s=e(321),c=e(399),u=e(400),l=e(403),p=e(406);t.exports=i},{297:297,306:306,310:310,321:321,399:399,400:400,403:403,406:406}],416:[function(e,t,n){function i(e){return r(e,o(e))}var r=e(342),o=e(409);t.exports=i},{342:342,409:409}],417:[function(e,t,n){function i(e){return e}t.exports=i},{}],418:[function(e,t,n){function i(){}t.exports=i},{}],419:[function(e,t,n){function i(e){return a(e)?r(e):o(e)}var r=e(333),o=e(334),a=e(379);t.exports=i},{333:333,334:334,379:379}],420:[function(e,t,n){"use strict";function i(e,t){if(!e||1!==e.nodeType)return!1;if(o)return o.call(e,t);for(var n=e.parentNode.querySelectorAll(t),i=0;i<n.length;i++)if(n[i]==e)return!0;return!1}var r="undefined"!=typeof Element?Element.prototype:{},o=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector;t.exports=i},{}],421:[function(e,t,n){arguments[4][253][0].apply(n,arguments)},{253:253,89:89}],422:[function(e,t,n){arguments[4][254][0].apply(n,arguments)},{254:254,263:263}],423:[function(e,t,n){arguments[4][95][0].apply(n,arguments)},{86:86,95:95}],424:[function(e,t,n){t.exports=e(88)},{88:88}],425:[function(e,t,n){arguments[4][96][0].apply(n,arguments)},{96:96}],426:[function(e,t,n){"use strict";function i(e){return e.xml&&"lowerCase"===e.xml.tagAlias}function r(e){return e.xml&&e.xml.serialize}t.exports.hasLowerCaseAlias=i,
t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var o=t.exports.XSI_TYPE="xsi:type";t.exports.serializeAsType=function(e){return r(e)===o},t.exports.serializeAsProperty=function(e){return"property"===r(e)}},{}],427:[function(e,t,n){"use strict";function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t){return N(t)?e.prefix+":"+i(e.localName):e.name}function o(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&0===i.indexOf(r)?e.prefix+":"+i.slice(r.length):n}function a(e,t){var n=P(e);return o(n,t.getPackage(n.prefix))}function s(e){return new Error(e)}function c(e){return e.$descriptor}function u(e){w(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw s("expected element");var t,n=this.elementsById,i=c(e),r=i.idProperty;if(r&&(t=e.get(r.name))){if(n[t])throw s("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function l(){}function p(){}function h(){}function d(e,t){this.property=e,this.context=t}function f(e,t){this.element=t,this.propertyDesc=e}function m(){}function g(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function y(e,t,n){g.call(this,e,t,n)}function v(e,t,n){this.model=e,this.context=n}function x(e){e instanceof M&&(e={model:e}),w(this,{lax:!1},e)}var _=e(281),b=e(280),w=e(408),E=e(291),C=e(444),S=e(443),M=e(429),P=e(434).parseName,R=e(437),T=R.coerceType,k=R.isSimple,A=e(426),I=A.XSI_TYPE,j=A.serializeAsType,N=A.hasLowerCaseAlias;l.prototype.handleEnd=function(){},l.prototype.handleText=function(){},l.prototype.handleNode=function(){},p.prototype=Object.create(l.prototype),p.prototype.handleNode=function(){return this},h.prototype=Object.create(l.prototype),h.prototype.handleText=function(e){this.body=(this.body||"")+e},d.prototype=Object.create(h.prototype),d.prototype.handleNode=function(e){if(this.element)throw s("expected no sub nodes");return this.element=this.createReference(e),this},d.prototype.handleEnd=function(){this.element.id=this.body},d.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},f.prototype=Object.create(h.prototype),f.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=T(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},m.prototype=Object.create(h.prototype),m.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},g.prototype=Object.create(m.prototype),g.prototype.addReference=function(e){this.context.addReference(e)},g.prototype.handleEnd=function(){var e=this.body,t=this.element,n=c(t),i=n.bodyProperty;i&&void 0!==e&&(e=T(i.type,e),t.set(i.name,e))},g.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=c(n),r=this.context,o=new n({});return _(t,function(e,t){var n,a=i.propertiesByName[t];a&&a.isReference?a.isMany?(n=e.split(" "),_(n,function(e){r.addReference({element:o,property:a.ns.name,id:e})})):r.addReference({element:o,property:a.ns.name,id:e}):(a&&(e=T(a.type,e)),o.set(t,e))}),o},g.prototype.getPropertyForNode=function(e){var t,n,i=e.name,o=P(i),u=this.type,l=this.model,p=c(u),h=o.name,d=p.propertiesByName[h];if(d)return j(d)&&(t=e.attributes[I])?(t=a(t,l),n=l.getType(t),w({},d,{effectiveType:c(n).name})):d;var f=l.getPackage(o.prefix);if(f){if(t=r(o,f),n=l.getType(t),d=b(p.properties,function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)}))return w({},d,{effectiveType:c(n).name})}else if(d=b(p.properties,function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type}))return d;throw s("unrecognized element <"+o.name+">")},g.prototype.toString=function(){return"ElementDescriptor["+c(this.type).name+"]"},g.prototype.valueHandler=function(e,t){return new f(e,t)},g.prototype.referenceHandler=function(e){return new d(e,this.context)},g.prototype.handler=function(e){return"Element"===e?new v(this.model,e,this.context):new g(this.model,e,this.context)},g.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,k(n))return this.valueHandler(t,i);r=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e);var o=r.element;return void 0!==o&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(w(o,{element:i}),this.context.addReference(o)):o.$parent=i),r},y.prototype=Object.create(g.prototype),y.prototype.createElement=function(e){var t=e.name,n=P(t),i=this.model,o=this.type,a=i.getPackage(n.prefix),c=a&&r(n,a)||t;if(!o.hasType(c))throw s("unexpected element <"+e.originalName+">");return g.prototype.createElement.call(this,e)},v.prototype=Object.create(m.prototype),v.prototype.createElement=function(e){var t=e.name,n=P(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)},v.prototype.handleChild=function(e){var t,n=new v(this.model,"Element",this.context).handleNode(e),i=this.element,r=n.element;return void 0!==r&&(t=i.$children=i.$children||[],t.push(r),r.$parent=i),n},v.prototype.handleText=function(e){this.body=this.body||""+e},v.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},x.prototype.fromXML=function(e,t,n){function i(e,t,n){var i=t(),r=i.line,o=i.column,a=i.data;"<"===a.charAt(0)&&-1!==a.indexOf(" ")&&(a=a.slice(0,a.indexOf(" "))+">");var c="unparsable content "+(a?a+" ":"")+"detected\n\tline: "+r+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return x.addWarning({message:c,error:e}),console.warn("could not parse node"),console.warn(e),!0;throw console.error("could not parse document"),console.error(e),s(c)}function r(e,t){return i(e,t,!0)}function o(){var e,t,n=x.elementsById,i=x.references;for(e=0;t=i[e];e++){var r=t.element,o=n[t.id],a=c(r).propertiesByName[t.property];if(o||x.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),a.isMany){var s=r.get(a.name),u=s.indexOf(t);-1===u&&(u=s.length),o?s[u]=o:s.splice(u,1)}else r.set(a.name,o)}}function a(){b.pop().handleEnd()}function l(e){var t=M.exec(e),n=t&&t[1];n&&!P.test(n)&&x.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}function h(e,t){var n=b.peek();try{b.push(n.handleNode(e))}catch(e){i(e,t,v)&&b.push(new p)}}function d(e){b.peek().handleText(e)}function f(e){(e=e.trim())&&b.peek().handleText(e)}var m=t.rootHandler;t instanceof g?(m=t,t={}):"string"==typeof t?(m=this.handler(t),t={}):"string"==typeof m&&(m=this.handler(m));var y=this.model,v=this.lax,x=new u(w({},t,{rootHandler:m})),_=new S({proxy:!0}),b=new C;m.context=x,b.push(m);var M=/^<\?xml.* encoding="([^"]+)"(?: .*)?\?>$/i,P=/^utf-8$/i,R=y.getPackages().reduce(function(e,t){return e[t.uri]=t.prefix,e},{});_.ns(R).on("openTag",function(e,t,n,i){var r=e.attrs||{},o=Object.keys(r).reduce(function(e,n){var i=t(r[n]);return e[n]=i,e},{});h({name:e.name,originalName:e.originalName,attributes:o,ns:e.ns},i)}).on("question",l).on("closeTag",a).on("cdata",d).on("text",f).on("error",i).on("warn",r),E(function(){var t;try{_.parse(e),o()}catch(e){t=e}var i=m.element;t||i||(t=s("failed to parse document as <"+m.type.$descriptor.name+">")),n(t,t?void 0:i,x)})},x.prototype.handler=function(e){return new y(this.model,e)},t.exports=x,t.exports.ElementHandler=g},{280:280,281:281,291:291,408:408,426:426,429:429,434:434,437:437,443:443,444:444}],428:[function(e,t,n){"use strict";function i(e){return e.charAt(0).toLowerCase()+e.slice(1)}function r(e,t){return k(t)?i(e):e}function o(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function a(e){return C(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function s(e){function t(t){return e.used[t.uri]}function n(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}var i=[].concat(e.wellknown,e.custom);return w(S(i,t),n)}function c(e,t){return t.isGeneric?M({localName:t.ns.localName},e):M({localName:r(t.ns.localName,t.$pkg)},e)}function u(e,t){return M({localName:t.ns.localName},e)}function l(e){var t=e.$descriptor;return S(t.properties,function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var i=e[n];return i!==t.default&&(null!==i&&(!t.isMany||i.length))})}function p(e){return e=C(e)?e:""+e,e.replace(N,function(e){return"&#"+B[e]+";"})}function h(e){return S(e,function(e){return e.isAttr})}function d(e){return S(e,function(e){return!e.isAttr})}function f(e,t){this.ns=t}function m(){}function g(e){this.ns=e}function y(e,t){this.body=[],this.attrs=[],this.parent=e,this.ns=t}function v(e,t){y.call(this,e,t)}function x(){this.value="",this.write=function(e){this.value+=e}}function _(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function b(e){function t(t,n){var i=n||new x,r=new _(i,e.format);if(e.preamble&&r.append(j),(new y).build(t).serializeTo(r),!n)return i.value}return e=M({format:!1,preamble:!0},e||{}),{toXML:t}}var w=e(283),E=e(281),C=e(405),S=e(279),M=e(408),P=e(437),R=e(434).parseName,T=e(426),k=T.hasLowerCaseAlias,A=T.serializeAsType,I=T.serializeAsProperty,j='<?xml version="1.0" encoding="UTF-8"?>\n',N=/(<|>|'|"|&|\n\r|\n)/g,O=T.DEFAULT_NS_MAP,D=T.XSI_TYPE,B={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};f.prototype.build=function(e){return this.element=e,this},f.prototype.serializeTo=function(e){e.appendIndent().append("<"+a(this.ns)+">"+this.element.id+"</"+a(this.ns)+">").appendNewLine()},m.prototype.serializeValue=m.prototype.serializeTo=function(e){var t=this.escape;t&&e.append("<![CDATA["),e.append(this.value),t&&e.append("]]>")},m.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search(N)&&(this.escape=!0),this},o(g,m),g.prototype.serializeTo=function(e){e.appendIndent().append("<"+a(this.ns)+">"),this.serializeValue(e),e.append("</"+a(this.ns)+">").appendNewLine()},y.prototype.build=function(e){this.element=e;var t=this.parseNsAttributes(e);if(this.ns||(this.ns=this.nsTagName(e.$descriptor)),e.$descriptor.isGeneric)this.parseGeneric(e);else{var n=l(e);this.parseAttributes(h(n)),this.parseContainments(d(n)),this.parseGenericAttributes(e,t)}return this},y.prototype.nsTagName=function(e){return c(this.logNamespaceUsed(e.ns),e)},y.prototype.nsPropertyTagName=function(e){return u(this.logNamespaceUsed(e.ns),e)},y.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},y.prototype.nsAttributeName=function(e){var t;if(t=C(e)?R(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.isLocalNs(n)?{localName:t.localName}:M({localName:t.localName},n)},y.prototype.parseGeneric=function(e){var t=this,n=this.body,i=this.attrs;E(e,function(e,r){"$body"===r?n.push((new m).build({type:"String"},e)):"$children"===r?E(e,function(e){n.push(new y(t).build(e))}):0!==r.indexOf("$")&&i.push({name:r,value:p(e)})})},y.prototype.parseNsAttributes=function(e){var t=this,n=e.$attrs,i=e.$model,r=[];return E(n,function(e,n){var o,a=R(n);"xmlns"===a.prefix&&(o={prefix:a.localName,uri:e}),a.prefix||"xmlns"!==a.localName||(o={uri:e}),o?i.getPackage(e)?t.logNamespace(o,!0):t.logNamespaceUsed(o):r.push({name:n,value:e})}),r},y.prototype.parseGenericAttributes=function(e,t){var n=this;E(t,function(t){if(t.name!==D)try{n.addAttribute(n.nsAttributeName(t.name),t.value)}catch(n){console.warn("missing namespace information for ",t.name,"=",t.value,"on",e,n)}})},y.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;E(e,function(e){var r=i.get(e.name),o=e.isReference,a=e.isMany,s=t.nsPropertyTagName(e);if(a||(r=[r]),e.isBody)n.push((new m).build(e,r[0]));else if(P.isSimple(e.type))E(r,function(t){n.push(new g(s).build(e,t))});else if(o)E(r,function(e){n.push(new f(t,s).build(e))});else{var c=A(e),u=I(e);E(r,function(e){var i;i=c?new v(t,s):u?new y(t,s):new y(t),n.push(i.build(e))})}})},y.prototype.getNamespaces=function(){var e=this.namespaces,t=this.parent;return e||(e=this.namespaces=t?t.getNamespaces():{prefixMap:{},uriMap:{},used:{},wellknown:[],custom:[]}),e},y.prototype.logNamespace=function(e,t){var n=this.getNamespaces(),i=e.uri;return n.uriMap[i]||(n.uriMap[i]=e,t?n.wellknown.push(e):n.custom.push(e)),n.prefixMap[e.prefix]=i,e},y.prototype.logNamespaceUsed=function(e){var t,n,i,r=this.element,o=r.$model,a=this.getNamespaces(),s=e.prefix,c=e.uri;if(!s&&!c)return{localName:e.localName};if(i=O[s]||o&&(o.getPackage(s)||{}).uri,!(c=c||i||a.prefixMap[s]))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=a.uriMap[c])){for(t=s,n=1;a.prefixMap[t];)t=s+"_"+n++;e=this.logNamespace({prefix:t,uri:c},i===c)}return a.used[e.uri]||(a.used[e.uri]=e),e},y.prototype.parseAttributes=function(e){var t=this,n=this.element;E(e,function(e){var i=n.get(e.name);if(e.isReference)if(e.isMany){var r=[];E(i,function(e){r.push(e.id)}),i=r.join(" ")}else i=i.id;t.addAttribute(t.nsAttributeName(e),i)})},y.prototype.addAttribute=function(e,t){var n=this.attrs;C(t)&&(t=p(t)),n.push({name:e,value:t})},y.prototype.serializeAttributes=function(e){var t=this.attrs;!this.parent&&(t=s(this.namespaces).concat(t)),E(t,function(t){e.append(" ").append(a(t.name)).append('="').append(t.value).append('"')})},y.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==m;e.appendIndent().append("<"+a(this.ns)),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),E(this.body,function(t){t.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+a(this.ns)+">")),e.appendNewLine()},o(v,y),v.prototype.build=function(e){var t=e.$descriptor;this.element=e,this.typeNs=this.nsTagName(t);var n=this.typeNs,i=e.$model.getPackage(n.uri),r=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(D),(n.prefix?n.prefix+":":"")+r+t.ns.localName),y.prototype.build.call(this,e)},v.prototype.isLocalNs=function(e){return e.uri===this.typeNs.uri},t.exports=b},{279:279,281:281,283:283,405:405,408:408,426:426,434:434,437:437}],429:[function(e,t,n){t.exports=e(433)},{433:433}],430:[function(e,t,n){"use strict";function i(){}i.prototype.get=function(e){return this.$model.properties.get(this,e)},i.prototype.set=function(e,t){this.$model.properties.set(this,e,t)},t.exports=i},{}],431:[function(e,t,n){"use strict";function i(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}var r=e(414),o=e(408),a=e(281),s=e(434).parseName;t.exports=i,i.prototype.build=function(){return r(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},i.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var i=this.properties;void 0!==t?i.splice(t,0,e):i.push(e)},i.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(-1===s)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},i.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=s(r[0],i),a=s(r[1],o.prefix).name,c=this.propertiesByName[a];if(!c)throw new Error("refined property <"+a+"> not found");this.replaceProperty(c,e,n),delete e.redefines},i.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},i.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},i.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},i.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},i.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},i.prototype.hasProperty=function(e){return this.propertiesByName[e]},i.prototype.addTrait=function(e,t){var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(a(e.properties,function(n){n=o({},n,{name:n.ns.localName,inherited:t}),Object.defineProperty(n,"definedBy",{value:e});var i=n.replaces,r=n.redefines;i||r?this.redefineProperty(n,i||r,i):(n.isBody&&this.setBodyProperty(n),n.isId&&this.setIdProperty(n),this.addProperty(n))},this),i.push(e),n[r]=e)}},{281:281,408:408,414:414,434:434}],432:[function(e,t,n){"use strict";function i(e,t){this.model=e,this.properties=t}var r=e(281),o=e(430);t.exports=i,i.prototype.createType=function(e){function t(e){i.define(this,"$type",{value:s,enumerable:!0}),i.define(this,"$attrs",{value:{}}),i.define(this,"$parent",{writable:!0}),r(e,function(e,t){this.set(t,e)},this)}var n=this.model,i=this.properties,a=Object.create(o.prototype);r(e.properties,function(e){e.isMany||void 0===e.default||(a[e.name]=e.default)}),i.defineModel(a,n),i.defineDescriptor(a,e);var s=e.ns.name;return t.prototype=a,t.hasType=a.$instanceOf=this.model.hasType,i.defineModel(t,n),i.defineDescriptor(t,e),t}},{281:281,430:430}],433:[function(e,t,n){"use strict";function i(e){this.properties=new u(this),this.factory=new s(this,this.properties),this.registry=new c(e,this.properties),this.typeCache={}}var r=e(405),o=e(403),a=e(281),s=e(432),c=e(436),u=e(435),l=e(434).parseName;t.exports=i,i.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},i.prototype.getType=function(e){var t=this.typeCache,n=r(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},i.prototype.createAny=function(e,t,n){var i=l(e),r={$type:e,$instanceOf:function(e){return e===this.$type}},s={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,s),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),a(n,function(e,t){o(e)&&void 0!==e.value?r[e.name]=e.value:r[t]=e}),r},i.prototype.getPackage=function(e){return this.registry.getPackage(e)},i.prototype.getPackages=function(){return this.registry.getPackages()},i.prototype.getElementDescriptor=function(e){return e.$descriptor},i.prototype.hasType=function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName},i.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},i.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]}},{281:281,403:403,405:405,432:432,434:434,435:435,436:436}],434:[function(e,t,n){"use strict";t.exports.parseName=function(e,t){var n,i,r=e.split(/:/);if(1===r.length)n=e,i=t;else{if(2!==r.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=r[1],i=r[0]}return e=(i?i+":":"")+n,{name:e,prefix:i,localName:n}}},{}],435:[function(e,t,n){"use strict";function i(e){this.model=e}function r(e){return void 0===e}function o(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}t.exports=i,i.prototype.set=function(e,t,n){var i=this.model.getPropertyDescriptor(e,t),a=i&&i.name;r(n)?i?delete e[a]:delete e.$attrs[t]:i?a in e?e[a]=n:o(e,i,n):e.$attrs[t]=n},i.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var i=n.name;return!e[i]&&n.isMany&&o(e,n,[]),e[i]},i.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},i.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},i.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})}},{}],436:[function(e,t,n){"use strict";function i(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,a(e,this.registerPackage,this)}function r(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}var o=e(408),a=e(281),s=e(437),c=e(431),u=e(434).parseName,l=s.isBuiltIn;t.exports=i,i.prototype.getPackage=function(e){return this.packageMap[e]},i.prototype.getPackages=function(){return this.packages},i.prototype.registerPackage=function(e){e=o({},e);var t=this.packageMap;r(t,e,"prefix"),r(t,e,"uri"),a(e.types,function(t){this.registerType(t,e)},this),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},i.prototype.registerType=function(e,t){e=o({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:o(e.meta||{})});var n=u(e.name,t.prefix),i=n.name,r={};a(e.properties,function(e){var t=u(e.name,n.prefix),i=t.name;l(e.type)||(e.type=u(e.type,t.prefix).name),o(e,{ns:t,name:i}),r[i]=e}),o(e,{ns:n,name:i,propertiesByName:r}),a(e.extends,function(e){var t=this.typeMap[e];t.traits=t.traits||[],t.traits.push(i)},this),this.definePackage(e,t),this.typeMap[i]=e},i.prototype.mapTypes=function(e,t,n){function i(e){return r(e,!0)}function r(n,i){var r=u(n,l(n)?"":e.prefix);s.mapTypes(r,t,i)}var o=l(e.name)?{name:e.name}:this.typeMap[e.name],s=this;if(!o)throw new Error("unknown type <"+e.name+">");a(o.superClass,n?i:r),t(o,!n),a(o.traits,i)},i.prototype.getEffectiveDescriptor=function(e){var t=u(e),n=new c(t);this.mapTypes(t,function(e,t){n.addTrait(e,t)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},i.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})}},{281:281,408:408,431:431,434:434,437:437}],437:[function(e,t,n){"use strict";var i={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},r={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}};t.exports.coerceType=function(e,t){var n=r[e];return n?n(t):t},t.exports.isBuiltIn=function(e){return!!i[e]},t.exports.isSimple=function(e){return!!r[e]}},{}],438:[function(e,t,n){t.exports=e(440),t.exports.Collection=e(439)},{439:439,440:440}],439:[function(e,t,n){"use strict";function i(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(e){var n=this.indexOf(e);return-1!==n&&(this.splice(n,1),t.unset(e,r,i)),e}}),Object.defineProperty(e,"contains",{value:function(e){return-1!==this.indexOf(e)}}),Object.defineProperty(e,"add",{value:function(e){this.contains(e)||(this.push(e),t.set(e,r,i))}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function r(e){return!0===e.__refs_collection}t.exports.extend=i,t.exports.isExtended=r},{}],440:[function(e,t,n){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function r(e,t,n){Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:s.extend(n[t.name]||[],e,t,n)})}function o(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var o=r;r=null,o&&e.unset(o,i,n),r=t,e.set(r,i,n)}}})}function a(e,t){if(!(this instanceof a))return new a(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}var s=e(439);a.prototype.bind=function(e,t){if("string"==typeof t){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?r(this,t,e):o(this,t,e)},a.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return s.isExtended(n)||r(this,t,e),n},a.prototype.ensureBound=function(e,t){i(e,t)||this.bind(e,t)},a.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},a.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)},t.exports=a},{439:439}],441:[function(e,t,n){"use strict";function i(e,t){return t=String.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==t)}function r(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[k](n)&&(t[n]=r(e[n]));return t}function o(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function a(e,t,n){function i(){var r=Array.prototype.slice.call(arguments,0),a=r.join(""),s=i.cache=i.cache||{},c=i.count=i.count||[];return s[k](a)?(o(c,a),n?n(s[a]):s[a]):(c.length>=1e3&&delete s[c.shift()],c.push(a),s[a]=e.apply(t,r),n?n(s[a]):s[a])}return i}function s(e){if(!e)return null;var t=c(e);if(t.arr)return r(t.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return i(e,"array")&&i(e[0],"array")&&(o=r(e)),o.length||String(e).replace(z,function(e,t,i){var r=[],a=t.toLowerCase();if(i.replace(F,function(e,t){t&&r.push(+t)}),"m"==a&&r.length>2&&(o.push([t].concat(r.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==r.length&&o.push([t,r[0]]),"r"==a)o.push([t].concat(r));else for(;r.length>=n[a]&&(o.push([t].concat(r.splice(0,n[a]))),n[a]););}),o.toString=c.toString,t.arr=r(o),o}function c(e){var t=c.ps=c.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[k](n)&&n!=e&&!--t[n].sleep&&delete t[n]}),t[e]}function u(e,t,n,i){return null==e&&(e=t=n=i=0),null==t&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:i,h:i,x2:e+n,y2:t+i,cx:e+n/2,cy:t+i/2,r1:j.min(n,i)/2,r2:j.max(n,i)/2,r0:j.sqrt(n*n+i*i)/2,path:b(e,t,n,i),vb:[e,t,n,i].join(" ")}}function l(){return this.join(",").replace(A,"$1")}function p(e){var t=r(e);return t.toString=l,t}function h(e,t,n,i,r,o,a,s,c){var u=1-c,l=B(u,3),p=B(u,2),h=c*c,d=h*c,f=l*e+3*p*c*n+3*u*c*c*r+d*a,m=l*t+3*p*c*i+3*u*c*c*o+d*s,g=e+2*c*(n-e)+h*(r-2*n+e),y=t+2*c*(i-t)+h*(o-2*i+t),v=n+2*c*(r-n)+h*(a-2*r+n),x=i+2*c*(o-i)+h*(s-2*o+i);return{x:f,y:m,m:{x:g,y:y},n:{x:v,y:x},start:{x:u*e+c*n,y:u*t+c*i},end:{x:u*r+c*a,y:u*o+c*s},alpha:90-180*j.atan2(g-v,y-x)/N}}function d(e,t,n,r,o,a,s,c){i(e,"array")||(e=[e,t,n,r,o,a,s,c]);var l=R.apply(null,e);return u(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function f(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function m(e,t){return e=u(e),t=u(t),f(t,e.x,e.y)||f(t,e.x2,e.y)||f(t,e.x,e.y2)||f(t,e.x2,e.y2)||f(e,t.x,t.y)||f(e,t.x2,t.y)||f(e,t.x,t.y2)||f(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function g(e,t,n,i,r){return e*(e*(-3*t+9*n-9*i+3*r)+6*t-12*n+6*i)-3*t+3*n}function y(e,t,n,i,r,o,a,s,c){null==c&&(c=1),c=c>1?1:c<0?0:c;for(var u=c/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,d=0;d<12;d++){var f=u*l[d]+u,m=g(f,e,n,r,a),y=g(f,t,i,o,s),v=m*m+y*y;h+=p[d]*j.sqrt(v)}return u*h}function v(e,t,n,i,r,o,a,s){if(!(D(e,n)<O(r,a)||O(e,n)>D(r,a)||D(t,i)<O(o,s)||O(t,i)>D(o,s))){var c=(e*i-t*n)*(r-a)-(e-n)*(r*s-o*a),u=(e*i-t*n)*(o-s)-(t-i)*(r*s-o*a),l=(e-n)*(o-s)-(t-i)*(r-a);if(l){var p=c/l,h=u/l,d=+p.toFixed(2),f=+h.toFixed(2);if(!(d<+O(e,n).toFixed(2)||d>+D(e,n).toFixed(2)||d<+O(r,a).toFixed(2)||d>+D(r,a).toFixed(2)||f<+O(t,i).toFixed(2)||f>+D(t,i).toFixed(2)||f<+O(o,s).toFixed(2)||f>+D(o,s).toFixed(2)))return{x:p,y:h}}}}function x(e,t,n){if(!m(d(e),d(t)))return n?0:[];for(var i=y.apply(0,e),r=y.apply(0,t),o=~~(i/5),a=~~(r/5),s=[],c=[],u={},l=n?0:[],p=0;p<o+1;p++){var f=h.apply(0,e.concat(p/o));s.push({x:f.x,y:f.y,t:p/o})}for(p=0;p<a+1;p++)f=h.apply(0,t.concat(p/a)),c.push({x:f.x,y:f.y,t:p/a});for(p=0;p<o;p++)for(var g=0;g<a;g++){var x=s[p],_=s[p+1],b=c[g],w=c[g+1],E=L(_.x-x.x)<.01?"y":"x",C=L(w.x-b.x)<.01?"y":"x",S=v(x.x,x.y,_.x,_.y,b.x,b.y,w.x,w.y);if(S){if(u[S.x.toFixed(0)]==S.y.toFixed(0))continue;u[S.x.toFixed(0)]=S.y.toFixed(0);var M=x.t+L((S[E]-x[E])/(_[E]-x[E]))*(_.t-x.t),P=b.t+L((S[C]-b[C])/(w[C]-b[C]))*(w.t-b.t);M>=0&&M<=1&&P>=0&&P<=1&&(n?l++:l.push({x:S.x,y:S.y,t1:M,t2:P}))}}return l}function _(e,t,n){e=T(e),t=T(t);for(var i,r,o,a,s,c,u,l,p,h,d=n?0:[],f=0,m=e.length;f<m;f++){var g=e[f];if("M"==g[0])i=s=g[1],r=c=g[2];else{"C"==g[0]?(p=[i,r].concat(g.slice(1)),i=p[6],r=p[7]):(p=[i,r,i,r,s,c,s,c],i=s,r=c);for(var y=0,v=t.length;y<v;y++){var _=t[y];if("M"==_[0])o=u=_[1],a=l=_[2];else{"C"==_[0]?(h=[o,a].concat(_.slice(1)),o=h[6],a=h[7]):(h=[o,a,o,a,u,l,u,l],o=u,a=l);var b=x(p,h,n);if(n)d+=b;else{for(var w=0,E=b.length;w<E;w++)b[w].segment1=f,b[w].segment2=y,b[w].bez1=p,b[w].bez2=h;d=d.concat(b)}}}}}return d}function b(e,t,n,i,r){if(r)return[["M",+e+ +r,t],["l",n-2*r,0],["a",r,r,0,0,1,r,r],["l",0,i-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-n,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-i],["a",r,r,0,0,1,r,-r],["z"]];var o=[["M",e,t],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.toString=l,o}function w(e,t,n,i,r){if(null==r&&null==i&&(i=n),e=+e,t=+t,n=+n,i=+i,null!=r)var o=Math.PI/180,a=e+n*Math.cos(-i*o),s=e+n*Math.cos(-r*o),c=t+n*Math.sin(-i*o),u=t+n*Math.sin(-r*o),p=[["M",a,c],["A",n,n,0,+(r-i>180),0,s,u]];else p=[["M",e,t],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return p.toString=l,p}function E(e){var t=c(e);if(t.abs)return p(t.abs);if(i(e,"array")&&i(e&&e[0],"array")||(e=s(e)),!e||!e.length)return[["M",0,0]];var n,r=[],o=0,a=0,u=0,h=0,d=0;"M"==e[0][0]&&(o=+e[0][1],a=+e[0][2],u=o,h=a,d++,r[0]=["M",o,a]);for(var f,m,g=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),y=d,v=e.length;y<v;y++){if(r.push(f=[]),m=e[y],(n=m[0])!=n.toUpperCase())switch(f[0]=n.toUpperCase(),f[0]){case"A":f[1]=m[1],f[2]=m[2],f[3]=m[3],f[4]=m[4],f[5]=m[5],f[6]=+m[6]+o,f[7]=+m[7]+a;break;case"V":f[1]=+m[1]+a;break;case"H":f[1]=+m[1]+o;break;case"R":for(var x=[o,a].concat(m.slice(1)),_=2,b=x.length;_<b;_++)x[_]=+x[_]+o,x[++_]=+x[_]+a;r.pop(),r=r.concat(P(x,g));break;case"O":r.pop(),x=w(o,a,m[1],m[2]),x.push(x[0]),r=r.concat(x);break;case"U":r.pop(),r=r.concat(w(o,a,m[1],m[2],m[3])),f=["U"].concat(r[r.length-1].slice(-2));break;case"M":u=+m[1]+o,h=+m[2]+a;default:for(_=1,b=m.length;_<b;_++)f[_]=+m[_]+(_%2?o:a)}else if("R"==n)x=[o,a].concat(m.slice(1)),r.pop(),r=r.concat(P(x,g)),f=["R"].concat(m.slice(-2));else if("O"==n)r.pop(),x=w(o,a,m[1],m[2]),x.push(x[0]),r=r.concat(x);else if("U"==n)r.pop(),r=r.concat(w(o,a,m[1],m[2],m[3])),f=["U"].concat(r[r.length-1].slice(-2));else for(var E=0,C=m.length;E<C;E++)f[E]=m[E];if("O"!=(n=n.toUpperCase()))switch(f[0]){case"Z":o=+u,a=+h;break;case"H":o=f[1];break;case"V":a=f[1];break;case"M":u=f[f.length-2],h=f[f.length-1];default:o=f[f.length-2],a=f[f.length-1]}}return r.toString=l,t.abs=p(r),r}function C(e,t,n,i){return[e,t,n,i,n,i]}function S(e,t,n,i,r,o){return[1/3*e+2/3*n,1/3*t+2/3*i,1/3*r+2/3*n,1/3*o+2/3*i,r,o]}function M(e,t,n,i,r,o,s,c,u,l){var p,h=120*N/180,d=N/180*(+r||0),f=[],m=a(function(e,t,n){return{x:e*j.cos(n)-t*j.sin(n),y:e*j.sin(n)+t*j.cos(n)}});if(l)C=l[0],S=l[1],w=l[2],E=l[3];else{p=m(e,t,-d),e=p.x,t=p.y,p=m(c,u,-d),c=p.x,u=p.y;var g=(e-c)/2,y=(t-u)/2,v=g*g/(n*n)+y*y/(i*i);v>1&&(v=j.sqrt(v),n*=v,i*=v)
;var x=n*n,_=i*i,b=(o==s?-1:1)*j.sqrt(L((x*_-x*y*y-_*g*g)/(x*y*y+_*g*g))),w=b*n*y/i+(e+c)/2,E=b*-i*g/n+(t+u)/2,C=j.asin(((t-E)/i).toFixed(9)),S=j.asin(((u-E)/i).toFixed(9));C=e<w?N-C:C,S=c<w?N-S:S,C<0&&(C=2*N+C),S<0&&(S=2*N+S),s&&C>S&&(C-=2*N),!s&&S>C&&(S-=2*N)}var P=S-C;if(L(P)>h){var R=S,T=c,k=u;S=C+h*(s&&S>C?1:-1),c=w+n*j.cos(S),u=E+i*j.sin(S),f=M(c,u,n,i,r,0,s,T,k,[S,R,w,E])}P=S-C;var A=j.cos(C),I=j.sin(C),O=j.cos(S),D=j.sin(S),B=j.tan(P/4),z=4/3*n*B,F=4/3*i*B,$=[e,t],H=[e+z*I,t-F*A],U=[c+z*D,u-F*O],W=[c,u];if(H[0]=2*$[0]-H[0],H[1]=2*$[1]-H[1],l)return[H,U,W].concat(f);f=[H,U,W].concat(f).join().split(",");for(var V=[],G=0,q=f.length;G<q;G++)V[G]=G%2?m(f[G-1],f[G],d).y:m(f[G],f[G+1],d).x;return V}function P(e,t){for(var n=[],i=0,r=e.length;r-2*!t>i;i+=2){var o=[{x:+e[i-2],y:+e[i-1]},{x:+e[i],y:+e[i+1]},{x:+e[i+2],y:+e[i+3]},{x:+e[i+4],y:+e[i+5]}];t?i?r-4==i?o[3]={x:+e[0],y:+e[1]}:r-2==i&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[r-2],y:+e[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+e[i],y:+e[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}function R(e,t,n,i,r,o,a,s){for(var c,u,l,p,h,d,f,m,g=[],y=[[],[]],v=0;v<2;++v)if(0==v?(u=6*e-12*n+6*r,c=-3*e+9*n-9*r+3*a,l=3*n-3*e):(u=6*t-12*i+6*o,c=-3*t+9*i-9*o+3*s,l=3*i-3*t),L(c)<1e-12){if(L(u)<1e-12)continue;0<(p=-l/u)&&p<1&&g.push(p)}else f=u*u-4*l*c,m=j.sqrt(f),f<0||(h=(-u+m)/(2*c),0<h&&h<1&&g.push(h),0<(d=(-u-m)/(2*c))&&d<1&&g.push(d));for(var x,_=g.length,b=_;_--;)p=g[_],x=1-p,y[0][_]=x*x*x*e+3*x*x*p*n+3*x*p*p*r+p*p*p*a,y[1][_]=x*x*x*t+3*x*x*p*i+3*x*p*p*o+p*p*p*s;return y[0][b]=e,y[1][b]=t,y[0][b+1]=a,y[1][b+1]=s,y[0].length=y[1].length=b+2,{min:{x:O.apply(0,y[0]),y:O.apply(0,y[1])},max:{x:D.apply(0,y[0]),y:D.apply(0,y[1])}}}function T(e,t){var n=!t&&c(e);if(!t&&n.curve)return p(n.curve);for(var i=E(e),r=t&&E(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=(function(e,t,n){var i,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(M.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*t.x-t.bx,r=2*t.y-t.by):(i=t.x,r=t.y),e=["C",i,r].concat(e.slice(1));break;case"T":"Q"==n||"T"==n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(S(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(S(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(C(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(C(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(C(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(C(t.x,t.y,t.X,t.Y))}return e}),u=function(e,t){if(e[t].length>7){e[t].shift();for(var n=e[t];n.length;)h[t]="A",r&&(d[t]="A"),e.splice(t++,0,["C"].concat(n.splice(0,6)));e.splice(t,1),y=D(i.length,r&&r.length||0)}},l=function(e,t,n,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),n.bx=0,n.by=0,n.x=e[a][1],n.y=e[a][2],y=D(i.length,r&&r.length||0))},h=[],d=[],f="",m="",g=0,y=D(i.length,r&&r.length||0);g<y;g++){i[g]&&(f=i[g][0]),"C"!=f&&(h[g]=f,g&&(m=h[g-1])),i[g]=s(i[g],o,m),"A"!=h[g]&&"C"==f&&(h[g]="C"),u(i,g),r&&(r[g]&&(f=r[g][0]),"C"!=f&&(d[g]=f,g&&(m=d[g-1])),r[g]=s(r[g],a,m),"A"!=d[g]&&"C"==f&&(d[g]="C"),u(r,g)),l(i,r,o,a,g),l(r,i,a,o,g);var v=i[g],x=r&&r[g],_=v.length,b=r&&x.length;o.x=v[_-2],o.y=v[_-1],o.bx=I(v[_-4])||o.x,o.by=I(v[_-3])||o.y,a.bx=r&&(I(x[b-4])||a.x),a.by=r&&(I(x[b-3])||a.y),a.x=r&&x[b-2],a.y=r&&x[b-1]}return r||(n.curve=p(i)),r?[i,r]:i}var k="hasOwnProperty",A=/,?([a-z]),?/gi,I=parseFloat,j=Math,N=j.PI,O=j.min,D=j.max,B=j.pow,L=j.abs,z=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/gi,F=/(-?\d*\.?\d*(?:e[-+]?\\d+)?)[\s]*,?[\s]*/gi;t.exports=_},{}],442:[function(e,t,n){"use strict";function i(e,t,n,i){return i?a.call(c,i)?c[i]:"&"+i+";":o(t?t:parseInt(n,16))}function r(e){return e.length>3&&-1!==e.indexOf("&")?e.replace(s,i):e}t.exports=r;var o=String.fromCharCode,a=Object.prototype.hasOwnProperty,s=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,c={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(c).forEach(function(e){c[e.toUpperCase()]=c[e]})},{}],443:[function(e,t,n){"use strict";function i(e){return new Error(e)}function r(e){return"missing namespace for prefix <"+e+">"}function o(e){return{get:e,enumerable:!0}}function a(e){var t,n={};for(t in e)n[t]=e[t];return n}function s(e){return e+"$uri"}function c(e){var t,n,i={};for(t in e)n=e[t],i[n]=n,i[s(n)]=t;return i}function u(){return{line:0,column:0}}function l(e){throw e}function p(e){function t(e){e instanceof Error||(e=i(e)),A=e,P(e,R)}function n(e){b&&(e instanceof Error||(e=i(e)),b(e,R))}function g(e){function i(){if(null!==N)return N;for(var e,t,i,o,c,u,l,p,d,f,g=k&&D.xmlns,y=k&&T?[]:null,v=W,x=U,_=x.length,b={};v<_;v++)if(!(32===(d=x.charCodeAt(v))||d<14&&d>8)){if((d<65||d>122||d>90&&d<97)&&95!==d&&58!==d)return n("illegal first char attribute name"),N=!1;for(f=v+1;f<_;f++)if(!((d=x.charCodeAt(f))>96&&d<123||d>64&&d<91||d>47&&d<59||45===d||95===d)){if(61!==d)return n("missing attribute value"),N=!1;break}if("xmlns:xmlns"===(p=x.substring(v,f)))return n("illegal declaration of xmlns"),N=!1;if(34===(d=x.charCodeAt(f+1)))f=x.indexOf('"',v=f+2);else{if(39!==d)return n("missing attribute value quotes"),N=!1;f=x.indexOf("'",v=f+2)}if(-1===f)return n("attribute value quote missmatch"),N=!1;if(f+1<_&&((d=x.charCodeAt(f+1))>32||d<9||d<32&&d>13))return n("illegal character after attribute end"),N=!1;if(u=x.substring(v,f),v=f+1,k)if(T){if(null!==(c="xmlns"===p?"xmlns":120===p.charCodeAt(0)&&"xmlns:"===p.substr(0,6)?p.substr(6):null)){if(e=h(u),t=s(c),!(l=S[e])){if("xmlns"===c||t in D&&D[t]!==e)do{l="ns"+L++}while(void 0!==D[l]);else l=c;S[e]=l}D[c]!==l&&(o||(D=a(D),o=!0),D[c]=l,"xmlns"===c&&(D[s(l)]=e,g=l),D[t]=e),b[p]=u;continue}y.push(p,u)}else d=p.indexOf(":"),-1!==d?(i=D[p.substring(0,d)])?(p=g===i?p.substr(d+1):i+p.substr(d),p===m&&(d=u.indexOf(":"),-1!==d?(i=u.substring(0,d),i=D[i]||i,u=i+u.substring(d)):u=g+":"+u),b[p]=u):n(r(p.substring(0,d))):b[p]=u;else b[p]=u}if(T)for(v=0,_=y.length;v<_;v++){if(p=y[v++],u=y[v],-1!==(d=p.indexOf(":"))){if(!(i=D[p.substring(0,d)])){n(r(p.substring(0,d)));continue}p=g===i?p.substr(d+1):i+p.substr(d),p===m&&(d=u.indexOf(":"),-1!==d?(i=u.substring(0,d),i=D[i]||i,u=i+u.substring(d)):u=g+":"+u)}b[p]=u}return N=b}function u(){for(var t,n,i=/(\r\n|\r|\n)/g,r=0,o=0,a=0,s=H;$>=a&&(t=i.exec(e))&&!((s=t[0].length+t.index)>$);)r+=1,a=s;return-1==$?(o=s,n=""):(o=$-a,n=-1==H?e.substring($):e.substring($,H+1)),{data:n,line:r,column:o}}var l,p,d,f,g,b,P,A,j,N,O=k?[]:null,D=k?c(S):null,B=[],L=0,z=!1,F=!1,$=0,H=0,U="",W=0;for(R=u,M&&(j=Object.create({},{name:o(function(){return P}),originalName:o(function(){return A}),attrs:o(i),ns:o(function(){return D})}));-1!==H;){if(-1===($=60===e.charCodeAt(H)?H:e.indexOf("<",H))){if(B.length)return t("unexpected end of file");if(0===H)return t("missing start tag");return}if(H!==$&&y&&(y(e.substring(H,$),h,R),I))return;if(33!==(g=e.charCodeAt($+1)))if(63!==g){if(-1==(H=e.indexOf(">",$+1)))return t("unclosed tag");if(N={},47===g){if(z=!1,F=!0,!B.length)return t("missing open tag");if(p=P=B.pop(),f=$+2+p.length,e.substring($+2,f)!==p)return t("closing tag mismatch");for(;f<H;f++)if(!(32===(g=e.charCodeAt(f))||g>8&&g<14))return t("close tag")}else{if(47===e.charCodeAt(H-1)?(p=P=e.substring($+1,H-1),z=!0,F=!0):(p=P=e.substring($+1,H),z=!0,F=!1),!(g>96&&g<123||g>64&&g<91||95===g||58===g))return t("illegal first char nodeName");for(f=1,d=p.length;f<d;f++)if(!((g=p.charCodeAt(f))>96&&g<123||g>64&&g<91||g>47&&g<59||45===g||95===g)){if(32===g||g<14&&g>8){P=p.substring(0,f),N=null;break}return t("invalid nodeName")}F||B.push(P)}if(k){if(l=D,z&&(F||O.push(l),null===N&&(T=-1!==p.indexOf("xmlns",f))&&(W=f,U=p,i(),T=!1)),A=P,-1!==(g=P.indexOf(":"))){if(!(b=D[P.substring(0,g)]))return t("missing namespace on <"+A+">");P=P.substr(g+1)}else b=D.xmlns;b&&(P=b+":"+P)}if(z&&(W=f,U=p,v&&(M?v(j,h,F,R):v(P,i,h,F,R),I)))return;if(F){if(x&&(x(M?j:P,h,z,R),I))return;k&&(D=z?l:O.pop())}H+=1}else{if(-1===(H=e.indexOf("?>",$)))return t("unclosed question");if(E&&(E(e.substring($,H+2),R),I))return;H+=2}else{if(91===(g=e.charCodeAt($+2))&&"CDATA["===e.substr($+3,6)){if(-1===(H=e.indexOf("]]>",$)))return t("unclosed cdata");if(_&&(_(e.substring($+9,H),R),I))return;H+=3;continue}if(45===g&&45===e.charCodeAt($+3)){if(-1===(H=e.indexOf("--\x3e",$)))return t("unclosed comment");if(w&&(w(e.substring($+4,H),h,R),I))return;H+=3;continue}if(-1===(H=e.indexOf(">",$+1)))return t("unclosed tag");if(C&&(C(e.substring($,H+1),h,R),I))return;H+=1}}}if(!this)return new p(e);var y,v,x,_,b,w,E,C,S,M=e&&e.proxy,P=l,R=u,T=!1,k=!1,A=null,I=!1;this.on=function(e,t){if("function"!=typeof t)throw i("required args <name, cb>");switch(e){case"openTag":v=t;break;case"text":y=t;break;case"closeTag":x=t;break;case"error":P=t;break;case"warn":b=t;break;case"cdata":_=t;break;case"attention":C=t;break;case"question":E=t;break;case"comment":w=t;break;default:throw i("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!=typeof e)throw i("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n[d]=f,k=!0,S=n,this},this.parse=function(e){if("string"!=typeof e)throw i("required args <xml=string>");return A=null,g(e),R=u,I=!1,A},this.stop=function(){I=!0}}t.exports=p;var h=e(442),d="http://www.w3.org/2001/XMLSchema-instance",f="xsi",m="xsi:type"},{442:442}],444:[function(t,n,i){!function(t){"use strict";function r(){this.data=[null],this.top=0}function o(){return new r}r.prototype.clear=function(){return this.data=[null],this.top=0,this},r.prototype.length=function(){return this.top},r.prototype.peek=function(){return this.data[this.top]},r.prototype.pop=function(){return this.top>0?(this.top--,this.data.pop()):void 0},r.prototype.push=function(e){return this.data[++this.top]=e,this},void 0!==i?n.exports=o:"function"==typeof e?e(function(){return o}):t.stack=o}(this)},{}],445:[function(e,t,n){function i(e,t){return r(t,e),e}t.exports=i;var r=e(446)},{446:446}],446:[function(e,t,n){function i(e,t){return t.appendChild(r(e,t)),e}t.exports=i;var r=e(456)},{456:456}],447:[function(e,t,n){function i(e,t){return c[t]?e.style[t]:e.getAttributeNS(null,t)}function r(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=c[i];r?(r===s&&"number"==typeof n&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function o(e,t){var n,i,o=Object.keys(t);for(n=0,i;i=o[n];n++)r(e,i,t[i])}function a(e,t,n){if("string"==typeof t){if(void 0===n)return i(e,t);r(e,t,n)}else o(e,t);return e}t.exports=a;var s=2,c={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":s,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":s,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1}},{}],448:[function(e,t,n){function i(e){return void 0!==e}function r(e){return new o(e)}function o(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}t.exports=r;var a=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1},s=/\s+/,c=Object.prototype.toString;o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~a(t,e)||t.push(e),i(this.el.className.baseVal)?this.el.className.baseVal=t.join(" "):this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"===c.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=a(t,e);return~n&&t.splice(n,1),this.el.className.baseVal=t.join(" "),this},o.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?(i(t)?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(i(t)?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(s);return""===n[0]&&n.shift(),n},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~a(this.array(),e)}},{}],449:[function(e,t,n){function i(e){for(var t;t=e.firstChild;)r(t);return e}t.exports=i;var r=e(454)},{454:454}],450:[function(e,t,n){function i(e){return e.cloneNode(!0)}t.exports=i},{}],451:[function(e,t,n){function i(e,t){var n;return"<"===e.charAt(0)?(n=o(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(a.svg,e),t&&r(n,t),n}t.exports=i;var r=e(447),o=e(458),a=e(457)},{447:447,457:457,458:458}],452:[function(e,t,n){function i(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function r(e,t){var n=c.createSVGPoint();switch(arguments.length){case 0:return n;case 2:e={x:e,y:t}}return i(n,e)}function o(e,t,n,r,o,a){var s=c.createSVGMatrix();switch(arguments.length){case 0:return s;case 6:e={a:e,b:t,c:n,d:r,e:o,f:a}}return i(s,e)}function a(e){return e?c.createSVGTransformFromMatrix(e):c.createSVGTransform()}var s=e(451),c=s("svg");t.exports.createTransform=a,t.exports.createMatrix=o,t.exports.createPoint=r},{451:451}],453:[function(e,t,n){function i(e,t){var n,i=c(t).documentElement;if(a(e),t)for(n=i.firstChild;n;)s(n,e),n=n.nextSibling}function r(e){for(var t=e.firstChild,n=[];t;)u(t,n),t=t.nextSibling;return n.join("")}function o(e,t){if(void 0!==t){try{i(e,t)}catch(e){throw new Error("error parsing SVG: "+e.message)}return e}return r(e)}t.exports=o;var a=e(449),s=e(446),c=e(458),u=e(459)},{446:446,449:449,458:458,459:459}],454:[function(e,t,n){function i(e){var t=e.parentNode;return t&&t.removeChild(e),e}t.exports=i},{}],455:[function(e,t,n){function i(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function r(e,t){var n,r;for(e.clear(),n=0;r=t[n];n++)e.appendItem(i(e,r));e.consolidate()}function o(e,t){var n=e.transform.baseVal;if(1===arguments.length)return n.consolidate();t.length?r(n,t):n.initialize(i(n,t))}t.exports=o},{}],456:[function(e,t,n){function i(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(e){}return e}t.exports=i},{}],457:[function(e,t,n){var i={svg:"http://www.w3.org/2000/svg"};t.exports=i},{}],458:[function(e,t,n){function i(e){return"<svg"===e.substring(0,4)?-1===e.indexOf(o.svg)&&(e=a+e.substring(4)):e=a+">"+e+"</svg>",r(e)}function r(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}t.exports=i;var o=e(457),a='<svg xmlns="'+o.svg+'"'},{457:457}],459:[function(e,t,n){function i(e,t){function n(e,t){return s[t]||t}return e.replace(t,n)}function r(e,t){var n,s,c,u,l;switch(e.nodeType){case 3:t.push(i(e.textContent,o));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(c=e.attributes,n=0,s=c.length;n<s;++n)u=c.item(n),t.push(" ",u.name,'="',i(u.value,a),'"');if(e.hasChildNodes()){for(t.push(">"),l=e.childNodes,n=0,s=l.length;n<s;++n)r(l.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("\x3c!--",i(e.nodeValue,o),"--\x3e");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}t.exports=r;var o=/([&<>]{1})/g,a=/([\n\r"]{1})/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"}},{}]},{},[1])(1)});